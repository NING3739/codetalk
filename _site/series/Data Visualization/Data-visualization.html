<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-12-01">
<meta name="description" content="Data Science-Data Visualization">

<title>Stats &amp; R - Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Stats-&amp;-R.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Y96LK2RNJD"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-Y96LK2RNJD', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="index.qmd" class="navbar-brand navbar-brand-logo">
    <img src="../../Stats-&amp;-R.png" alt="Stats-&amp;-R.png" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="index.qmd">
    <span class="navbar-title">Stats &amp; R</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../series.html">
 <span class="menu-text">Series</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../contact.html">
 <span class="menu-text">Contact</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:ln729500172@gmail.com"><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ningli3739"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/NING3739"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#welcome" id="toc-welcome" class="nav-link active" data-scroll-target="#welcome"><span class="toc-section-number">1</span>  Welcome!</a>
  <ul class="collapse">
  <li><a href="#what-is-data-visualization" id="toc-what-is-data-visualization" class="nav-link" data-scroll-target="#what-is-data-visualization"><span class="toc-section-number">1.1</span>  What is data visualization?</a></li>
  </ul></li>
  <li><a href="#introduction-to-data-visualization-and-distributions" id="toc-introduction-to-data-visualization-and-distributions" class="nav-link" data-scroll-target="#introduction-to-data-visualization-and-distributions"><span class="toc-section-number">2</span>  Introduction to Data Visualization and Distributions</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview"><span class="toc-section-number">2.1</span>  Overview</a></li>
  <li><a href="#introduction-to-data-visualization" id="toc-introduction-to-data-visualization" class="nav-link" data-scroll-target="#introduction-to-data-visualization"><span class="toc-section-number">2.2</span>  Introduction to Data Visualization</a>
  <ul class="collapse">
  <li><a href="#key-point" id="toc-key-point" class="nav-link" data-scroll-target="#key-point"><span class="toc-section-number">2.2.1</span>  Key Point:</a></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code"><span class="toc-section-number">2.2.2</span>  Code:</a></li>
  </ul></li>
  <li><a href="#introduction-to-distributions" id="toc-introduction-to-distributions" class="nav-link" data-scroll-target="#introduction-to-distributions"><span class="toc-section-number">2.3</span>  Introduction to Distributions</a>
  <ul class="collapse">
  <li><a href="#key-points" id="toc-key-points" class="nav-link" data-scroll-target="#key-points"><span class="toc-section-number">2.3.1</span>  Key Points:</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="toc-section-number">2.3.2</span>  Data Types</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="toc-section-number">2.3.3</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#describe-heights-to-et" id="toc-describe-heights-to-et" class="nav-link" data-scroll-target="#describe-heights-to-et"><span class="toc-section-number">2.4</span>  Describe Heights to ET</a>
  <ul class="collapse">
  <li><a href="#key-point-1" id="toc-key-point-1" class="nav-link" data-scroll-target="#key-point-1"><span class="toc-section-number">2.4.1</span>  key point:</a></li>
  <li><a href="#code-1" id="toc-code-1" class="nav-link" data-scroll-target="#code-1"><span class="toc-section-number">2.4.2</span>  Code:</a></li>
  </ul></li>
  <li><a href="#cumulative-distribution-function" id="toc-cumulative-distribution-function" class="nav-link" data-scroll-target="#cumulative-distribution-function"><span class="toc-section-number">2.5</span>  Cumulative Distribution Function</a>
  <ul class="collapse">
  <li><a href="#code-for-cdf" id="toc-code-for-cdf" class="nav-link" data-scroll-target="#code-for-cdf"><span class="toc-section-number">2.5.1</span>  Code for CDF:</a></li>
  <li><a href="#code-for-student-height" id="toc-code-for-student-height" class="nav-link" data-scroll-target="#code-for-student-height"><span class="toc-section-number">2.5.2</span>  Code for student height:</a></li>
  </ul></li>
  <li><a href="#smooth-density-plots" id="toc-smooth-density-plots" class="nav-link" data-scroll-target="#smooth-density-plots"><span class="toc-section-number">2.6</span>  Smooth Density Plots</a>
  <ul class="collapse">
  <li><a href="#key-point-2" id="toc-key-point-2" class="nav-link" data-scroll-target="#key-point-2"><span class="toc-section-number">2.6.1</span>  Key Point:</a></li>
  </ul></li>
  <li><a href="#normal-distribution" id="toc-normal-distribution" class="nav-link" data-scroll-target="#normal-distribution"><span class="toc-section-number">2.7</span>  Normal Distribution</a>
  <ul class="collapse">
  <li><a href="#key-points-1" id="toc-key-points-1" class="nav-link" data-scroll-target="#key-points-1"><span class="toc-section-number">2.7.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#equation-for-the-normal-distribution" id="toc-equation-for-the-normal-distribution" class="nav-link" data-scroll-target="#equation-for-the-normal-distribution"><span class="toc-section-number">2.8</span>  Equation for the normal distribution</a>
  <ul class="collapse">
  <li><a href="#code-2" id="toc-code-2" class="nav-link" data-scroll-target="#code-2"><span class="toc-section-number">2.8.1</span>  Code:</a></li>
  <li><a href="#the-68-95-99.7-rule" id="toc-the-68-95-99.7-rule" class="nav-link" data-scroll-target="#the-68-95-99.7-rule"><span class="toc-section-number">2.8.2</span>  The 68-95-99.7 Rule</a></li>
  </ul></li>
  <li><a href="#the-normal-cdf-and-pnorm" id="toc-the-normal-cdf-and-pnorm" class="nav-link" data-scroll-target="#the-normal-cdf-and-pnorm"><span class="toc-section-number">2.9</span>  The Normal CDF and pnorm</a>
  <ul class="collapse">
  <li><a href="#key-points-2" id="toc-key-points-2" class="nav-link" data-scroll-target="#key-points-2"><span class="toc-section-number">2.9.1</span>  Key points:</a></li>
  <li><a href="#code-using-pnorm-to-calculate-probabilities" id="toc-code-using-pnorm-to-calculate-probabilities" class="nav-link" data-scroll-target="#code-using-pnorm-to-calculate-probabilities"><span class="toc-section-number">2.9.2</span>  Code: Using pnorm to calculate probabilities</a></li>
  <li><a href="#code-discretization-and-the-normal-approximation" id="toc-code-discretization-and-the-normal-approximation" class="nav-link" data-scroll-target="#code-discretization-and-the-normal-approximation"><span class="toc-section-number">2.9.3</span>  Code: Discretization and the normal approximation</a></li>
  </ul></li>
  <li><a href="#definition-of-quantiles" id="toc-definition-of-quantiles" class="nav-link" data-scroll-target="#definition-of-quantiles"><span class="toc-section-number">2.10</span>  Definition of quantiles</a>
  <ul class="collapse">
  <li><a href="#definition-of-quantiles-1" id="toc-definition-of-quantiles-1" class="nav-link" data-scroll-target="#definition-of-quantiles-1"><span class="toc-section-number">2.10.1</span>  Definition of quantiles</a></li>
  <li><a href="#using-the-quantile-function" id="toc-using-the-quantile-function" class="nav-link" data-scroll-target="#using-the-quantile-function"><span class="toc-section-number">2.10.2</span>  Using the quantile function</a></li>
  <li><a href="#percentiles" id="toc-percentiles" class="nav-link" data-scroll-target="#percentiles"><span class="toc-section-number">2.10.3</span>  Percentiles</a></li>
  <li><a href="#quartiles" id="toc-quartiles" class="nav-link" data-scroll-target="#quartiles"><span class="toc-section-number">2.10.4</span>  Quartiles</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="toc-section-number">2.10.5</span>  Examples</a></li>
  </ul></li>
  <li><a href="#finding-quantile-with-qnorm" id="toc-finding-quantile-with-qnorm" class="nav-link" data-scroll-target="#finding-quantile-with-qnorm"><span class="toc-section-number">2.11</span>  Finding quantile with qnorm</a>
  <ul class="collapse">
  <li><a href="#definiton-of-qnorm" id="toc-definiton-of-qnorm" class="nav-link" data-scroll-target="#definiton-of-qnorm"><span class="toc-section-number">2.11.1</span>  Definiton of qnorm</a></li>
  <li><a href="#realation-to-pnorm" id="toc-realation-to-pnorm" class="nav-link" data-scroll-target="#realation-to-pnorm"><span class="toc-section-number">2.11.2</span>  Realation to pnorm</a></li>
  <li><a href="#theoretical-quantiles" id="toc-theoretical-quantiles" class="nav-link" data-scroll-target="#theoretical-quantiles"><span class="toc-section-number">2.11.3</span>  Theoretical quantiles</a></li>
  </ul></li>
  <li><a href="#quantile-quantile-plots" id="toc-quantile-quantile-plots" class="nav-link" data-scroll-target="#quantile-quantile-plots"><span class="toc-section-number">2.12</span>  Quantile-Quantile Plots</a>
  <ul class="collapse">
  <li><a href="#key-points-3" id="toc-key-points-3" class="nav-link" data-scroll-target="#key-points-3"><span class="toc-section-number">2.12.1</span>  Key Points:</a></li>
  <li><a href="#code-3" id="toc-code-3" class="nav-link" data-scroll-target="#code-3"><span class="toc-section-number">2.12.2</span>  Code:</a></li>
  </ul></li>
  <li><a href="#percentiles-1" id="toc-percentiles-1" class="nav-link" data-scroll-target="#percentiles-1"><span class="toc-section-number">2.13</span>  Percentiles</a>
  <ul class="collapse">
  <li><a href="#key-points-4" id="toc-key-points-4" class="nav-link" data-scroll-target="#key-points-4"><span class="toc-section-number">2.13.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots"><span class="toc-section-number">2.14</span>  Boxplots</a>
  <ul class="collapse">
  <li><a href="#key-points-5" id="toc-key-points-5" class="nav-link" data-scroll-target="#key-points-5"><span class="toc-section-number">2.14.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#distribution-of-female-heights" id="toc-distribution-of-female-heights" class="nav-link" data-scroll-target="#distribution-of-female-heights"><span class="toc-section-number">2.15</span>  Distribution of Female Heights</a>
  <ul class="collapse">
  <li><a href="#key-points-6" id="toc-key-points-6" class="nav-link" data-scroll-target="#key-points-6"><span class="toc-section-number">2.15.1</span>  Key Points:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#introduction-to-ggplot2" id="toc-introduction-to-ggplot2" class="nav-link" data-scroll-target="#introduction-to-ggplot2"><span class="toc-section-number">3</span>  Introduction to ggplot2</a>
  <ul class="collapse">
  <li><a href="#overview-1" id="toc-overview-1" class="nav-link" data-scroll-target="#overview-1"><span class="toc-section-number">3.1</span>  Overview</a></li>
  <li><a href="#ggplot" id="toc-ggplot" class="nav-link" data-scroll-target="#ggplot"><span class="toc-section-number">3.2</span>  ggplot</a>
  <ul class="collapse">
  <li><a href="#ggplot2" id="toc-ggplot2" class="nav-link" data-scroll-target="#ggplot2"><span class="toc-section-number">3.2.1</span>  ggplot2</a></li>
  <li><a href="#key-points-7" id="toc-key-points-7" class="nav-link" data-scroll-target="#key-points-7"><span class="toc-section-number">3.2.2</span>  key Points:</a></li>
  </ul></li>
  <li><a href="#graph-components" id="toc-graph-components" class="nav-link" data-scroll-target="#graph-components"><span class="toc-section-number">3.3</span>  Graph Components</a>
  <ul class="collapse">
  <li><a href="#key-points-8" id="toc-key-points-8" class="nav-link" data-scroll-target="#key-points-8"><span class="toc-section-number">3.3.1</span>  Key Points:</a></li>
  <li><a href="#code-4" id="toc-code-4" class="nav-link" data-scroll-target="#code-4"><span class="toc-section-number">3.3.2</span>  Code:</a></li>
  </ul></li>
  <li><a href="#creating-a-new-plot" id="toc-creating-a-new-plot" class="nav-link" data-scroll-target="#creating-a-new-plot"><span class="toc-section-number">3.4</span>  Creating a New Plot</a>
  <ul class="collapse">
  <li><a href="#key-points-9" id="toc-key-points-9" class="nav-link" data-scroll-target="#key-points-9"><span class="toc-section-number">3.4.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers"><span class="toc-section-number">3.5</span>  Layers</a>
  <ul class="collapse">
  <li><a href="#key-points-10" id="toc-key-points-10" class="nav-link" data-scroll-target="#key-points-10"><span class="toc-section-number">3.5.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#thinkering" id="toc-thinkering" class="nav-link" data-scroll-target="#thinkering"><span class="toc-section-number">3.6</span>  Thinkering</a>
  <ul class="collapse">
  <li><a href="#key-points-11" id="toc-key-points-11" class="nav-link" data-scroll-target="#key-points-11"><span class="toc-section-number">3.6.1</span>  Key Points:</a></li>
  </ul></li>
  <li><a href="#scales-labels-and-colors" id="toc-scales-labels-and-colors" class="nav-link" data-scroll-target="#scales-labels-and-colors"><span class="toc-section-number">3.7</span>  Scales, Labels, and Colors</a>
  <ul class="collapse">
  <li><a href="#textbook-links" id="toc-textbook-links" class="nav-link" data-scroll-target="#textbook-links"><span class="toc-section-number">3.7.1</span>  Textbook links:</a></li>
  <li><a href="#key-points-12" id="toc-key-points-12" class="nav-link" data-scroll-target="#key-points-12"><span class="toc-section-number">3.7.2</span>  Key Points:</a></li>
  <li><a href="#code-log-scale-the-x-axis-and-y-axis" id="toc-code-log-scale-the-x-axis-and-y-axis" class="nav-link" data-scroll-target="#code-log-scale-the-x-axis-and-y-axis"><span class="toc-section-number">3.7.3</span>  Code: Log-scale the x-axis and y-axis</a></li>
  <li><a href="#code-add-labels-and-title" id="toc-code-add-labels-and-title" class="nav-link" data-scroll-target="#code-add-labels-and-title"><span class="toc-section-number">3.7.4</span>  Code: Add labels and title</a></li>
  <li><a href="#code-change-color-of-the-points" id="toc-code-change-color-of-the-points" class="nav-link" data-scroll-target="#code-change-color-of-the-points"><span class="toc-section-number">3.7.5</span>  Code: Change color of the points</a></li>
  <li><a href="#code-add-a-line-with-average-murder-rate" id="toc-code-add-a-line-with-average-murder-rate" class="nav-link" data-scroll-target="#code-add-a-line-with-average-murder-rate"><span class="toc-section-number">3.7.6</span>  Code: Add a line with average murder rate</a></li>
  <li><a href="#code-change-legend-title" id="toc-code-change-legend-title" class="nav-link" data-scroll-target="#code-change-legend-title"><span class="toc-section-number">3.7.7</span>  Code: Change legend title</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Visualization</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data Science</div>
    <div class="quarto-category">Data Visualization</div>
  </div>
  </div>

<div>
  <div class="description">
    Data Science-Data Visualization
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 1, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="welcome" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Welcome!</h1>
<section id="what-is-data-visualization" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="what-is-data-visualization"><span class="header-section-number">1.1</span> What is data visualization?</h2>
<p>Data visualization is the graphical representation of information and data. By using visual elements like charts, graphs, and maps, data visualization tools provide an accessible way to see and understand trends, outliers, and patterns in data. Additionally, it provides an excellent way for employees or business owners to present data to non-technical audiences without confusion.</p>
<p>In the world of Big Data, data visualization tools and technologies are essential to analyze massive amounts of information and make data-driven decisions.</p>
</section>
</section>
<section id="introduction-to-data-visualization-and-distributions" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Introduction to Data Visualization and Distributions</h1>
<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>After completing this section, we will:</p>
<ul>
<li><p>understand the importance of data visualization for communicating data-driven findings.</p></li>
<li><p>be able to use distributions to summarize data.</p></li>
<li><p>be able to use the average and the standard deviation to understand the normal distribution</p></li>
<li><p>be able to access how well a normal distribution fit the data using a quantile-quantile plot.</p></li>
<li><p>be able to interpret data from a box plot</p></li>
</ul>
</section>
<section id="introduction-to-data-visualization" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="introduction-to-data-visualization"><span class="header-section-number">2.2</span> Introduction to Data Visualization</h2>
<section id="key-point" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="key-point"><span class="header-section-number">2.2.1</span> Key Point:</h3>
<ul>
<li><p>Plots of data easily communicate information that is difficult to extract from table of raw values.</p></li>
<li><p>Data visualization is a key component of exploratory data analysis (EDA), in which the properties of data are explored through visualization and summarization techniques.</p></li>
<li><p>Data visualization can help discover biases, systematic errors, mistakes and other unexpected problems in data before those data are incorporated into potentially flawed analysis.</p></li>
<li><p>Basics of data visualization and EDA will be covered in R by using the ggplot2 package and motivating examples from world health, economics and infections disease.</p></li>
</ul>
</section>
<section id="code" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="code"><span class="header-section-number">2.2.2</span> Code:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">data</span>(murders)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">head</span>(murders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       state abb region population total
1    Alabama  AL  South    4779736   135
2     Alaska  AK   West     710231    19
3    Arizona  AZ   West    6392017   232
4   Arkansas  AR  South    2915918    93
5 California  CA   West   37253956  1257
6   Colorado  CO   West    5029196    65</code></pre>
</div>
</div>
</section>
</section>
<section id="introduction-to-distributions" class="level2 page-columns page-full" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="introduction-to-distributions"><span class="header-section-number">2.3</span> Introduction to Distributions</h2>
<section id="key-points" class="level3 page-columns page-full" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="key-points"><span class="header-section-number">2.3.1</span> Key Points:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><a href="https://baike.baidu.com/item/方差/3108412">(<strong>Variance/Deviation Var</strong>)方差</a>: 方差越大，数据的波动越大；方差越小，数据的波动就越小。</span></div></div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><a href="https://baike.baidu.com/item/标准差/1415772">(<strong>Standard Deviation</strong>)标准差</a>: 方差开根号。</span></div></div>
<ul>
<li><p>The most basic statistical summary of a list of object is its distribution.</p></li>
<li><p>We will learn ways to visualize and analyze distributions in the upcoming videos.</p></li>
<li><p>In some cases, data can be summarized by two-number summary: the average and standard deviation.I will learn to use data visualization to determine when that is appropriate.</p></li>
</ul>
</section>
<section id="data-types" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="data-types"><span class="header-section-number">2.3.2</span> Data Types</h3>
<p>In R, there are <a href="https://www.programiz.com/r/data-types">6 basic data types</a>:</p>
<ul>
<li><p><code>logical</code></p></li>
<li><p><code>numeric</code></p></li>
<li><p><code>integer</code></p></li>
<li><p><code>complex</code></p></li>
<li><p><code>character</code></p></li>
<li><p><code>raw</code></p></li>
</ul>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Categorical data are variables that are defined by a small number of groups.</p>
<ul>
<li><p>Ordinal categorical data have an inherent order to the categories (mild/medium/hot, for example).</p></li>
<li><p>Non-ordinal categorical data have no order to the categories.</p></li>
</ul>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Numerical data take a variety of numeric values.</p>
<ul>
<li><p>Continuous variables can take any value.</p></li>
<li><p>Discrete variables are limited to sets of specific values.</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p><pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">flowchart LR
  A[Main variable types] --&gt; B{Catrgorical}
  A[Main variable types] --&gt; C{Numeric}
  B{Catrgorical} --&gt; D[ordinal]
  B{Catrgorical} --&gt; E[non-ordinal]
  C{Numeric} --&gt; F[continuous]
  C{Numeric} --&gt; G[discrete]
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>
<p></p>
</div>
</div>
</div>
</section>
<section id="exercise" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="exercise"><span class="header-section-number">2.3.3</span> Exercise</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># extract the variable names from a dataset</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">names</span>(x)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># explore how many unique values are used in dataset</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">unique</span>(x)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co"># determine how many variable were reported</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="fu">length</span>(x)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># determine how many unique variable were reported</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="fu">length</span>(<span class="fu">unique</span>(x))</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co"># to compute the frequencies of each unique value</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="fu">table</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="describe-heights-to-et" class="level2 page-columns page-full" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="describe-heights-to-et"><span class="header-section-number">2.4</span> Describe Heights to ET</h2>
<section id="key-point-1" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="key-point-1"><span class="header-section-number">2.4.1</span> key point:</h3>
<ul>
<li>A distribution is a function or description that shows the possible values of a variable and how often those values occur.</li>
<li>For categorical variables, the distribution describes the proportions of each category.</li>
<li>A <em>frequency table</em> is the simplest way to show a categorical distribution. Use <code>prop.table()</code> to convert a table of counts to a frequency table. <em>Barplots</em> display the distribution of categorical variables and are a way to visualize the information in frequency tables.</li>
<li>For continuous numerical data, reporting the frequency of each unique entry is not an effective summary as many or most values are unique. Instead, a distribution function is required.</li>
<li>The <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function"><em>cumulative distribution function (CDF)</em></a> is a function that reports the proportion of data below a value <span class="math inline">a</span> for all values of <span class="math inline">a</span> :<span class="math inline">F(a)=Pr(x≤a)</span>.</li>
<li>The proportion of observations between any two values <span class="math inline">a</span> and <span class="math inline">b</span> can be computed from the CDF as <span class="math inline">F(b)-F(a)</span>.</li>
<li>A <em>histogram</em> divides data into non-overlapping bins of the same size and plots the counts of number of values that fall in that interval.</li>
</ul>
</section>
<section id="code-1" class="level3 page-columns page-full" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="code-1"><span class="header-section-number">2.4.2</span> Code:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R 语言学习 - <a href="https://blog.csdn.net/wlt9037/article/details/76570155" title="table()结果提取"><code>table()</code></a> 结果提取.</span></div></div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># load the dataset</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">data</span>(heights)</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># make a table of category proportions</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(heights<span class="sc">$</span>sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="cumulative-distribution-function" class="level2 page-columns page-full" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="cumulative-distribution-function"><span class="header-section-number">2.5</span> Cumulative Distribution Function</h2>
<p>Every <em>continuous distribution</em> has <em>cumulative distribution function (CDF)</em>. The CDF defines the proportion of the data below a given value for all values of <span class="math inline">a</span> :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Cumulative Distribution Function (CDF)</figcaption><p></p>
<p><img src="http://rafalab.dfci.harvard.edu/dsbook/book_files/figure-html/ecdf-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>As defined above, this plot of the CDF for male heights has height value <em>a</em> on the x-axis and the proportion of student with heights of that value or lower(<em>F(</em>a<em>)</em>) on the y-axis.</p>
<p>The CDF is essential for calculating probabilities related to continuous data. In a continuous dataset, the probability of a specific exact value is not informative because most entries are unique. For example, in the student heights data, only one individual reported a height of 68.8976377952726 inches, but many students rounded similar heights to 69 inches. If we computed exact value probabilities, we would find that being exactly 69 inches is much more likely than being a non-integer exact height, which does not match our understanding that height is continuous. We can instead use the CDF to obtain a useful summary, such as the probability that a student is between 68.5 and 69.5 inches.</p>
<p>For datasets that are not normal, the CDF can be calculated manually by defining a function to compute the probability above. This function can then be applied to a range of values across the range of the dataset to calculate a CDF. Given a dataset<code>my_data</code>, the CDF can be calculated and plotted like this:</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R语言中的<a href="https://www.jianshu.com/p/59fb24ca2ea7">[<code>apply()</code>]，[<code>lapply()</code>]，[<code>sapply()</code>]，<code>tapply()</code></a>函数以及示例</span></div></div>
<section id="code-for-cdf" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="code-for-cdf"><span class="header-section-number">2.5.1</span> Code for CDF:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Cumulative Distribution Function </span></span>
<span id="cb5-2"><a href="#cb5-2"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(x), <span class="fu">max</span>(x), length) <span class="co"># define range of the values</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>cdf_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="fu">mean</span>(my_data <span class="sc">&lt;=</span> x)</span>
<span id="cb5-5"><a href="#cb5-5"></a>}</span>
<span id="cb5-6"><a href="#cb5-6"></a>cdf_values <span class="ot">&lt;-</span> <span class="fu">sapply</span>(a, cdf_function)</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="fu">plot</span>(a, cdf_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="code-for-student-height" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="code-for-student-height"><span class="header-section-number">2.5.2</span> Code for student height:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># example for student heights</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">min</span>(heights<span class="sc">$</span>height), <span class="fu">max</span>(heights<span class="sc">$</span>height), <span class="at">length =</span> <span class="dv">100</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>cdf_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">mean</span>(heights<span class="sc">$</span>height <span class="sc">&lt;=</span> x)</span>
<span id="cb6-5"><a href="#cb6-5"></a>}</span>
<span id="cb6-6"><a href="#cb6-6"></a>cdf_value <span class="ot">&lt;-</span> <span class="fu">sapply</span>(a, cdf_function)</span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">plot</span>(a, cdf_value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The CDF defines that proportion of data below a cut-off <span class="math inline">a</span>. To define the proportion of values above <span class="math inline">a</span>, we compute: <span class="math inline">1-F(a)</span></p>
<p>To define the proportion of values between <span class="math inline">a</span> and <span class="math inline">b</span>, we compute: <span class="math inline">F(b)-F(a)</span></p>
<p>Note that the CDF can help compute probabilities. The probability of observing a randomly chosen value between <span class="math inline">a</span> and <span class="math inline">b</span> is equal to the proportion of values between <span class="math inline">a</span> and <span class="math inline">b</span>, which we compute with the CDF.</p>
</section>
</section>
<section id="smooth-density-plots" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="smooth-density-plots"><span class="header-section-number">2.6</span> Smooth Density Plots</h2>
<section id="key-point-2" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="key-point-2"><span class="header-section-number">2.6.1</span> Key Point:</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
A further note on histograms
</div>
</div>
<div class="callout-body-container callout-body">
<p>The choice of binwidth has a determinative effect on sharp. There is no “correct” choice for binwidth, and you can sometimes gain insights into the data by experimenting with binwidths.</p>
</div>
</div>
<ul>
<li><p><em>Smooth density plots</em> can be thought of as <strong><em>histograms where the binwidth is extremely or infinitely small</em></strong>. The smoothing function makes estimates of the true continuous trend of the data given the available sample of data points.</p></li>
<li><p>The degree of smoothness can be controlled by an argument in the plotting function.</p></li>
<li><p>While the histogram is an assumption-free summary, the smooth density plot is shaped by assumptions and choices you make as a data analyst.</p></li>
<li><p><strong><em>The y-axis is scaled so that the area under the density curve sums to 1.</em></strong> <!--#这是因为Y轴表示的是区间内的变量占总体的比重。 所有区间相加等于1。-->This means that interpreting value on the y-axis is not straightforward. To determine the proportion of data in between two values, compute the area under the smooth density curve in the region between those values.</p></li>
<li><p>An advantage of smooth densities over histograms is that <strong><em>densities are easier to compare visually</em></strong>.</p></li>
</ul>
</section>
</section>
<section id="normal-distribution" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="normal-distribution"><span class="header-section-number">2.7</span> Normal Distribution</h2>
<section id="key-points-1" class="level3" data-number="2.7.1">
<h3 data-number="2.7.1" class="anchored" data-anchor-id="key-points-1"><span class="header-section-number">2.7.1</span> Key Points:</h3>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=xI9ZHGOSaCg&amp;ab_channel=AceTutors">The normal distribution</a>:</p>
<ul>
<li>is <strong><em>centered around</em></strong> one value, the <strong><em>mean</em></strong></li>
<li>is <strong><em>symmetric(对称)</em></strong> around the mean.</li>
<li>is defined completely by its <strong><em>mean(</em></strong><span class="math inline">\mu</span><strong>)</strong> and <strong><em>standard deviation(</em></strong><span class="math inline">\sigma</span><strong>)</strong></li>
<li><strong><em>Always has the same proportion</em></strong> of observations <strong><em>within a given distance</em></strong> of the mean (for example, 95% with 2<span class="math inline">\sigma</span>)</li>
</ul></li>
<li><p>The standard deviation is the <strong><em>average distance between a value and the mean value</em></strong>.</p></li>
<li><p>Calculate the mean using the <strong><em><code>mean()</code></em></strong> function.</p></li>
<li><p>Calculate the standard deviation using the <strong><em><code>sd()</code></em></strong> function or manually.</p></li>
<li><p><strong><em>Standard units</em></strong> describe how many standard deviations a value is away from the mean. The z-score, or number of standard deviation an observation is away from the mean <span class="math inline">\mu</span>:</p>
<p><span class="math display">
  z = (x-\mu)/\sigma
  </span></p></li>
<li><p>Computer standard units with the <code>scale()</code> function.</p></li>
<li><p><strong><em>Important:</em></strong> to calculate the proportion of value that meet a certain condition, use the <code>mean</code> function on a logical vector. Because <code>TRUE</code> is converted to 1 and <code>FALSE</code> is converted to 0, taking the mean of this vector yields the proportion of <code>TURE</code>.</p></li>
</ul>
</section>
</section>
<section id="equation-for-the-normal-distribution" class="level2 page-columns page-full" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="equation-for-the-normal-distribution"><span class="header-section-number">2.8</span> Equation for the normal distribution</h2>
<p>The normal distribution is mathematically defined by the following formula for any mean <span class="math inline">\mu</span> and standard deviation <span class="math inline">\sigma</span>:</p>
<p><span class="math display">
Pr(a &lt; x &lt; b) = \int_{a}^b\frac{1}{\sqrt{2\pi\mu}}{e}^{-\frac{1}{2}(\frac{x-\mu^2}{\sigma})}dx
</span></p>
<p>When standard unites <span class="math inline">z=0</span>, the normal distribution is at a maximum, the mean <span class="math inline">\mu</span>. The function is defined to be symmetric around <span class="math inline">z=0</span>.</p>
<p>The normal distribution of z-score is called the <em>standard normal distribution</em> and is defined by <span class="math inline">\mu=0</span> and <span class="math inline">\sigma=1</span>.</p>
<p>Z-score are useful to quickly evalute whether an observation is average or extreme. Z-scores near 0 are average. Z-score above 2 or below -2 are <strong><em>significantly above or blew the mean</em></strong>, and z-scores above 3 or below -3 are <strong><em>extrmely rate</em></strong>.</p>
<section id="code-2" class="level3 page-columns page-full" data-number="2.8.1">
<h3 data-number="2.8.1" class="anchored" data-anchor-id="code-2"><span class="header-section-number">2.8.1</span> Code:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># define x as vector of male heights</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">data</span>(heights)</span>
<span id="cb7-5"><a href="#cb7-5"></a>index <span class="ot">&lt;-</span> heights<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Male"</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>x <span class="ot">&lt;-</span> heights<span class="sc">$</span>height[index]</span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co"># calculate the mean and standard deviation manually</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>average <span class="ot">&lt;-</span> <span class="fu">sum</span>(x)<span class="sc">/</span><span class="fu">length</span>(x)</span>
<span id="cb7-10"><a href="#cb7-10"></a>SD <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>((x<span class="sc">-</span>average)<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="fu">length</span>(x))</span>
<span id="cb7-11"><a href="#cb7-11"></a></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co"># built-in mean and sd functions - note that the audio and printed value disagree</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>average <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb7-14"><a href="#cb7-14"></a>SD <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)</span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="fu">c</span>(<span class="at">average =</span> average, <span class="at">SD =</span> SD)</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co"># calculate standard units</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>z <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb7-19"><a href="#cb7-19"></a></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co"># calculate proportion of value within 2 SD of mean</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="fu">mean</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><strong><em>function <code>sd()</code>:</em></strong>The built-in R <strong><em>function <code>sd()</code></em></strong> calculates the standard deviation, but it divides by <strong><em><code>length(x)-1</code></em></strong> instead of <strong><em><code>length(x)</code></em></strong>. When the length of the list is large, this difference is negligible and you can use the built-in <strong><em><code>sd()</code></em></strong> function. Otherwise, you should compute σ by hand. For this course series, assume that you should use the <strong><em><code>sd()</code></em></strong> function unless you are told not to do so.</span></div></div>
<p>Here we will learn more about benchmark z-score value and their corresponding probabilities.</p>
</section>
<section id="the-68-95-99.7-rule" class="level3" data-number="2.8.2">
<h3 data-number="2.8.2" class="anchored" data-anchor-id="the-68-95-99.7-rule"><span class="header-section-number">2.8.2</span> The 68-95-99.7 Rule</h3>
<p>The normal distribution is associated with the 68-95-99.7 rule. This rule describes the probability of observing events within a ceration number of standard deviations of the mean.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Normal Distribution Probabilities</figcaption><p></p>
<p><img src="https://courses.edx.org/assets/courseware/v1/28d10d22ba8b3bf4b0cc5024de0dc616/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-probs-combined.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The probability distribution function for the normal distribution is defined such that:</p>
<ul>
<li>About 68% of observations will be within one standard deviation of the mean(<span class="math inline">\mu\pm\sigma</span>). In standard units, this is equivalent to a z-score of <span class="math inline">|z|\leq2</span></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Probability of an observation within 1 SD of mean</figcaption><p></p>
<p><img src="https://courses.edx.org/assets/courseware/v1/f0bb9f66b7bdd91b2c9852c7a68427c7/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-1sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li>About 95% of observations will be within two standard seviations of the mean(<span class="math inline">\mu\pm2\sigma</span>). In standard units, this is equivalent to a z-sore of <span class="math inline">|z|\leq2</span>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Probability of an ovservation within 2 SD of mean</figcaption><p></p>
<p><img src="https://courses.edx.org/assets/courseware/v1/9686a507a97a536a1f5c6b6a01bd8154/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-2sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li>About 99.7% of observations will be within three standard deviations of the mean(<span class="math inline">\mu\pm3\sigma</span>). In standard units, this is equivalent to a z-score of <span class="math inline">|z|\leq3</span>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p></p><figcaption class="figure-caption">Probability of an observation within 3 SD of mean</figcaption><p></p>
<p><img src="https://courses.edx.org/assets/courseware/v1/a8af7c699c20d1e83819b5f68bf6f17d/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-3sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="the-normal-cdf-and-pnorm" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="the-normal-cdf-and-pnorm"><span class="header-section-number">2.9</span> The Normal CDF and pnorm</h2>
<section id="key-points-2" class="level3" data-number="2.9.1">
<h3 data-number="2.9.1" class="anchored" data-anchor-id="key-points-2"><span class="header-section-number">2.9.1</span> Key points:</h3>
<ul>
<li><p>The normal distribution has a mathematically defined CDF which can be computed in R with the function <code>pnorm</code>.</p></li>
<li><p><code>pnom(a, avg, s)</code> gives the value of the cumculative distribution function <em>F(a)</em> for the normal distribution defined by average <em>avg</em> and standard deviation <em>s</em>.</p></li>
<li><p>we say that a random quantity is normally distributed with average <em>avg</em> and standard deviation <em>s</em> if the approximate <em>pnorm(a, avg, s)</em> holds for all values of <em>a</em>.</p></li>
<li><p>If we are willing to use the normal approximation for height, we can estimate the distribution simply from the mean and standard deviation of our values.</p></li>
<li><p>If we treat the height data as discrete rather than categorical, we see that the data are not very useful because integer values are more common that expected due to rounding. This is called discretization.</p></li>
<li><p>With rounded data, the normal approximation is particularly useful when computing probabilities of intervals of length 1 that include exactly over integer.</p></li>
</ul>
</section>
<section id="code-using-pnorm-to-calculate-probabilities" class="level3" data-number="2.9.2">
<h3 data-number="2.9.2" class="anchored" data-anchor-id="code-using-pnorm-to-calculate-probabilities"><span class="header-section-number">2.9.2</span> Code: Using pnorm to calculate probabilities</h3>
<p>Given male heights x:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="fu">data</span>(<span class="st">"heights"</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a>x <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(sex<span class="sc">==</span><span class="st">"Male"</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>we can estimate the probability that a male is taller than 70.5 inches with:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">70.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="code-discretization-and-the-normal-approximation" class="level3" data-number="2.9.3">
<h3 data-number="2.9.3" class="anchored" data-anchor-id="code-discretization-and-the-normal-approximation"><span class="header-section-number">2.9.3</span> Code: Discretization and the normal approximation</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># plot distribution of exact heights in data</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">plot</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(x)), <span class="at">xlab =</span> <span class="st">"a = Height in inches"</span>, <span class="at">ylab =</span> <span class="st">"Pr(x = a)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># probabilities in actual data over length 1 ranges containing a integer</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">68.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">67.5</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">68.5</span>)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.5</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>)</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># probabilities in normal approximation match well</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="fu">pnorm</span>(<span class="fl">68.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">67.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="fu">pnorm</span>(<span class="fl">69.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">68.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="fu">pnorm</span>(<span class="fl">70.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">69.5</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span>
<span id="cb11-10"><a href="#cb11-10"></a></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co"># probabilities in actual data over other ranges don't match normal approx as well</span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.9</span>) <span class="sc">-</span> <span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">70.1</span>)</span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="fu">pnorm</span>(<span class="fl">70.9</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x)) <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fl">70.1</span>, <span class="fu">mean</span>(x), <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="definition-of-quantiles" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="definition-of-quantiles"><span class="header-section-number">2.10</span> Definition of quantiles</h2>
<section id="definition-of-quantiles-1" class="level3" data-number="2.10.1">
<h3 data-number="2.10.1" class="anchored" data-anchor-id="definition-of-quantiles-1"><span class="header-section-number">2.10.1</span> Definition of quantiles</h3>
<p><a href="https://www.youtube.com/watch?v=Ky7QeVgv-BA&amp;ab_channel=MarinStatsLectures-RProgramming%26Statistics">Quantiles</a> are cut off points that divide a dataset into intervals with set probability. The <em>qth</em> quantile is the value at which <em>q%</em> of the observation are <strong><em>equal to or less than that value</em></strong>.</p>
</section>
<section id="using-the-quantile-function" class="level3" data-number="2.10.2">
<h3 data-number="2.10.2" class="anchored" data-anchor-id="using-the-quantile-function"><span class="header-section-number">2.10.2</span> Using the quantile function</h3>
<p>Given a dataset <code>data</code> and desired quantile <code>q</code>, you can find the <code>q</code> the quantile of <code>data</code> with:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">quantile</span>(data,q)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="percentiles" class="level3" data-number="2.10.3">
<h3 data-number="2.10.3" class="anchored" data-anchor-id="percentiles"><span class="header-section-number">2.10.3</span> Percentiles</h3>
<p>Percentiles are the quantiles that divide a dataset into 100 intervals each with 1% probability. You can determine all percentiles of a dataset <code>data</code> like this:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.09</span>, <span class="fl">0.01</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">quantile</span>(data, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="quartiles" class="level3" data-number="2.10.4">
<h3 data-number="2.10.4" class="anchored" data-anchor-id="quartiles"><span class="header-section-number">2.10.4</span> Quartiles</h3>
<p>Quartiles divide a dataset into 4 parts each with 25% probability. They are equal to the 25th, 50th and 75th percentiles. The 25th percentile is also known as the <em>1st quartile</em>, the 50th percentile is also konwn as the median, and the 75th percentile is also knowns as the <em>3rd quartile</em>.</p>
<p>The <strong><em><code>summary()</code></em></strong> function returns the minimum, quartiles and maximum of a vector.</p>
</section>
<section id="examples" class="level3" data-number="2.10.5">
<h3 data-number="2.10.5" class="anchored" data-anchor-id="examples"><span class="header-section-number">2.10.5</span> Examples</h3>
<p>Load the heights dataset from the <em>dslabs</em> package:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">data</span>(<span class="st">"heights"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Use<code>summary</code>on the <code>heights$height</code> variable to find the quartiles:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">summary</span>(heights<span class="sc">$</span>height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  50.00   66.00   68.50   68.32   71.00   82.68 </code></pre>
</div>
</div>
<p>Find the percentiles of <code>height$height</code>:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a>percentiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(heights<span class="sc">$</span>height, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Confirm that the 25th and 75th percentiles match that 1st and 3rd quartiles. Note that <code>quantile()</code> returns a named vector. You can access the 25th and 75th percentiles like this (adapt the code for other percentile value):</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>percentiles[<span class="fu">names</span>(percentiles) <span class="sc">==</span> <span class="st">"25%"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>25% 
 66 </code></pre>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>percentiles[<span class="fu">names</span>(percentiles) <span class="sc">==</span> <span class="st">"75%"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>75% 
 71 </code></pre>
</div>
</div>
</section>
</section>
<section id="finding-quantile-with-qnorm" class="level2 page-columns page-full" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="finding-quantile-with-qnorm"><span class="header-section-number">2.11</span> Finding quantile with qnorm</h2>
<section id="definiton-of-qnorm" class="level3 page-columns page-full" data-number="2.11.1">
<h3 data-number="2.11.1" class="anchored" data-anchor-id="definiton-of-qnorm"><span class="header-section-number">2.11.1</span> Definiton of qnorm</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">简单来说,<a href="https://www.jianshu.com/p/a24eb1b94177"><strong><em><code>qnorm</code></em></strong></a>是正态分布<strong><em>累积分布函数(CDF)</em></strong>的反函数， 也就是说它可以视为<code>pnorm</code>的反函数, 这里<code>q</code>指的是quantile, 即分位数</span></div></div>
<p>The <a href="https://www.youtube.com/watch?v=X5NXDK6AVtU&amp;ab_channel=TheDataDigest"><code>qnorm()</code></a> function gives the theoretical value of a quantile with probability <code>p</code> of observing a value equal to or less than that quantile value a normal distribution with mean <code>mu</code> and standard deviation <code>sigma</code>:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">qnorm</span>(p, mu, sigma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong><em>By default, <code>mu</code>=0 and <code>sigma</code>=1</em></strong>. Therefore, calling <code>qnorm()</code> with no arguments gives quantiles for the standard normal distribution.</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">qnorm</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Recall that quantiles are defined such that <span class="math inline">p</span> is the probability of a random observation less than or equal to the quantile.</p>
</section>
<section id="realation-to-pnorm" class="level3" data-number="2.11.2">
<h3 data-number="2.11.2" class="anchored" data-anchor-id="realation-to-pnorm"><span class="header-section-number">2.11.2</span> Realation to pnorm</h3>
<p>The <code>pnorm()</code> function gives the probability that a value from a standard normal distribution will be less than or equal to a z-score value z. consider: <span class="math display">pnorm(-1.96)\approx0.025</span> The result of <code>pnorm()</code> is the quantile. Note that: <span class="math display">qnorm(0.025)\approx-1.96</span> <code>qnorm()</code> and <code>pnorm</code> are inverse functions: <span class="math display">pnorm(qnorm(0.025))\equiv0.025</span></p>
</section>
<section id="theoretical-quantiles" class="level3" data-number="2.11.3">
<h3 data-number="2.11.3" class="anchored" data-anchor-id="theoretical-quantiles"><span class="header-section-number">2.11.3</span> Theoretical quantiles</h3>
<p>You can use <code>qnorm()</code> to determine the theoretical quantiles of a dataset: that is, the theoretical value of quantiles assuming that a dataset follows a normal distribution. Run the <code>qnorm()</code> function with the desired probabilities <em>p</em>, mean mu and standard deviation sigma.</p>
<p>Suppose male heights follow a normal distribution with a mean of 69 inches and standard deviation of 3 inches. The theoretical quantiles are:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span>)</span>
<span id="cb24-2"><a href="#cb24-2"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p, <span class="dv">69</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Theoretical quantiles can be compared to sample quantiles determined with the quantile function in order to evaluate whether the sample follows a normal distribution.</p>
</section>
</section>
<section id="quantile-quantile-plots" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="quantile-quantile-plots"><span class="header-section-number">2.12</span> Quantile-Quantile Plots</h2>
<section id="key-points-3" class="level3" data-number="2.12.1">
<h3 data-number="2.12.1" class="anchored" data-anchor-id="key-points-3"><span class="header-section-number">2.12.1</span> Key Points:</h3>
<ul>
<li><p>Quantile-quantile plots, or QQ-plot, are used to check whether distributions are well-approximated by a normal distribution.</p></li>
<li><p>Given a proportion <em>p</em>, the quantile <em>q</em> is the value such that the proportion of values in the data blew <em>q</em> is <em>p</em>.</p></li>
<li><p>In a QQ-plot, the sample quantiles in the observed data are compared to the theoretical quantiles expected from the normal distribution. If the data are well-approximated by the normal distribution, then the points on the QQ-plot will fall near the identity line(sample = theoretical).</p></li>
<li><p>Calculate sample quantiles (observed quantiles) using the <code>quantile()</code> function.</p></li>
<li><p>Calculate theoretical quantiles with the <code>qnorm()</code> function. <code>qnorm()</code> will caculate quantiles for the standard normal distribution (<span class="math inline">\mu=0, \sigma=1</span>) by default, but it can calculate quantiles for any normal distribution given <code>mean()</code> and <code>sd()</code> arguments.</p></li>
</ul>
</section>
<section id="code-3" class="level3" data-number="2.12.2">
<h3 data-number="2.12.2" class="anchored" data-anchor-id="code-3"><span class="header-section-number">2.12.2</span> Code:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># define x and z</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="fu">data</span>(heights)</span>
<span id="cb25-5"><a href="#cb25-5"></a></span>
<span id="cb25-6"><a href="#cb25-6"></a>index <span class="ot">&lt;-</span> heights<span class="sc">$</span>sex<span class="sc">==</span><span class="st">"Male"</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>x <span class="ot">&lt;-</span> heights<span class="sc">$</span>height[index]</span>
<span id="cb25-8"><a href="#cb25-8"></a>z <span class="ot">&lt;-</span> <span class="fu">scale</span>(x)</span>
<span id="cb25-9"><a href="#cb25-9"></a></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="co"># proportion of data below 69.5</span></span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="fu">mean</span>(x <span class="sc">&lt;=</span> <span class="fl">69.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5147783</code></pre>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># calculate observed and theoretical quantiles</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>p <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>, <span class="fl">0.05</span>)</span>
<span id="cb27-3"><a href="#cb27-3"></a>observed_quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, p)</span>
<span id="cb27-4"><a href="#cb27-4"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p, <span class="at">mean =</span> <span class="fu">mean</span>(x), <span class="at">sd =</span> <span class="fu">sd</span>(x))</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co"># make QQ-plot</span></span>
<span id="cb27-7"><a href="#cb27-7"></a><span class="fu">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># make QQ-plot with scaled values</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>observed_quantiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(z, p)</span>
<span id="cb28-3"><a href="#cb28-3"></a>theoretical_quantiles <span class="ot">&lt;-</span> <span class="fu">qnorm</span>(p)</span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="fu">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="percentiles-1" class="level2" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="percentiles-1"><span class="header-section-number">2.13</span> Percentiles</h2>
<section id="key-points-4" class="level3" data-number="2.13.1">
<h3 data-number="2.13.1" class="anchored" data-anchor-id="key-points-4"><span class="header-section-number">2.13.1</span> Key Points:</h3>
<ul>
<li><p>Percentiles are the quantiles obtained when defining <span class="math inline">p</span> as 0.01, 0.02,…,0.99. They summarize the values at which a certain percent of the observations are equal to or less than that value.</p></li>
<li><p>The 50th percentile is also known as the median.</p></li>
<li><p>The quartiles are the 25th, 50th and 75th percentiles.</p></li>
</ul>
</section>
</section>
<section id="boxplots" class="level2 page-columns page-full" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="boxplots"><span class="header-section-number">2.14</span> Boxplots</h2>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R语言如何绘制<a href="https://zhuanlan.zhihu.com/p/440914623">箱线图</a></span></div></div>
<section id="key-points-5" class="level3" data-number="2.14.1">
<h3 data-number="2.14.1" class="anchored" data-anchor-id="key-points-5"><span class="header-section-number">2.14.1</span> Key Points:</h3>
<ul>
<li><p>When data do not follow a normal distribution and cannot be succinctly summarized by only the mean and standard deviation, an alternative is to report a five-number summary: range (ignoring outliers) and the quartiles (25th, 50th, 75th percentile).</p></li>
<li><p>In a <a href="https://www.youtube.com/watch?v=INSIyaZUXIY&amp;ab_channel=DATAtab">boxplot</a>, the box is defined by the <em>25th</em> and <em>75th</em> percentiles and the <em>median</em> is <strong><em>a horizontal line through the box</em></strong>. The <em>whiskers</em> show <strong><em>the range excluding outliers</em></strong>, and outliers are plotted separately as individual points.</p></li>
<li><p>The <em>interquartile range</em> is the distance between the 25th and 75th percentiles.</p></li>
<li><p>Boxplots are particularly useful when comparing <em>multiple distributions</em>.</p></li>
</ul>
</section>
</section>
<section id="distribution-of-female-heights" class="level2" data-number="2.15">
<h2 data-number="2.15" class="anchored" data-anchor-id="distribution-of-female-heights"><span class="header-section-number">2.15</span> Distribution of Female Heights</h2>
<section id="key-points-6" class="level3" data-number="2.15.1">
<h3 data-number="2.15.1" class="anchored" data-anchor-id="key-points-6"><span class="header-section-number">2.15.1</span> Key Points:</h3>
<ul>
<li><p>If a distribution is not normal, it cannot be summarized with only the mean and standard seviation. Provide a histogram, smooth density or boxplot instead.</p></li>
<li><p>A plot can force us to see unexpected results that make us question the quality or implication of our data.</p></li>
</ul>
</section>
</section>
</section>
<section id="introduction-to-ggplot2" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Introduction to ggplot2</h1>
<section id="overview-1" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="overview-1"><span class="header-section-number">3.1</span> Overview</h2>
<p>After completing ggplot2, we will:</p>
<ul>
<li><p>be able to use ggplot2 to create data visualizations in R.</p></li>
<li><p>be able to explain what the data component of a graph is.</p></li>
<li><p>be able to identify the geometry component of a graph and know when to use which type of geometry. be able to explain what the aesthetic mapping component of a graph is.</p></li>
<li><p>be able to understand the scale component of a graph and select an appropriate scale component to use.</p></li>
</ul>
</section>
<section id="ggplot" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="ggplot"><span class="header-section-number">3.2</span> ggplot</h2>
<section id="ggplot2" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="ggplot2"><span class="header-section-number">3.2.1</span> ggplot2</h3>
<ul>
<li><p><a href="https://datacarpentry.org/R-ecology-lesson/04-visualization-ggplot2.html">Data visualization with ggolot2</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf">Data visualization with ggplot2: Cheat Sheet</a></p></li>
<li><p><a href="https://r-graph-gallery.com/index.html">The R graph gallery example</a></p></li>
</ul>
</section>
<section id="key-points-7" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="key-points-7"><span class="header-section-number">3.2.2</span> key Points:</h3>
<ul>
<li><p>Throughout the series, we will create plots with the ggplot2 package. <strong>ggplot2</strong> is part of the <strong>tidyverse</strong> suite of package, which you can load with <strong><code>library(tidyverse)</code></strong>.</p></li>
<li><p>Note that you can also load <strong>ggplot2</strong> alone using the command <strong><code>library(ggplot2)</code></strong>, instead of loading the entire tidyverse.</p></li>
<li><p><strong>ggplot2</strong> uses a <strong>grammar of graphics</strong> to break plots into building blocks that have intuitive syntax, making it easy to create relatively complex and aesthetically pleasing plots with relatively simple and readable code.</p></li>
<li><p><strong>ggplot2</strong> is designed to work excusively with tidy data (<strong>rows are observations and columns are variables</strong>).</p></li>
</ul>
</section>
</section>
<section id="graph-components" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="graph-components"><span class="header-section-number">3.3</span> Graph Components</h2>
<section id="key-points-8" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="key-points-8"><span class="header-section-number">3.3.1</span> Key Points:</h3>
<ul>
<li>Plots in <strong>ggplot2</strong> consist of 3 main components:
<ul>
<li><strong>Data</strong>: The dataset being summarized</li>
<li><strong>Geometry</strong>: The type of plot(scatterplot, boxplot, barplot, histogram, qqplot, smooth desity, etc.)</li>
<li><strong>Aesthetic mapping</strong>: Variable mapped to visual cues, such as x-axis and y-axis values and color.</li>
</ul></li>
</ul>
</section>
<section id="code-4" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="code-4"><span class="header-section-number">3.3.2</span> Code:</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="fu">data</span>(murders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="creating-a-new-plot" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="creating-a-new-plot"><span class="header-section-number">3.4</span> Creating a New Plot</h2>
<section id="key-points-9" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="key-points-9"><span class="header-section-number">3.4.1</span> Key Points:</h3>
<ul>
<li><p>You can associated a dataset <code>x</code> with a ggplot object with any of the 3 commands:</p>
<ul>
<li><strong><code>ggplot(data = x)</code></strong></li>
<li><strong><code>ggplot(x)</code></strong></li>
<li><strong><code>x %&gt;% ggplot()</code></strong></li>
</ul></li>
<li><p>You can assign a ggplot object to a variable. If the object is not assigned to a variable, it will automatically be displayed.</p></li>
<li><p>You can display a ggplot object assigned to a variable by printing that variable.</p></li>
</ul>
<p>Code:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="fu">data</span>(murders)</span>
<span id="cb30-4"><a href="#cb30-4"></a></span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb30-6"><a href="#cb30-6"></a></span>
<span id="cb30-7"><a href="#cb30-7"></a>murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>()</span>
<span id="cb30-8"><a href="#cb30-8"></a></span>
<span id="cb30-9"><a href="#cb30-9"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb30-10"><a href="#cb30-10"></a></span>
<span id="cb30-11"><a href="#cb30-11"></a><span class="fu">class</span>(p)</span>
<span id="cb30-12"><a href="#cb30-12"></a></span>
<span id="cb30-13"><a href="#cb30-13"></a><span class="fu">print</span>(p) <span class="co"># this is equivalent to simply typing p</span></span>
<span id="cb30-14"><a href="#cb30-14"></a>p </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="layers" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="layers"><span class="header-section-number">3.5</span> Layers</h2>
<section id="key-points-10" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="key-points-10"><span class="header-section-number">3.5.1</span> Key Points:</h3>
<ul>
<li><p>In <strong>ggplot2</strong>, graphs are created by adding layers to the ggplot object: DATA %&gt;% ggplot() + LAYER_1 + LAYER_2 + … + LAYER_N</p></li>
<li><p>The <strong><em>geometry layer</em></strong> defines that plot type and takes the format <code>geom_x</code> where <code>x</code> is the plot type.</p></li>
<li><p><strong><em>Aesthetic mappings</em></strong> describe how properties of <strong>the data connect with features of the graph</strong> (axis position, color, size, etc.) define aesthetic mapping with <code>aes()</code> function.</p></li>
<li><p><strong><code>aes()</code></strong> uses variable names from the object component (for example, <strong><code>total</code></strong> rather than <strong><code>murders$total</code></strong>).</p></li>
<li><p><strong><code>geom_point()</code></strong> creates a scatterplot and requires <code>x</code> and <code>y</code> aesthetic mappings.</p></li>
<li><p><strong><code>geom_text()</code></strong> and <strong><code>geom_label</code></strong> add text to a scatterplot and require <code>x</code>, <code>y</code>, and <code>label</code> aesthetic mappings.</p></li>
<li><p>To determine which aesthetic mappings are required for a geometry, read the help file for that geometry.</p></li>
<li><p>You can add layers with different aesthetic mappings to the same graph.</p></li>
</ul>
<p>Code: Adding layers to a plot</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="fu">data</span>(murders)</span>
<span id="cb31-4"><a href="#cb31-4"></a></span>
<span id="cb31-5"><a href="#cb31-5"></a>murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, <span class="at">y =</span> total))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># add points layer to predefined ggplot object</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> murders)</span>
<span id="cb32-3"><a href="#cb32-3"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># add text layer to scatterplot</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Code: Example of <code>aes</code> behavior</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># no error from this call</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>p_test <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">lable =</span> abb))</span>
<span id="cb34-3"><a href="#cb34-3"></a></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="co"># error - "abb" is not a globally defined variable and cannot be found outside of aes</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>p_test <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">label =</span> abb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="thinkering" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="thinkering"><span class="header-section-number">3.6</span> Thinkering</h2>
<section id="key-points-11" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="key-points-11"><span class="header-section-number">3.6.1</span> Key Points:</h3>
<ul>
<li><p>You can modify arguments to geometry functions others than <code>aes()</code> and the data.</p></li>
<li><p>These arguments are not aesthetic mappings: the affect all data points the same way.</p></li>
<li><p><strong><em>Global aesthetic mappings</em></strong> apply to all geometries and can be defined when you initially call <code>ggplot()</code>. All the geometries added as layers will default to this mapping. Local aesthetic mapping add additional information or override the default mappings.</p></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<strong>Nudge</strong> points a fixed distance
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html?q=nudge#null"><code>position_nudge(x = 0, y = 0)</code></a> is generally useful for adjusting the position of items on discrete scales by a small amount. Nudging is built in to <strong><code>geom_text()</code></strong> because it’s so useful for moving labels a small distance from what they’re labeling.</p>
</div>
</div>
<p>Code:</p>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># change the size of the points</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># move text labels slightly to the right</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb), <span class="at">nudge_x =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># simplify code by adding global aesthetic</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span>
<span id="cb37-3"><a href="#cb37-3"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="#cb37-4"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># local aesthetics override global aesthetics</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">10</span>, <span class="at">y =</span> <span class="dv">800</span>, <span class="at">label =</span> <span class="st">"Hello there!"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-27-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="scales-labels-and-colors" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="scales-labels-and-colors"><span class="header-section-number">3.7</span> Scales, Labels, and Colors</h2>
<section id="textbook-links" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="textbook-links"><span class="header-section-number">3.7.1</span> Textbook links:</h3>
<ul>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#scales">Textbook section on <strong>scales</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#labels-and-titles">Textbook section on <strong>labels and titles</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#categories-as-colors">Textbook section on <strong>categories as colors</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#annotation-shapes-and-adjustments">Textbook section on <strong>annotation, shapes and adjustments</strong></a></p></li>
</ul>
</section>
<section id="key-points-12" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="key-points-12"><span class="header-section-number">3.7.2</span> Key Points:</h3>
<ul>
<li><p>Convert the x-axis to log scale with <strong><code>scale_x_continuous(trans = "log10")</code></strong> or <strong><code>scale_x_log10()</code></strong>. Similar function exist for the y-axis.</p></li>
<li><p><strong>Add axis title</strong> with <strong><code>xlab()</code></strong> and <strong><code>ylab()</code></strong> function. <strong>Add a plot title</strong> with the <strong><code>ggtitle()</code></strong> function.</p></li>
<li><p><strong>Add a color mapping</strong> that colors points by a varaibale by defining <strong><code>col</code></strong> argument <strong>within <code>aes()</code></strong>. To color all pints the same way, define <strong><code>col</code></strong> outside of <strong><code>aes()</code></strong>.</p></li>
<li><p><strong>Add a line</strong> with the <strong><code>geom_abline()</code></strong> geometry. <strong><code>geom_abline()</code></strong> takes arguments <strong><code>slop</code></strong> (default = 1) and <strong><code>intercept</code></strong>(default = 0). Change the color with <strong><code>col</code></strong> or <strong><code>color</code></strong> and line type with <a href="https://r-charts.com/base-r/line-types/"><strong><code>lty</code></strong></a>.</p></li>
<li><p>Placing the line layer after the point layer will overlay the the line on top of the points. To overlay points on the line, <strong>place the line layer before the point layer</strong>.</p></li>
<li><p>There are many additional ways to tweak your graph that can be found in the <strong>ggplot2</strong> documentation, cheat sheet or on the internet. For example, you can change the legend title with <a href="https://www.jianshu.com/p/6ba336b3931f"><strong><code>scale_color_discrete</code></strong></a>.</p></li>
</ul>
</section>
<section id="code-log-scale-the-x-axis-and-y-axis" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3" class="anchored" data-anchor-id="code-log-scale-the-x-axis-and-y-axis"><span class="header-section-number">3.7.3</span> Code: Log-scale the x-axis and y-axis</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># define p</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="fu">library</span>(dslabs)</span>
<span id="cb39-4"><a href="#cb39-4"></a><span class="fu">data</span>(murders)</span>
<span id="cb39-5"><a href="#cb39-5"></a></span>
<span id="cb39-6"><a href="#cb39-6"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb))</span>
<span id="cb39-7"><a href="#cb39-7"></a></span>
<span id="cb39-8"><a href="#cb39-8"></a><span class="co"># log base 10 scale the x-axis and y-axis</span></span>
<span id="cb39-9"><a href="#cb39-9"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb39-10"><a href="#cb39-10"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>) <span class="sc">+</span></span>
<span id="cb39-12"><a href="#cb39-12"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">trans =</span> <span class="st">"log10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co"># efficient log scaling of the axes</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb40-4"><a href="#cb40-4"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>    <span class="fu">scale_y_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="code-add-labels-and-title" class="level3" data-number="3.7.4">
<h3 data-number="3.7.4" class="anchored" data-anchor-id="code-add-labels-and-title"><span class="header-section-number">3.7.4</span> Code: Add labels and title</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>    <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb41-4"><a href="#cb41-4"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>    <span class="fu">xlab</span>(<span class="st">"Population in million(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb41-6"><a href="#cb41-6"></a>    <span class="fu">ylab</span>(<span class="st">"Total number of murders(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb41-7"><a href="#cb41-7"></a>    <span class="fu">ggtitle</span>(<span class="st">"US Gun Murders in 2010"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="code-change-color-of-the-points" class="level3" data-number="3.7.5">
<h3 data-number="3.7.5" class="anchored" data-anchor-id="code-change-color-of-the-points"><span class="header-section-number">3.7.5</span> Code: Change color of the points</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># redefine p to be everything except the points layer</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>p <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3"></a>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(population<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>, total, <span class="at">label =</span> abb)) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>     <span class="fu">geom_text</span>(<span class="at">nudge_x =</span> <span class="fl">0.075</span>) <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>     <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb42-6"><a href="#cb42-6"></a>     <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>     <span class="fu">xlab</span>(<span class="st">"Population in million(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8"></a>     <span class="fu">ylab</span>(<span class="st">"Total number of murders(log scale)"</span>) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>     <span class="fu">ggtitle</span>(<span class="st">"US Gun Murders in 2010"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># make all points blue</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># color points by region</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="code-add-a-line-with-average-murder-rate" class="level3" data-number="3.7.6">
<h3 data-number="3.7.6" class="anchored" data-anchor-id="code-add-a-line-with-average-murder-rate"><span class="header-section-number">3.7.6</span> Code: Add a line with average murder rate</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>r <span class="ot">&lt;-</span> murders <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2"></a>     <span class="fu">summarize</span>(<span class="at">rate =</span> <span class="fu">sum</span>(total) <span class="sc">/</span> <span class="fu">sum</span>(population) <span class="sc">*</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>) <span class="sc">%&gt;%</span>      <span class="fu">pull</span>(rate)</span>
<span id="cb45-3"><a href="#cb45-3"></a></span>
<span id="cb45-4"><a href="#cb45-4"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>         <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fu">log10</span>(r)) <span class="co"># slop is default of 1</span></span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a><span class="co"># change line to dashed and dark grey, line under points</span></span>
<span id="cb45-8"><a href="#cb45-8"></a>p <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="fu">log</span>(r), <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"darkgrey"</span>) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> region), <span class="at">size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="code-change-legend-title" class="level3" data-number="3.7.7">
<h3 data-number="3.7.7" class="anchored" data-anchor-id="code-change-legend-title"><span class="header-section-number">3.7.7</span> Code: Change legend title</h3>
<div class="cell">
<details>
<summary>show the code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># capitalize legend title</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">"Region"</span>)</span>
<span id="cb46-3"><a href="#cb46-3"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Data-visualization_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp(/^(?:http:|https:)\/\/ningli\.quarto\.pub\/custom/);
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© 2022 Stats &amp; R™ made with❤️ by <a href="who.qmd">NING</a></div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:ln729500172@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ningli3739">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/NING3739">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>