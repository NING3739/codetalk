<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Stats &amp; R</title>
<link>https://stats-r.com/series.html</link>
<atom:link href="https://stats-r.com/series.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.2.313</generator>
<lastBuildDate>Tue, 06 Dec 2022 11:00:00 GMT</lastBuildDate>
<item>
  <title>Probability</title>
  <link>https://stats-r.com/series/Probability/about.html</link>
  <description><![CDATA[ 






 ]]></description>
  <category>Data Science</category>
  <category>Probability</category>
  <guid>https://stats-r.com/series/Probability/about.html</guid>
  <pubDate>Tue, 06 Dec 2022 11:00:00 GMT</pubDate>
  <media:content url="https://images.unsplash.com/photo-1609017909889-d7b582c072f7?ixlib=rb-1.2.1&amp;q=80&amp;cs=tinysrgb&amp;fm=jpg&amp;crop=entropy&amp;w=3600" medium="image"/>
</item>
<item>
  <title>Data Visualization</title>
  <link>https://stats-r.com/series/Data Visualization/about.html</link>
  <description><![CDATA[ <section id="welcome" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Welcome!</h1>
<section id="what-is-data-visualization" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="what-is-data-visualization">
<span class="header-section-number">1.1</span> What is data visualization?</h2>
<p>Data visualization is the graphical representation of information and data. By using visual elements like charts, graphs, and maps, data visualization tools provide an accessible way to see and understand trends, outliers, and patterns in data. Additionally, it provides an excellent way for employees or business owners to present data to non-technical audiences without confusion.</p>
<p>In the world of Big Data, data visualization tools and technologies are essential to analyze massive amounts of information and make data-driven decisions.</p>
</section></section><section id="introduction-to-data-visualization-and-distributions" class="level1 page-columns page-full" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Introduction to Data Visualization and Distributions</h1>
<section id="overview" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="overview">
<span class="header-section-number">2.1</span> Overview</h2>
<p>After completing this section, we will:</p>
<ul>
<li><p>understand the importance of data visualization for communicating data-driven findings.</p></li>
<li><p>be able to use distributions to summarize data.</p></li>
<li><p>be able to use the average and the standard deviation to understand the normal distribution</p></li>
<li><p>be able to access how well a normal distribution fit the data using a quantile-quantile plot.</p></li>
<li><p>be able to interpret data from a box plot</p></li>
</ul></section><section id="introduction-to-data-visualization" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="introduction-to-data-visualization">
<span class="header-section-number">2.2</span> Introduction to Data Visualization</h2>
<section id="key-point" class="level3" data-number="2.2.1"><h3 data-number="2.2.1" class="anchored" data-anchor-id="key-point">
<span class="header-section-number">2.2.1</span> Key Point:</h3>
<ul>
<li><p>Plots of data easily communicate information that is difficult to extract from table of raw values.</p></li>
<li><p>Data visualization is a key component of exploratory data analysis (EDA), in which the properties of data are explored through visualization and summarization techniques.</p></li>
<li><p>Data visualization can help discover biases, systematic errors, mistakes and other unexpected problems in data before those data are incorporated into potentially flawed analysis.</p></li>
<li><p>Basics of data visualization and EDA will be covered in R by using the ggplot2 package and motivating examples from world health, economics and infections disease.</p></li>
</ul></section><section id="code" class="level3" data-number="2.2.2"><h3 data-number="2.2.2" class="anchored" data-anchor-id="code">
<span class="header-section-number">2.2.2</span> Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">head</span>(murders)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       state abb region population total
1    Alabama  AL  South    4779736   135
2     Alaska  AK   West     710231    19
3    Arizona  AZ   West    6392017   232
4   Arkansas  AR  South    2915918    93
5 California  CA   West   37253956  1257
6   Colorado  CO   West    5029196    65</code></pre>
</div>
</div>
</section></section><section id="introduction-to-distributions" class="level2 page-columns page-full" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="introduction-to-distributions">
<span class="header-section-number">2.3</span> Introduction to Distributions</h2>
<section id="key-points" class="level3 page-columns page-full" data-number="2.3.1"><h3 data-number="2.3.1" class="anchored" data-anchor-id="key-points">
<span class="header-section-number">2.3.1</span> Key Points:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><a href="https://baike.baidu.com/item/%E6%96%B9%E5%B7%AE/3108412">(<strong>Variance/Deviation Var</strong>)方差</a>: 方差越大，数据的波动越大；方差越小，数据的波动就越小。</span></div></div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><a href="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%B7%AE/1415772">(<strong>Standard Deviation</strong>)标准差</a>: 方差开根号。</span></div></div>
<ul>
<li><p>The most basic statistical summary of a list of object is its distribution.</p></li>
<li><p>We will learn ways to visualize and analyze distributions in the upcoming videos.</p></li>
<li><p>In some cases, data can be summarized by two-number summary: the average and standard deviation.I will learn to use data visualization to determine when that is appropriate.</p></li>
</ul></section><section id="data-types" class="level3" data-number="2.3.2"><h3 data-number="2.3.2" class="anchored" data-anchor-id="data-types">
<span class="header-section-number">2.3.2</span> Data Types</h3>
<p>In R, there are <a href="https://www.programiz.com/r/data-types">6 basic data types</a>:</p>
<ul>
<li><p><code>logical</code></p></li>
<li><p><code>numeric</code></p></li>
<li><p><code>integer</code></p></li>
<li><p><code>complex</code></p></li>
<li><p><code>character</code></p></li>
<li><p><code>raw</code></p></li>
</ul>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Categorical data are variables that are defined by a small number of groups.</p>
<ul>
<li><p>Ordinal categorical data have an inherent order to the categories (mild/medium/hot, for example).</p></li>
<li><p>Non-ordinal categorical data have no order to the categories.</p></li>
</ul>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Numerical data take a variety of numeric values.</p>
<ul>
<li><p>Continuous variables can take any value.</p></li>
<li><p>Discrete variables are limited to sets of specific values.</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p>
<pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">flowchart LR
  A[Main variable types] --&gt; B{Catrgorical}
  A[Main variable types] --&gt; C{Numeric}
  B{Catrgorical} --&gt; D[ordinal]
  B{Catrgorical} --&gt; E[non-ordinal]
  C{Numeric} --&gt; F[continuous]
  C{Numeric} --&gt; G[discrete]
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>

</div>
</div>
</div>
</section><section id="exercise" class="level3" data-number="2.3.3"><h3 data-number="2.3.3" class="anchored" data-anchor-id="exercise">
<span class="header-section-number">2.3.3</span> Exercise</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;"># extract the variable names from a dataset</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;">names</span>(x)</span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;"># explore how many unique values are used in dataset</span></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;">unique</span>(x)</span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;"># determine how many variable were reported</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;">length</span>(x)</span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;"># determine how many unique variable were reported</span></span>
<span id="cb3-8"><span class="fu" style="color: #4758AB;">length</span>(<span class="fu" style="color: #4758AB;">unique</span>(x))</span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;"># to compute the frequencies of each unique value</span></span>
<span id="cb3-10"><span class="fu" style="color: #4758AB;">table</span>(x)</span></code></pre></div>
</div>
</section></section><section id="describe-heights-to-et" class="level2 page-columns page-full" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="describe-heights-to-et">
<span class="header-section-number">2.4</span> Describe Heights to ET</h2>
<section id="key-point-1" class="level3" data-number="2.4.1"><h3 data-number="2.4.1" class="anchored" data-anchor-id="key-point-1">
<span class="header-section-number">2.4.1</span> key point:</h3>
<ul>
<li>A distribution is a function or description that shows the possible values of a variable and how often those values occur.</li>
<li>For categorical variables, the distribution describes the proportions of each category.</li>
<li>A <em>frequency table</em> is the simplest way to show a categorical distribution. Use <code><a href="https://rdrr.io/r/base/proportions.html">prop.table()</a></code> to convert a table of counts to a frequency table. <em>Barplots</em> display the distribution of categorical variables and are a way to visualize the information in frequency tables.</li>
<li>For continuous numerical data, reporting the frequency of each unique entry is not an effective summary as many or most values are unique. Instead, a distribution function is required.</li>
<li>The <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function"><em>cumulative distribution function (CDF)</em></a> is a function that reports the proportion of data below a value <img src="https://latex.codecogs.com/png.latex?a"> for all values of <img src="https://latex.codecogs.com/png.latex?a"> :<img src="https://latex.codecogs.com/png.latex?F(a)=Pr(x%E2%89%A4a)">.</li>
<li>The proportion of observations between any two values <img src="https://latex.codecogs.com/png.latex?a"> and <img src="https://latex.codecogs.com/png.latex?b"> can be computed from the CDF as <img src="https://latex.codecogs.com/png.latex?F(b)-F(a)">.</li>
<li>A <em>histogram</em> divides data into non-overlapping bins of the same size and plots the counts of number of values that fall in that interval.</li>
</ul></section><section id="code-1" class="level3 page-columns page-full" data-number="2.4.2"><h3 data-number="2.4.2" class="anchored" data-anchor-id="code-1">
<span class="header-section-number">2.4.2</span> Code:</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R 语言学习 - <a href="https://blog.csdn.net/wlt9037/article/details/76570155" title="table()结果提取"><code>table()</code></a> 结果提取.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;"># load the dataset</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;">data</span>(heights)</span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;"># make a table of category proportions</span></span>
<span id="cb4-5"><span class="fu" style="color: #4758AB;">prop.table</span>(<span class="fu" style="color: #4758AB;">table</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>sex))</span></code></pre></div>
</div>
</section></section><section id="cumulative-distribution-function" class="level2 page-columns page-full" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="cumulative-distribution-function">
<span class="header-section-number">2.5</span> Cumulative Distribution Function</h2>
<p>Every <em>continuous distribution</em> has <em>cumulative distribution function (CDF)</em>. The CDF defines the proportion of the data below a given value for all values of <img src="https://latex.codecogs.com/png.latex?a"> :</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p></p><figcaption class="figure-caption">Cumulative Distribution Function (CDF)</figcaption><p></p>
<p><img src="https://stats-r.com/series/Data Visualization/https:/rafalab.dfci.harvard.edu/dsbook/book_files/figure-html/ecdf-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>As defined above, this plot of the CDF for male heights has height value <em>a</em> on the x-axis and the proportion of student with heights of that value or lower(<em>F(</em>a<em>)</em>) on the y-axis.</p>
<p>The CDF is essential for calculating probabilities related to continuous data. In a continuous dataset, the probability of a specific exact value is not informative because most entries are unique. For example, in the student heights data, only one individual reported a height of 68.8976377952726 inches, but many students rounded similar heights to 69 inches. If we computed exact value probabilities, we would find that being exactly 69 inches is much more likely than being a non-integer exact height, which does not match our understanding that height is continuous. We can instead use the CDF to obtain a useful summary, such as the probability that a student is between 68.5 and 69.5 inches.</p>
<p>For datasets that are not normal, the CDF can be calculated manually by defining a function to compute the probability above. This function can then be applied to a range of values across the range of the dataset to calculate a CDF. Given a dataset<code>my_data</code>, the CDF can be calculated and plotted like this:</p>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R语言中的<a href="https://www.jianshu.com/p/59fb24ca2ea7">[<code>apply()</code>]，[<code>lapply()</code>]，[<code>sapply()</code>]，<code>tapply()</code></a>函数以及示例</span></div></div>
<section id="code-for-cdf" class="level3" data-number="2.5.1"><h3 data-number="2.5.1" class="anchored" data-anchor-id="code-for-cdf">
<span class="header-section-number">2.5.1</span> Code for CDF:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># Cumulative Distribution Function </span></span>
<span id="cb5-2">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fu" style="color: #4758AB;">min</span>(x), <span class="fu" style="color: #4758AB;">max</span>(x), length) <span class="co" style="color: #5E5E5E;"># define range of the values</span></span>
<span id="cb5-3">cdf_function <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x) {</span>
<span id="cb5-4">    <span class="fu" style="color: #4758AB;">mean</span>(my_data <span class="sc" style="color: #5E5E5E;">&lt;=</span> x)</span>
<span id="cb5-5">}</span>
<span id="cb5-6">cdf_values <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sapply</span>(a, cdf_function)</span>
<span id="cb5-7"><span class="fu" style="color: #4758AB;">plot</span>(a, cdf_values)</span></code></pre></div>
</div>
</section><section id="code-for-student-height" class="level3" data-number="2.5.2"><h3 data-number="2.5.2" class="anchored" data-anchor-id="code-for-student-height">
<span class="header-section-number">2.5.2</span> Code for student height:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># example for student heights</span></span>
<span id="cb6-2">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fu" style="color: #4758AB;">min</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>height), <span class="fu" style="color: #4758AB;">max</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>height), <span class="at" style="color: #657422;">length =</span> <span class="dv" style="color: #AD0000;">100</span>)</span>
<span id="cb6-3">cdf_function <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x){</span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;">mean</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>height <span class="sc" style="color: #5E5E5E;">&lt;=</span> x)</span>
<span id="cb6-5">}</span>
<span id="cb6-6">cdf_value <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sapply</span>(a, cdf_function)</span>
<span id="cb6-7"><span class="fu" style="color: #4758AB;">plot</span>(a, cdf_value)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The CDF defines that proportion of data below a cut-off <img src="https://latex.codecogs.com/png.latex?a">. To define the proportion of values above <img src="https://latex.codecogs.com/png.latex?a">, we compute: <img src="https://latex.codecogs.com/png.latex?1-F(a)"></p>
<p>To define the proportion of values between <img src="https://latex.codecogs.com/png.latex?a"> and <img src="https://latex.codecogs.com/png.latex?b">, we compute: <img src="https://latex.codecogs.com/png.latex?F(b)-F(a)"></p>
<p>Note that the CDF can help compute probabilities. The probability of observing a randomly chosen value between <img src="https://latex.codecogs.com/png.latex?a"> and <img src="https://latex.codecogs.com/png.latex?b"> is equal to the proportion of values between <img src="https://latex.codecogs.com/png.latex?a"> and <img src="https://latex.codecogs.com/png.latex?b">, which we compute with the CDF.</p>
</section></section><section id="smooth-density-plots" class="level2" data-number="2.6"><h2 data-number="2.6" class="anchored" data-anchor-id="smooth-density-plots">
<span class="header-section-number">2.6</span> Smooth Density Plots</h2>
<section id="key-point-2" class="level3" data-number="2.6.1"><h3 data-number="2.6.1" class="anchored" data-anchor-id="key-point-2">
<span class="header-section-number">2.6.1</span> Key Point:</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
A further note on histograms
</div>
</div>
<div class="callout-body-container callout-body">
<p>The choice of binwidth has a determinative effect on sharp. There is no “correct” choice for binwidth, and you can sometimes gain insights into the data by experimenting with binwidths.</p>
</div>
</div>
<ul>
<li><p><em>Smooth density plots</em> can be thought of as <strong><em>histograms where the binwidth is extremely or infinitely small</em></strong>. The smoothing function makes estimates of the true continuous trend of the data given the available sample of data points.</p></li>
<li><p>The degree of smoothness can be controlled by an argument in the plotting function.</p></li>
<li><p>While the histogram is an assumption-free summary, the smooth density plot is shaped by assumptions and choices you make as a data analyst.</p></li>
<li><p><strong><em>The y-axis is scaled so that the area under the density curve sums to 1.</em></strong> <!--#这是因为Y轴表示的是区间内的变量占总体的比重。 所有区间相加等于1。-->This means that interpreting value on the y-axis is not straightforward. To determine the proportion of data in between two values, compute the area under the smooth density curve in the region between those values.</p></li>
<li><p>An advantage of smooth densities over histograms is that <strong><em>densities are easier to compare visually</em></strong>.</p></li>
</ul></section></section><section id="normal-distribution" class="level2" data-number="2.7"><h2 data-number="2.7" class="anchored" data-anchor-id="normal-distribution">
<span class="header-section-number">2.7</span> Normal Distribution</h2>
<section id="key-points-1" class="level3" data-number="2.7.1"><h3 data-number="2.7.1" class="anchored" data-anchor-id="key-points-1">
<span class="header-section-number">2.7.1</span> Key Points:</h3>
<ul>
<li>
<p><a href="https://www.youtube.com/watch?v=xI9ZHGOSaCg&amp;ab_channel=AceTutors">The normal distribution</a>:</p>
<ul>
<li>is <strong><em>centered around</em></strong> one value, the <strong><em>mean</em></strong>
</li>
<li>is <strong><em>symmetric(对称)</em></strong> around the mean.</li>
<li>is defined completely by its <strong><em>mean(</em></strong><img src="https://latex.codecogs.com/png.latex?%5Cmu"><strong>)</strong> and <strong><em>standard deviation(</em></strong><img src="https://latex.codecogs.com/png.latex?%5Csigma"><strong>)</strong>
</li>
<li>
<strong><em>Always has the same proportion</em></strong> of observations <strong><em>within a given distance</em></strong> of the mean (for example, 95% with 2<img src="https://latex.codecogs.com/png.latex?%5Csigma">)</li>
</ul>
</li>
<li><p>The standard deviation is the <strong><em>average distance between a value and the mean value</em></strong>.</p></li>
<li><p>Calculate the mean using the <strong><em><code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code></em></strong> function.</p></li>
<li><p>Calculate the standard deviation using the <strong><em><code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code></em></strong> function or manually.</p></li>
<li>
<p><strong><em>Standard units</em></strong> describe how many standard deviations a value is away from the mean. The z-score, or number of standard deviation an observation is away from the mean <img src="https://latex.codecogs.com/png.latex?%5Cmu">:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20z%20=%20(x-%5Cmu)/%5Csigma%0A%20%20"></p>
</li>
<li><p>Computer standard units with the <code><a href="https://rdrr.io/r/base/scale.html">scale()</a></code> function.</p></li>
<li><p><strong><em>Important:</em></strong> to calculate the proportion of value that meet a certain condition, use the <code>mean</code> function on a logical vector. Because <code>TRUE</code> is converted to 1 and <code>FALSE</code> is converted to 0, taking the mean of this vector yields the proportion of <code>TURE</code>.</p></li>
</ul></section></section><section id="equation-for-the-normal-distribution" class="level2 page-columns page-full" data-number="2.8"><h2 data-number="2.8" class="anchored" data-anchor-id="equation-for-the-normal-distribution">
<span class="header-section-number">2.8</span> Equation for the normal distribution</h2>
<p>The normal distribution is mathematically defined by the following formula for any mean <img src="https://latex.codecogs.com/png.latex?%5Cmu"> and standard deviation <img src="https://latex.codecogs.com/png.latex?%5Csigma">:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0APr(a%20%3C%20x%20%3C%20b)%20=%20%5Cint_%7Ba%7D%5Eb%5Cfrac%7B1%7D%7B%5Csqrt%7B2%5Cpi%5Cmu%7D%7D%7Be%7D%5E%7B-%5Cfrac%7B1%7D%7B2%7D(%5Cfrac%7Bx-%5Cmu%5E2%7D%7B%5Csigma%7D)%7Ddx%0A"></p>
<p>When standard unites <img src="https://latex.codecogs.com/png.latex?z=0">, the normal distribution is at a maximum, the mean <img src="https://latex.codecogs.com/png.latex?%5Cmu">. The function is defined to be symmetric around <img src="https://latex.codecogs.com/png.latex?z=0">.</p>
<p>The normal distribution of z-score is called the <em>standard normal distribution</em> and is defined by <img src="https://latex.codecogs.com/png.latex?%5Cmu=0"> and <img src="https://latex.codecogs.com/png.latex?%5Csigma=1">.</p>
<p>Z-score are useful to quickly evalute whether an observation is average or extreme. Z-scores near 0 are average. Z-score above 2 or below -2 are <strong><em>significantly above or blew the mean</em></strong>, and z-scores above 3 or below -3 are <strong><em>extrmely rate</em></strong>.</p>
<section id="code-2" class="level3 page-columns page-full" data-number="2.8.1"><h3 data-number="2.8.1" class="anchored" data-anchor-id="code-2">
<span class="header-section-number">2.8.1</span> Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;"># define x as vector of male heights</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb7-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;">data</span>(heights)</span>
<span id="cb7-5">index <span class="ot" style="color: #003B4F;">&lt;-</span> heights<span class="sc" style="color: #5E5E5E;">$</span>sex<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Male"</span></span>
<span id="cb7-6">x <span class="ot" style="color: #003B4F;">&lt;-</span> heights<span class="sc" style="color: #5E5E5E;">$</span>height[index]</span>
<span id="cb7-7"></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;"># calculate the mean and standard deviation manually</span></span>
<span id="cb7-9">average <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sum</span>(x)<span class="sc" style="color: #5E5E5E;">/</span><span class="fu" style="color: #4758AB;">length</span>(x)</span>
<span id="cb7-10">SD <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sqrt</span>(<span class="fu" style="color: #4758AB;">sum</span>((x<span class="sc" style="color: #5E5E5E;">-</span>average)<span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">2</span>)<span class="sc" style="color: #5E5E5E;">/</span><span class="fu" style="color: #4758AB;">length</span>(x))</span>
<span id="cb7-11"></span>
<span id="cb7-12"><span class="co" style="color: #5E5E5E;"># built-in mean and sd functions - note that the audio and printed value disagree</span></span>
<span id="cb7-13">average <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mean</span>(x)</span>
<span id="cb7-14">SD <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sd</span>(x)</span>
<span id="cb7-15"><span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">average =</span> average, <span class="at" style="color: #657422;">SD =</span> SD)</span>
<span id="cb7-16"></span>
<span id="cb7-17"><span class="co" style="color: #5E5E5E;"># calculate standard units</span></span>
<span id="cb7-18">z <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">scale</span>(x)</span>
<span id="cb7-19"></span>
<span id="cb7-20"><span class="co" style="color: #5E5E5E;"># calculate proportion of value within 2 SD of mean</span></span>
<span id="cb7-21"><span class="fu" style="color: #4758AB;">mean</span>(<span class="fu" style="color: #4758AB;">abs</span>(z) <span class="sc" style="color: #5E5E5E;">&lt;</span> <span class="dv" style="color: #AD0000;">2</span>)</span></code></pre></div>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><strong><em>function <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>:</em></strong>The built-in R <strong><em>function <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code></em></strong> calculates the standard deviation, but it divides by <strong><em><code>length(x)-1</code></em></strong> instead of <strong><em><code>length(x)</code></em></strong>. When the length of the list is large, this difference is negligible and you can use the built-in <strong><em><code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code></em></strong> function. Otherwise, you should compute σ by hand. For this course series, assume that you should use the <strong><em><code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code></em></strong> function unless you are told not to do so.</span></div></div>
<p>Here we will learn more about benchmark z-score value and their corresponding probabilities.</p>
</section><section id="the-68-95-99.7-rule" class="level3" data-number="2.8.2"><h3 data-number="2.8.2" class="anchored" data-anchor-id="the-68-95-99.7-rule">
<span class="header-section-number">2.8.2</span> The 68-95-99.7 Rule</h3>
<p>The normal distribution is associated with the 68-95-99.7 rule. This rule describes the probability of observing events within a ceration number of standard deviations of the mean.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p></p><figcaption class="figure-caption">Normal Distribution Probabilities</figcaption><p></p>
<p><img src="https://stats-r.com/series/Data Visualization/https:/courses.edx.org/assets/courseware/v1/28d10d22ba8b3bf4b0cc5024de0dc616/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-probs-combined.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>The probability distribution function for the normal distribution is defined such that:</p>
<ul>
<li>About 68% of observations will be within one standard deviation of the mean(<img src="https://latex.codecogs.com/png.latex?%5Cmu%5Cpm%5Csigma">). In standard units, this is equivalent to a z-score of <img src="https://latex.codecogs.com/png.latex?%7Cz%7C%5Cleq2">
</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p></p><figcaption class="figure-caption">Probability of an observation within 1 SD of mean</figcaption><p></p>
<p><img src="https://stats-r.com/series/Data Visualization/https:/courses.edx.org/assets/courseware/v1/f0bb9f66b7bdd91b2c9852c7a68427c7/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-1sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li>About 95% of observations will be within two standard seviations of the mean(<img src="https://latex.codecogs.com/png.latex?%5Cmu%5Cpm2%5Csigma">). In standard units, this is equivalent to a z-sore of <img src="https://latex.codecogs.com/png.latex?%7Cz%7C%5Cleq2">.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p></p><figcaption class="figure-caption">Probability of an ovservation within 2 SD of mean</figcaption><p></p>
<p><img src="https://stats-r.com/series/Data Visualization/https:/courses.edx.org/assets/courseware/v1/9686a507a97a536a1f5c6b6a01bd8154/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-2sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
<ul>
<li>About 99.7% of observations will be within three standard deviations of the mean(<img src="https://latex.codecogs.com/png.latex?%5Cmu%5Cpm3%5Csigma">). In standard units, this is equivalent to a z-score of <img src="https://latex.codecogs.com/png.latex?%7Cz%7C%5Cleq3">.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p></p><figcaption class="figure-caption">Probability of an observation within 3 SD of mean</figcaption><p></p>
<p><img src="https://stats-r.com/series/Data Visualization/https:/courses.edx.org/assets/courseware/v1/a8af7c699c20d1e83819b5f68bf6f17d/asset-v1:HarvardX+PH125.2x+1T2022+type@asset+block/norm-dist-3sd.png" class="img-fluid figure-img"></p>
</figure>
</div>
</section></section><section id="the-normal-cdf-and-pnorm" class="level2" data-number="2.9"><h2 data-number="2.9" class="anchored" data-anchor-id="the-normal-cdf-and-pnorm">
<span class="header-section-number">2.9</span> The Normal CDF and pnorm</h2>
<section id="key-points-2" class="level3" data-number="2.9.1"><h3 data-number="2.9.1" class="anchored" data-anchor-id="key-points-2">
<span class="header-section-number">2.9.1</span> Key points:</h3>
<ul>
<li><p>The normal distribution has a mathematically defined CDF which can be computed in R with the function <code>pnorm</code>.</p></li>
<li><p><code>pnom(a, avg, s)</code> gives the value of the cumculative distribution function <em>F(a)</em> for the normal distribution defined by average <em>avg</em> and standard deviation <em>s</em>.</p></li>
<li><p>we say that a random quantity is normally distributed with average <em>avg</em> and standard deviation <em>s</em> if the approximate <em>pnorm(a, avg, s)</em> holds for all values of <em>a</em>.</p></li>
<li><p>If we are willing to use the normal approximation for height, we can estimate the distribution simply from the mean and standard deviation of our values.</p></li>
<li><p>If we treat the height data as discrete rather than categorical, we see that the data are not very useful because integer values are more common that expected due to rounding. This is called discretization.</p></li>
<li><p>With rounded data, the normal approximation is particularly useful when computing probabilities of intervals of length 1 that include exactly over integer.</p></li>
</ul></section><section id="code-using-pnorm-to-calculate-probabilities" class="level3" data-number="2.9.2"><h3 data-number="2.9.2" class="anchored" data-anchor-id="code-using-pnorm-to-calculate-probabilities">
<span class="header-section-number">2.9.2</span> Code: Using pnorm to calculate probabilities</h3>
<p>Given male heights x:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"heights"</span>)</span>
<span id="cb8-4">x <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(sex<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Male"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">pull</span>(height)</span></code></pre></div>
</div>
<p>we can estimate the probability that a male is taller than 70.5 inches with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="dv" style="color: #AD0000;">1</span> <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">70.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x))</span></code></pre></div>
</div>
</section><section id="code-discretization-and-the-normal-approximation" class="level3" data-number="2.9.3"><h3 data-number="2.9.3" class="anchored" data-anchor-id="code-discretization-and-the-normal-approximation">
<span class="header-section-number">2.9.3</span> Code: Discretization and the normal approximation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;"># plot distribution of exact heights in data</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;">plot</span>(<span class="fu" style="color: #4758AB;">prop.table</span>(<span class="fu" style="color: #4758AB;">table</span>(x)), <span class="at" style="color: #657422;">xlab =</span> <span class="st" style="color: #20794D;">"a = Height in inches"</span>, <span class="at" style="color: #657422;">ylab =</span> <span class="st" style="color: #20794D;">"Pr(x = a)"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;"># probabilities in actual data over length 1 ranges containing a integer</span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">68.5</span>) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">67.5</span>)</span>
<span id="cb11-3"><span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">69.5</span>) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">68.5</span>)</span>
<span id="cb11-4"><span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">70.5</span>) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">69.5</span>)</span>
<span id="cb11-5"></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;"># probabilities in normal approximation match well</span></span>
<span id="cb11-7"><span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">68.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x)) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">67.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x))</span>
<span id="cb11-8"><span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">69.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x)) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">68.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x))</span>
<span id="cb11-9"><span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">70.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x)) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">69.5</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x))</span>
<span id="cb11-10"></span>
<span id="cb11-11"><span class="co" style="color: #5E5E5E;"># probabilities in actual data over other ranges don't match normal approx as well</span></span>
<span id="cb11-12"><span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">70.9</span>) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">70.1</span>)</span>
<span id="cb11-13"><span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">70.9</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x)) <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">pnorm</span>(<span class="fl" style="color: #AD0000;">70.1</span>, <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">sd</span>(x))</span></code></pre></div>
</div>
</section></section><section id="definition-of-quantiles" class="level2" data-number="2.10"><h2 data-number="2.10" class="anchored" data-anchor-id="definition-of-quantiles">
<span class="header-section-number">2.10</span> Definition of quantiles</h2>
<section id="definition-of-quantiles-1" class="level3" data-number="2.10.1"><h3 data-number="2.10.1" class="anchored" data-anchor-id="definition-of-quantiles-1">
<span class="header-section-number">2.10.1</span> Definition of quantiles</h3>
<p><a href="https://www.youtube.com/watch?v=Ky7QeVgv-BA&amp;ab_channel=MarinStatsLectures-RProgramming%26Statistics">Quantiles</a> are cut off points that divide a dataset into intervals with set probability. The <em>qth</em> quantile is the value at which <em>q%</em> of the observation are <strong><em>equal to or less than that value</em></strong>.</p>
</section><section id="using-the-quantile-function" class="level3" data-number="2.10.2"><h3 data-number="2.10.2" class="anchored" data-anchor-id="using-the-quantile-function">
<span class="header-section-number">2.10.2</span> Using the quantile function</h3>
<p>Given a dataset <code>data</code> and desired quantile <code>q</code>, you can find the <code>q</code> the quantile of <code>data</code> with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;">quantile</span>(data,q)</span></code></pre></div>
</div>
</section><section id="percentiles" class="level3" data-number="2.10.3"><h3 data-number="2.10.3" class="anchored" data-anchor-id="percentiles">
<span class="header-section-number">2.10.3</span> Percentiles</h3>
<p>Percentiles are the quantiles that divide a dataset into 100 intervals each with 1% probability. You can determine all percentiles of a dataset <code>data</code> like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fl" style="color: #AD0000;">0.01</span>, <span class="fl" style="color: #AD0000;">0.09</span>, <span class="fl" style="color: #AD0000;">0.01</span>)</span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;">quantile</span>(data, p)</span></code></pre></div>
</div>
</section><section id="quartiles" class="level3" data-number="2.10.4"><h3 data-number="2.10.4" class="anchored" data-anchor-id="quartiles">
<span class="header-section-number">2.10.4</span> Quartiles</h3>
<p>Quartiles divide a dataset into 4 parts each with 25% probability. They are equal to the 25th, 50th and 75th percentiles. The 25th percentile is also known as the <em>1st quartile</em>, the 50th percentile is also konwn as the median, and the 75th percentile is also knowns as the <em>3rd quartile</em>.</p>
<p>The <strong><em><code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code></em></strong> function returns the minimum, quartiles and maximum of a vector.</p>
</section><section id="examples" class="level3" data-number="2.10.5"><h3 data-number="2.10.5" class="anchored" data-anchor-id="examples">
<span class="header-section-number">2.10.5</span> Examples</h3>
<p>Load the heights dataset from the <em>dslabs</em> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"heights"</span>)</span></code></pre></div>
</div>
<p>Use<code>summary</code>on the <code>heights$height</code> variable to find the quartiles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;">summary</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>height)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  50.00   66.00   68.50   68.32   71.00   82.68 </code></pre>
</div>
</div>
<p>Find the percentiles of <code>height$height</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fl" style="color: #AD0000;">0.01</span>, <span class="fl" style="color: #AD0000;">0.99</span>, <span class="fl" style="color: #AD0000;">0.01</span>)</span>
<span id="cb17-2">percentiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">quantile</span>(heights<span class="sc" style="color: #5E5E5E;">$</span>height, p)</span></code></pre></div>
</div>
<p>Confirm that the 25th and 75th percentiles match that 1st and 3rd quartiles. Note that <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> returns a named vector. You can access the 25th and 75th percentiles like this (adapt the code for other percentile value):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1">percentiles[<span class="fu" style="color: #4758AB;">names</span>(percentiles) <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"25%"</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>25% 
 66 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1">percentiles[<span class="fu" style="color: #4758AB;">names</span>(percentiles) <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"75%"</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>75% 
 71 </code></pre>
</div>
</div>
</section></section><section id="finding-quantile-with-qnorm" class="level2 page-columns page-full" data-number="2.11"><h2 data-number="2.11" class="anchored" data-anchor-id="finding-quantile-with-qnorm">
<span class="header-section-number">2.11</span> Finding quantile with qnorm</h2>
<section id="definiton-of-qnorm" class="level3 page-columns page-full" data-number="2.11.1"><h3 data-number="2.11.1" class="anchored" data-anchor-id="definiton-of-qnorm">
<span class="header-section-number">2.11.1</span> Definiton of qnorm</h3>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">简单来说,<a href="https://www.jianshu.com/p/a24eb1b94177"><strong><em><code>qnorm</code></em></strong></a>是正态分布<strong><em>累积分布函数(CDF)</em></strong>的反函数， 也就是说它可以视为<code>pnorm</code>的反函数, 这里<code>q</code>指的是quantile, 即分位数</span></div></div>
<p>The <a href="https://www.youtube.com/watch?v=X5NXDK6AVtU&amp;ab_channel=TheDataDigest"><code>qnorm()</code></a> function gives the theoretical value of a quantile with probability <code>p</code> of observing a value equal to or less than that quantile value a normal distribution with mean <code>mu</code> and standard deviation <code>sigma</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="fu" style="color: #4758AB;">qnorm</span>(p, mu, sigma)</span></code></pre></div>
</div>
<p><strong><em>By default, <code>mu</code>=0 and <code>sigma</code>=1</em></strong>. Therefore, calling <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> with no arguments gives quantiles for the standard normal distribution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="fu" style="color: #4758AB;">qnorm</span>(p)</span></code></pre></div>
</div>
<p>Recall that quantiles are defined such that <img src="https://latex.codecogs.com/png.latex?p"> is the probability of a random observation less than or equal to the quantile.</p>
</section><section id="realation-to-pnorm" class="level3" data-number="2.11.2"><h3 data-number="2.11.2" class="anchored" data-anchor-id="realation-to-pnorm">
<span class="header-section-number">2.11.2</span> Realation to pnorm</h3>
<p>The <code><a href="https://rdrr.io/r/stats/Normal.html">pnorm()</a></code> function gives the probability that a value from a standard normal distribution will be less than or equal to a z-score value z. consider: <img src="https://latex.codecogs.com/png.latex?pnorm(-1.96)%5Capprox0.025"> The result of <code><a href="https://rdrr.io/r/stats/Normal.html">pnorm()</a></code> is the quantile. Note that: <img src="https://latex.codecogs.com/png.latex?qnorm(0.025)%5Capprox-1.96"> <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> and <code>pnorm</code> are inverse functions: <img src="https://latex.codecogs.com/png.latex?pnorm(qnorm(0.025))%5Cequiv0.025"></p>
</section><section id="theoretical-quantiles" class="level3" data-number="2.11.3"><h3 data-number="2.11.3" class="anchored" data-anchor-id="theoretical-quantiles">
<span class="header-section-number">2.11.3</span> Theoretical quantiles</h3>
<p>You can use <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> to determine the theoretical quantiles of a dataset: that is, the theoretical value of quantiles assuming that a dataset follows a normal distribution. Run the <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> function with the desired probabilities <em>p</em>, mean mu and standard deviation sigma.</p>
<p>Suppose male heights follow a normal distribution with a mean of 69 inches and standard deviation of 3 inches. The theoretical quantiles are:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fl" style="color: #AD0000;">0.01</span>, <span class="fl" style="color: #AD0000;">0.99</span>, <span class="fl" style="color: #AD0000;">0.01</span>)</span>
<span id="cb24-2">theoretical_quantiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">qnorm</span>(p, <span class="dv" style="color: #AD0000;">69</span>, <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
</div>
<p>Theoretical quantiles can be compared to sample quantiles determined with the quantile function in order to evaluate whether the sample follows a normal distribution.</p>
</section></section><section id="quantile-quantile-plots" class="level2" data-number="2.12"><h2 data-number="2.12" class="anchored" data-anchor-id="quantile-quantile-plots">
<span class="header-section-number">2.12</span> Quantile-Quantile Plots</h2>
<section id="key-points-3" class="level3" data-number="2.12.1"><h3 data-number="2.12.1" class="anchored" data-anchor-id="key-points-3">
<span class="header-section-number">2.12.1</span> Key Points:</h3>
<ul>
<li><p>Quantile-quantile plots, or QQ-plot, are used to check whether distributions are well-approximated by a normal distribution.</p></li>
<li><p>Given a proportion <em>p</em>, the quantile <em>q</em> is the value such that the proportion of values in the data blew <em>q</em> is <em>p</em>.</p></li>
<li><p>In a QQ-plot, the sample quantiles in the observed data are compared to the theoretical quantiles expected from the normal distribution. If the data are well-approximated by the normal distribution, then the points on the QQ-plot will fall near the identity line(sample = theoretical).</p></li>
<li><p>Calculate sample quantiles (observed quantiles) using the <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> function.</p></li>
<li><p>Calculate theoretical quantiles with the <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> function. <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code> will caculate quantiles for the standard normal distribution (<img src="https://latex.codecogs.com/png.latex?%5Cmu=0,%20%5Csigma=1">) by default, but it can calculate quantiles for any normal distribution given <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> and <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> arguments.</p></li>
</ul></section><section id="code-3" class="level3" data-number="2.12.2"><h3 data-number="2.12.2" class="anchored" data-anchor-id="code-3">
<span class="header-section-number">2.12.2</span> Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;"># define x and z</span></span>
<span id="cb25-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb25-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb25-4"><span class="fu" style="color: #4758AB;">data</span>(heights)</span>
<span id="cb25-5"></span>
<span id="cb25-6">index <span class="ot" style="color: #003B4F;">&lt;-</span> heights<span class="sc" style="color: #5E5E5E;">$</span>sex<span class="sc" style="color: #5E5E5E;">==</span><span class="st" style="color: #20794D;">"Male"</span></span>
<span id="cb25-7">x <span class="ot" style="color: #003B4F;">&lt;-</span> heights<span class="sc" style="color: #5E5E5E;">$</span>height[index]</span>
<span id="cb25-8">z <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">scale</span>(x)</span>
<span id="cb25-9"></span>
<span id="cb25-10"><span class="co" style="color: #5E5E5E;"># proportion of data below 69.5</span></span>
<span id="cb25-11"><span class="fu" style="color: #4758AB;">mean</span>(x <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">69.5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5147783</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;"># calculate observed and theoretical quantiles</span></span>
<span id="cb27-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">seq</span>(<span class="fl" style="color: #AD0000;">0.05</span>, <span class="fl" style="color: #AD0000;">0.95</span>, <span class="fl" style="color: #AD0000;">0.05</span>)</span>
<span id="cb27-3">observed_quantiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">quantile</span>(x, p)</span>
<span id="cb27-4">theoretical_quantiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">qnorm</span>(p, <span class="at" style="color: #657422;">mean =</span> <span class="fu" style="color: #4758AB;">mean</span>(x), <span class="at" style="color: #657422;">sd =</span> <span class="fu" style="color: #4758AB;">sd</span>(x))</span>
<span id="cb27-5"></span>
<span id="cb27-6"><span class="co" style="color: #5E5E5E;"># make QQ-plot</span></span>
<span id="cb27-7"><span class="fu" style="color: #4758AB;">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb27-8"><span class="fu" style="color: #4758AB;">abline</span>(<span class="dv" style="color: #AD0000;">0</span>,<span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="co" style="color: #5E5E5E;"># make QQ-plot with scaled values</span></span>
<span id="cb28-2">observed_quantiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">quantile</span>(z, p)</span>
<span id="cb28-3">theoretical_quantiles <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">qnorm</span>(p)</span>
<span id="cb28-4"><span class="fu" style="color: #4758AB;">plot</span>(theoretical_quantiles, observed_quantiles)</span>
<span id="cb28-5"><span class="fu" style="color: #4758AB;">abline</span>(<span class="dv" style="color: #AD0000;">0</span>,<span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="percentiles-1" class="level2" data-number="2.13"><h2 data-number="2.13" class="anchored" data-anchor-id="percentiles-1">
<span class="header-section-number">2.13</span> Percentiles</h2>
<section id="key-points-4" class="level3" data-number="2.13.1"><h3 data-number="2.13.1" class="anchored" data-anchor-id="key-points-4">
<span class="header-section-number">2.13.1</span> Key Points:</h3>
<ul>
<li><p>Percentiles are the quantiles obtained when defining <img src="https://latex.codecogs.com/png.latex?p"> as 0.01, 0.02,…,0.99. They summarize the values at which a certain percent of the observations are equal to or less than that value.</p></li>
<li><p>The 50th percentile is also known as the median.</p></li>
<li><p>The quartiles are the 25th, 50th and 75th percentiles.</p></li>
</ul></section></section><section id="boxplots" class="level2 page-columns page-full" data-number="2.14"><h2 data-number="2.14" class="anchored" data-anchor-id="boxplots">
<span class="header-section-number">2.14</span> Boxplots</h2>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class="">R语言如何绘制<a href="https://zhuanlan.zhihu.com/p/440914623">箱线图</a></span></div></div>
<section id="key-points-5" class="level3" data-number="2.14.1"><h3 data-number="2.14.1" class="anchored" data-anchor-id="key-points-5">
<span class="header-section-number">2.14.1</span> Key Points:</h3>
<ul>
<li><p>When data do not follow a normal distribution and cannot be succinctly summarized by only the mean and standard deviation, an alternative is to report a five-number summary: range (ignoring outliers) and the quartiles (25th, 50th, 75th percentile).</p></li>
<li><p>In a <a href="https://www.youtube.com/watch?v=INSIyaZUXIY&amp;ab_channel=DATAtab">boxplot</a>, the box is defined by the <em>25th</em> and <em>75th</em> percentiles and the <em>median</em> is <strong><em>a horizontal line through the box</em></strong>. The <em>whiskers</em> show <strong><em>the range excluding outliers</em></strong>, and outliers are plotted separately as individual points.</p></li>
<li><p>The <em>interquartile range</em> is the distance between the 25th and 75th percentiles.</p></li>
<li><p>Boxplots are particularly useful when comparing <em>multiple distributions</em>.</p></li>
</ul></section></section><section id="distribution-of-female-heights" class="level2" data-number="2.15"><h2 data-number="2.15" class="anchored" data-anchor-id="distribution-of-female-heights">
<span class="header-section-number">2.15</span> Distribution of Female Heights</h2>
<section id="key-points-6" class="level3" data-number="2.15.1"><h3 data-number="2.15.1" class="anchored" data-anchor-id="key-points-6">
<span class="header-section-number">2.15.1</span> Key Points:</h3>
<ul>
<li><p>If a distribution is not normal, it cannot be summarized with only the mean and standard seviation. Provide a histogram, smooth density or boxplot instead.</p></li>
<li><p>A plot can force us to see unexpected results that make us question the quality or implication of our data.</p></li>
</ul></section></section></section><section id="introduction-to-ggplot2" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Introduction to ggplot2</h1>
<section id="overview-1" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="overview-1">
<span class="header-section-number">3.1</span> Overview</h2>
<p>After completing ggplot2, we will:</p>
<ul>
<li><p>be able to use ggplot2 to create data visualizations in R.</p></li>
<li><p>be able to explain what the data component of a graph is.</p></li>
<li><p>be able to identify the geometry component of a graph and know when to use which type of geometry. be able to explain what the aesthetic mapping component of a graph is.</p></li>
<li><p>be able to understand the scale component of a graph and select an appropriate scale component to use.</p></li>
</ul></section><section id="ggplot" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="ggplot">
<span class="header-section-number">3.2</span> ggplot</h2>
<section id="ggplot2" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="ggplot2">
<span class="header-section-number">3.2.1</span> ggplot2</h3>
<ul>
<li><p><a href="https://datacarpentry.org/R-ecology-lesson/04-visualization-ggplot2.html">Data visualization with ggolot2</a></p></li>
<li><p><a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf">Data visualization with ggplot2: Cheat Sheet</a></p></li>
<li><p><a href="https://r-graph-gallery.com/index.html">The R graph gallery example</a></p></li>
</ul></section><section id="key-points-7" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="key-points-7">
<span class="header-section-number">3.2.2</span> key Points:</h3>
<ul>
<li><p>Throughout the series, we will create plots with the ggplot2 package. <strong>ggplot2</strong> is part of the <strong>tidyverse</strong> suite of package, which you can load with <strong><code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code></strong>.</p></li>
<li><p>Note that you can also load <strong>ggplot2</strong> alone using the command <strong><code><a href="https://ggplot2.tidyverse.org">library(ggplot2)</a></code></strong>, instead of loading the entire tidyverse.</p></li>
<li><p><strong>ggplot2</strong> uses a <strong>grammar of graphics</strong> to break plots into building blocks that have intuitive syntax, making it easy to create relatively complex and aesthetically pleasing plots with relatively simple and readable code.</p></li>
<li><p><strong>ggplot2</strong> is designed to work excusively with tidy data (<strong>rows are observations and columns are variables</strong>).</p></li>
</ul></section></section><section id="graph-components" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="graph-components">
<span class="header-section-number">3.3</span> Graph Components</h2>
<section id="key-points-8" class="level3" data-number="3.3.1"><h3 data-number="3.3.1" class="anchored" data-anchor-id="key-points-8">
<span class="header-section-number">3.3.1</span> Key Points:</h3>
<ul>
<li>Plots in <strong>ggplot2</strong> consist of 3 main components:
<ul>
<li>
<strong>Data</strong>: The dataset being summarized</li>
<li>
<strong>Geometry</strong>: The type of plot(scatterplot, boxplot, barplot, histogram, qqplot, smooth desity, etc.)</li>
<li>
<strong>Aesthetic mapping</strong>: Variable mapped to visual cues, such as x-axis and y-axis values and color.</li>
</ul>
</li>
</ul></section><section id="code-4" class="level3" data-number="3.3.2"><h3 data-number="3.3.2" class="anchored" data-anchor-id="code-4">
<span class="header-section-number">3.3.2</span> Code:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb29-2"><span class="fu" style="color: #4758AB;">data</span>(murders)</span></code></pre></div>
</div>
</section></section><section id="creating-a-new-plot" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="creating-a-new-plot">
<span class="header-section-number">3.4</span> Creating a New Plot</h2>
<section id="key-points-9" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="key-points-9">
<span class="header-section-number">3.4.1</span> Key Points:</h3>
<ul>
<li>
<p>You can associated a dataset <code>x</code> with a ggplot object with any of the 3 commands:</p>
<ul>
<li><strong><code>ggplot(data = x)</code></strong></li>
<li><strong><code>ggplot(x)</code></strong></li>
<li><strong><code>x %&gt;% ggplot()</code></strong></li>
</ul>
</li>
<li><p>You can assign a ggplot object to a variable. If the object is not assigned to a variable, it will automatically be displayed.</p></li>
<li><p>You can display a ggplot object assigned to a variable by printing that variable.</p></li>
</ul>
<p>Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb30-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb30-3"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb30-4"></span>
<span id="cb30-5"><span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> murders)</span>
<span id="cb30-6"></span>
<span id="cb30-7">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">ggplot</span>()</span>
<span id="cb30-8"></span>
<span id="cb30-9">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> murders)</span>
<span id="cb30-10"></span>
<span id="cb30-11"><span class="fu" style="color: #4758AB;">class</span>(p)</span>
<span id="cb30-12"></span>
<span id="cb30-13"><span class="fu" style="color: #4758AB;">print</span>(p) <span class="co" style="color: #5E5E5E;"># this is equivalent to simply typing p</span></span>
<span id="cb30-14">p </span></code></pre></div>
</div>
</section></section><section id="layers" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="layers">
<span class="header-section-number">3.5</span> Layers</h2>
<section id="key-points-10" class="level3" data-number="3.5.1"><h3 data-number="3.5.1" class="anchored" data-anchor-id="key-points-10">
<span class="header-section-number">3.5.1</span> Key Points:</h3>
<ul>
<li><p>In <strong>ggplot2</strong>, graphs are created by adding layers to the ggplot object: DATA %&gt;% ggplot() + LAYER_1 + LAYER_2 + … + LAYER_N</p></li>
<li><p>The <strong><em>geometry layer</em></strong> defines that plot type and takes the format <code>geom_x</code> where <code>x</code> is the plot type.</p></li>
<li><p><strong><em>Aesthetic mappings</em></strong> describe how properties of <strong>the data connect with features of the graph</strong> (axis position, color, size, etc.) define aesthetic mapping with <code>aes()</code> function.</p></li>
<li><p><strong><code>aes()</code></strong> uses variable names from the object component (for example, <strong><code>total</code></strong> rather than <strong><code>murders$total</code></strong>).</p></li>
<li><p><strong><code>geom_point()</code></strong> creates a scatterplot and requires <code>x</code> and <code>y</code> aesthetic mappings.</p></li>
<li><p><strong><code>geom_text()</code></strong> and <strong><code>geom_label</code></strong> add text to a scatterplot and require <code>x</code>, <code>y</code>, and <code>label</code> aesthetic mappings.</p></li>
<li><p>To determine which aesthetic mappings are required for a geometry, read the help file for that geometry.</p></li>
<li><p>You can add layers with different aesthetic mappings to the same graph.</p></li>
</ul>
<p>Code: Adding layers to a plot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb31-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb31-3"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb31-4"></span>
<span id="cb31-5">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">ggplot</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb31-6">  <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, <span class="at" style="color: #657422;">y =</span> total))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="co" style="color: #5E5E5E;"># add points layer to predefined ggplot object</span></span>
<span id="cb32-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="at" style="color: #657422;">data =</span> murders)</span>
<span id="cb32-3">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="co" style="color: #5E5E5E;"># add text layer to scatterplot</span></span>
<span id="cb33-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb33-3">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Code: Example of <code>aes</code> behavior</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="co" style="color: #5E5E5E;"># no error from this call</span></span>
<span id="cb34-2">p_test <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">lable =</span> abb))</span>
<span id="cb34-3"></span>
<span id="cb34-4"><span class="co" style="color: #5E5E5E;"># error - "abb" is not a globally defined variable and cannot be found outside of aes</span></span>
<span id="cb34-5">p_test <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total), <span class="at" style="color: #657422;">label =</span> abb)</span></code></pre></div>
</div>
</section></section><section id="thinkering" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="thinkering">
<span class="header-section-number">3.6</span> Thinkering</h2>
<section id="key-points-11" class="level3" data-number="3.6.1"><h3 data-number="3.6.1" class="anchored" data-anchor-id="key-points-11">
<span class="header-section-number">3.6.1</span> Key Points:</h3>
<ul>
<li><p>You can modify arguments to geometry functions others than <code>aes()</code> and the data.</p></li>
<li><p>These arguments are not aesthetic mappings: the affect all data points the same way.</p></li>
<li><p><strong><em>Global aesthetic mappings</em></strong> apply to all geometries and can be defined when you initially call <code>ggplot()</code>. All the geometries added as layers will default to this mapping. Local aesthetic mapping add additional information or override the default mappings.</p></li>
</ul>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<strong>Nudge</strong> points a fixed distance
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html?q=nudge#null"><code>position_nudge(x = 0, y = 0)</code></a> is generally useful for adjusting the position of items on discrete scales by a small amount. Nudging is built in to <strong><code>geom_text()</code></strong> because it’s so useful for moving labels a small distance from what they’re labeling.</p>
</div>
</div>
<p>Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="co" style="color: #5E5E5E;"># change the size of the points</span></span>
<span id="cb35-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb35-3">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="co" style="color: #5E5E5E;"># move text labels slightly to the right</span></span>
<span id="cb36-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb36-3">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb), <span class="at" style="color: #657422;">nudge_x =</span> <span class="dv" style="color: #AD0000;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-27-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="co" style="color: #5E5E5E;"># simplify code by adding global aesthetic</span></span>
<span id="cb37-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb))</span>
<span id="cb37-3">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb37-4">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">nudge_x =</span> <span class="fl" style="color: #AD0000;">1.5</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-27-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;"># local aesthetics override global aesthetics</span></span>
<span id="cb38-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb38-3">  <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> <span class="dv" style="color: #AD0000;">10</span>, <span class="at" style="color: #657422;">y =</span> <span class="dv" style="color: #AD0000;">800</span>, <span class="at" style="color: #657422;">label =</span> <span class="st" style="color: #20794D;">"Hello there!"</span>))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-27-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="scales-labels-and-colors" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="scales-labels-and-colors">
<span class="header-section-number">3.7</span> Scales, Labels, and Colors</h2>
<section id="textbook-links" class="level3" data-number="3.7.1"><h3 data-number="3.7.1" class="anchored" data-anchor-id="textbook-links">
<span class="header-section-number">3.7.1</span> Textbook links:</h3>
<ul>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#scales">Textbook section on <strong>scales</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#labels-and-titles">Textbook section on <strong>labels and titles</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#categories-as-colors">Textbook section on <strong>categories as colors</strong></a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#annotation-shapes-and-adjustments">Textbook section on <strong>annotation, shapes and adjustments</strong></a></p></li>
</ul></section><section id="key-points-12" class="level3" data-number="3.7.2"><h3 data-number="3.7.2" class="anchored" data-anchor-id="key-points-12">
<span class="header-section-number">3.7.2</span> Key Points:</h3>
<ul>
<li><p>Convert the x-axis to log scale with <strong><code>scale_x_continuous(trans = "log10")</code></strong> or <strong><code>scale_x_log10()</code></strong>. Similar function exist for the y-axis.</p></li>
<li><p><strong>Add axis title</strong> with <strong><code>xlab()</code></strong> and <strong><code>ylab()</code></strong> function. <strong>Add a plot title</strong> with the <strong><code>ggtitle()</code></strong> function.</p></li>
<li><p><strong>Add a color mapping</strong> that colors points by a varaibale by defining <strong><code>col</code></strong> argument <strong>within <code>aes()</code></strong>. To color all pints the same way, define <strong><code>col</code></strong> outside of <strong><code>aes()</code></strong>.</p></li>
<li><p><strong>Add a line</strong> with the <strong><code>geom_abline()</code></strong> geometry. <strong><code>geom_abline()</code></strong> takes arguments <strong><code>slop</code></strong> (default = 1) and <strong><code>intercept</code></strong>(default = 0). Change the color with <strong><code>col</code></strong> or <strong><code>color</code></strong> and line type with <a href="https://r-charts.com/base-r/line-types/"><strong><code>lty</code></strong></a>.</p></li>
<li><p>Placing the line layer after the point layer will overlay the the line on top of the points. To overlay points on the line, <strong>place the line layer before the point layer</strong>.</p></li>
<li><p>There are many additional ways to tweak your graph that can be found in the <strong>ggplot2</strong> documentation, cheat sheet or on the internet. For example, you can change the legend title with <a href="https://www.jianshu.com/p/6ba336b3931f"><strong><code>scale_color_discrete</code></strong></a>.</p></li>
</ul></section><section id="code-log-scale-the-x-axis-and-y-axis" class="level3" data-number="3.7.3"><h3 data-number="3.7.3" class="anchored" data-anchor-id="code-log-scale-the-x-axis-and-y-axis">
<span class="header-section-number">3.7.3</span> Code: Log-scale the x-axis and y-axis</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><span class="co" style="color: #5E5E5E;"># define p</span></span>
<span id="cb39-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb39-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb39-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb39-5"></span>
<span id="cb39-6">p <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb))</span>
<span id="cb39-7"></span>
<span id="cb39-8"><span class="co" style="color: #5E5E5E;"># log base 10 scale the x-axis and y-axis</span></span>
<span id="cb39-9">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb39-10">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">nudge_x =</span> <span class="fl" style="color: #AD0000;">0.05</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb39-11">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log10"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb39-12">    <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log10"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="co" style="color: #5E5E5E;"># efficient log scaling of the axes</span></span>
<span id="cb40-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-3">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">nudge_x =</span> <span class="fl" style="color: #AD0000;">0.05</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-4">    <span class="fu" style="color: #4758AB;">scale_x_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb40-5">    <span class="fu" style="color: #4758AB;">scale_y_log10</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-add-labels-and-title" class="level3" data-number="3.7.4"><h3 data-number="3.7.4" class="anchored" data-anchor-id="code-add-labels-and-title">
<span class="header-section-number">3.7.4</span> Code: Add labels and title</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-2">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">nudge_x =</span> <span class="fl" style="color: #AD0000;">0.05</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-3">    <span class="fu" style="color: #4758AB;">scale_x_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-4">    <span class="fu" style="color: #4758AB;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-5">    <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">"Population in million(log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-6">    <span class="fu" style="color: #4758AB;">ylab</span>(<span class="st" style="color: #20794D;">"Total number of murders(log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb41-7">    <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"US Gun Murders in 2010"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-change-color-of-the-points" class="level3" data-number="3.7.5"><h3 data-number="3.7.5" class="anchored" data-anchor-id="code-change-color-of-the-points">
<span class="header-section-number">3.7.5</span> Code: Change color of the points</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="co" style="color: #5E5E5E;"># redefine p to be everything except the points layer</span></span>
<span id="cb42-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb42-3">     <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-4">     <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">nudge_x =</span> <span class="fl" style="color: #AD0000;">0.075</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-5">     <span class="fu" style="color: #4758AB;">scale_x_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-6">     <span class="fu" style="color: #4758AB;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-7">     <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">"Population in million(log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-8">     <span class="fu" style="color: #4758AB;">ylab</span>(<span class="st" style="color: #20794D;">"Total number of murders(log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb42-9">     <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"US Gun Murders in 2010"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><span class="co" style="color: #5E5E5E;"># make all points blue</span></span>
<span id="cb43-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="co" style="color: #5E5E5E;"># color points by region</span></span>
<span id="cb44-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">col =</span> region), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-add-a-line-with-average-murder-rate" class="level3" data-number="3.7.6"><h3 data-number="3.7.6" class="anchored" data-anchor-id="code-add-a-line-with-average-murder-rate">
<span class="header-section-number">3.7.6</span> Code: Add a line with average murder rate</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1">r <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb45-2">     <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span>      <span class="fu" style="color: #4758AB;">pull</span>(rate)</span>
<span id="cb45-3"></span>
<span id="cb45-4">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">col =</span> region), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb45-5">         <span class="fu" style="color: #4758AB;">geom_abline</span>(<span class="at" style="color: #657422;">intercept =</span> <span class="fu" style="color: #4758AB;">log10</span>(r)) <span class="co" style="color: #5E5E5E;"># slop is default of 1</span></span>
<span id="cb45-6"></span>
<span id="cb45-7"><span class="co" style="color: #5E5E5E;"># change line to dashed and dark grey, line under points</span></span>
<span id="cb45-8">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_abline</span>(<span class="at" style="color: #657422;">intercept =</span> <span class="fu" style="color: #4758AB;">log</span>(r), <span class="at" style="color: #657422;">lty =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"darkgrey"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb45-9">    <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">col =</span> region), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Line types in R: Ity
</div>
</div>
<div class="callout-body-container callout-body">
<p>The different <strong>line types</strong> available in <strong>R</strong> are shown in the figure hereafter. The argument <a href="http://www.sthda.com/english/wiki/line-types-in-r-lty"><strong>lty</strong></a> can be used to specify the <strong>line type</strong>. To change <strong>line width</strong>, the argument <strong>lwd</strong> can be used.</p>
</div>
</div>
</section><section id="code-change-legend-title" class="level3" data-number="3.7.7"><h3 data-number="3.7.7" class="anchored" data-anchor-id="code-change-legend-title">
<span class="header-section-number">3.7.7</span> Code: Change legend title</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="co" style="color: #5E5E5E;"># capitalize legend title</span></span>
<span id="cb46-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">scale_color_discrete</span>(<span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Region"</span>)</span>
<span id="cb46-3">p</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="add-on-packages" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="add-on-packages">
<span class="header-section-number">3.8</span> Add-on packages</h2>
<section id="textbook-links-1" class="level3" data-number="3.8.1"><h3 data-number="3.8.1" class="anchored" data-anchor-id="textbook-links-1">
<span class="header-section-number">3.8.1</span> Textbook links:</h3>
<ul>
<li><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#add-on-packages">Textbook section on add-on packages</a></li>
<li><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#putting-it-all-together">Textbook section on putting it all together</a></li>
</ul></section><section id="key-points-13" class="level3" data-number="3.8.2"><h3 data-number="3.8.2" class="anchored" data-anchor-id="key-points-13">
<span class="header-section-number">3.8.2</span> Key Points</h3>
<ul>
<li><p>The style of a ggplot graph can be changed using the <code>theme()</code> function.</p></li>
<li><p>The <code>ggthemes</code> package adds additional themes.</p></li>
<li><p>The <code>ggrepel</code> package includes a geometry that repels text labels, ensuring they do not overlap with each other: <code>geom_text_repel()</code>.</p></li>
</ul></section><section id="code-adding-themes" class="level3" data-number="3.8.3"><h3 data-number="3.8.3" class="anchored" data-anchor-id="code-adding-themes">
<span class="header-section-number">3.8.3</span> Code: Adding themes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="co" style="color: #5E5E5E;"># theme used for graphs in the textbook and course</span></span>
<span id="cb47-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb47-3"><span class="fu" style="color: #4758AB;">ds_theme_set</span>()</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="co" style="color: #5E5E5E;"># themes from ggthemes</span></span>
<span id="cb48-2"><span class="fu" style="color: #4758AB;">library</span>(ggthemes)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">theme_economist</span>()    <span class="co" style="color: #5E5E5E;"># style of the Economist magazine</span></span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">theme_fivethirtyeight</span>()    <span class="co" style="color: #5E5E5E;"># style of the FiveThirtyEight website</span></span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-putting-it-all-together-to-assemble-the-plot" class="level3" data-number="3.8.4"><h3 data-number="3.8.4" class="anchored" data-anchor-id="code-putting-it-all-together-to-assemble-the-plot">
<span class="header-section-number">3.8.4</span> Code: Putting it all together to assemble the plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><span class="co" style="color: #5E5E5E;"># load libraries</span></span>
<span id="cb51-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb51-3"><span class="fu" style="color: #4758AB;">library</span>(ggrepel)</span>
<span id="cb51-4"><span class="fu" style="color: #4758AB;">library</span>(ggthemes)</span>
<span id="cb51-5"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb51-6"><span class="fu" style="color: #4758AB;">data</span>(murders)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="co" style="color: #5E5E5E;"># define the intercept</span></span>
<span id="cb52-2">r <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb52-3">    <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb52-4">    .<span class="sc" style="color: #5E5E5E;">$</span>rate</span>
<span id="cb52-5">    </span>
<span id="cb52-6"><span class="co" style="color: #5E5E5E;"># make the plot, combining all elements</span></span>
<span id="cb52-7">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb52-8">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span>, total, <span class="at" style="color: #657422;">label =</span> abb)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-9">    <span class="fu" style="color: #4758AB;">geom_abline</span>(<span class="at" style="color: #657422;">intercept =</span> <span class="fu" style="color: #4758AB;">log10</span>(r), <span class="at" style="color: #657422;">lty =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"darkgrey"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-10">    <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">col =</span> region), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">3</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-11">    <span class="fu" style="color: #4758AB;">geom_text_repel</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-12">    <span class="fu" style="color: #4758AB;">scale_x_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-13">    <span class="fu" style="color: #4758AB;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-14">    <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">"Population in millions (log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-15">    <span class="fu" style="color: #4758AB;">ylab</span>(<span class="st" style="color: #20794D;">"Total number of murders (log scale)"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-16">    <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"US Gun Murders in 2010"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-17">    <span class="fu" style="color: #4758AB;">scale_color_discrete</span>(<span class="at" style="color: #657422;">name =</span> <span class="st" style="color: #20794D;">"Region"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb52-18">    <span class="fu" style="color: #4758AB;">theme_economist</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="other-examples" class="level2" data-number="3.9"><h2 data-number="3.9" class="anchored" data-anchor-id="other-examples">
<span class="header-section-number">3.9</span> Other Examples</h2>
<section id="textbook-links-2" class="level3" data-number="3.9.1"><h3 data-number="3.9.1" class="anchored" data-anchor-id="textbook-links-2">
<span class="header-section-number">3.9.1</span> Textbook links:</h3>
<ul>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/distributions.html#histograms-1">Textbook section on histograms</a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/distributions.html#density-plots">Textbook section on density plots</a></p></li>
<li><p><a href="http://rafalab.dfci.harvard.edu/dsbook/ggplot2.html#grids-of-plots">Textbook section on grids of plots</a></p></li>
</ul></section><section id="key-points-14" class="level3" data-number="3.9.2"><h3 data-number="3.9.2" class="anchored" data-anchor-id="key-points-14">
<span class="header-section-number">3.9.2</span> Key points</h3>
<ul>
<li><p><code>geom_histogram()</code> creates a histogram. Use the <strong>binwidth</strong> argument to change the width of bins, the fill argument to change the bar fill color, and the col argument to change bar outline color.</p></li>
<li><p><code>geom_density()</code> creates smooth density plots. Change the fill color of the plot with the fill argument.</p></li>
<li><p><code>geom_qq()</code> creates a quantile-quantile plot. This geometry requires the sample argument. By default, the data are compared to a standard normal distribution with a mean of 0 and standard deviation of 1. This can be changed with the dparams argument, or the sample data can be scaled.</p></li>
<li><p>Plots can be arranged adjacent to each other using the <code>grid.arrange()</code> function from the <strong>gridExtra</strong> package. First, create the plots and save them to objects (p1, p2, …). Then pass the plot objects to <code>grid.arrange()</code>.</p></li>
</ul></section><section id="code-histograms-in-ggplot2" class="level3" data-number="3.9.3"><h3 data-number="3.9.3" class="anchored" data-anchor-id="code-histograms-in-ggplot2">
<span class="header-section-number">3.9.3</span> Code: Histograms in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb53-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb53-3"><span class="fu" style="color: #4758AB;">data</span>(heights)</span>
<span id="cb53-4"></span>
<span id="cb53-5"><span class="co" style="color: #5E5E5E;"># define p</span></span>
<span id="cb53-6">p <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb53-7">  <span class="fu" style="color: #4758AB;">filter</span>(sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Male"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb53-8">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x=</span>height))</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="co" style="color: #5E5E5E;"># basic histograms</span></span>
<span id="cb54-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>() <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"binwidth is default"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"binwidth is 1"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-42-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><span class="co" style="color: #5E5E5E;"># histogram with blue fill, black outline, labels and title</span></span>
<span id="cb57-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">fill =</span><span class="st" style="color: #20794D;">"blue"</span>, <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb57-3">  <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">"Male heights in inches"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb57-4">  <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"histogram"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-42-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-smooth-density-plots-in-ggplot2" class="level3" data-number="3.9.4"><h3 data-number="3.9.4" class="anchored" data-anchor-id="code-smooth-density-plots-in-ggplot2">
<span class="header-section-number">3.9.4</span> Code: Smooth density plots in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_density</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"blue"</span>, <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">"red"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb59-2">  <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">"Male heights in inches"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb59-3">  <span class="fu" style="color: #4758AB;">ylab</span>(<span class="st" style="color: #20794D;">"proportion of Male heights"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb59-4">  <span class="fu" style="color: #4758AB;">ggtitle</span>(<span class="st" style="color: #20794D;">"Male heights distribution"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-quantile-quantile-plots-in-ggplot2" class="level3" data-number="3.9.5"><h3 data-number="3.9.5" class="anchored" data-anchor-id="code-quantile-quantile-plots-in-ggplot2">
<span class="header-section-number">3.9.5</span> Code: Quantile-quantile plots in ggplot2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><span class="co" style="color: #5E5E5E;"># basic QQ-plot</span></span>
<span id="cb60-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Male"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb60-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">sample =</span> height))</span>
<span id="cb60-4">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_qq</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><span class="co" style="color: #5E5E5E;"># QQ-plot against a normal distribution with same mean/sd as data</span></span>
<span id="cb61-2">params <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb61-3">  <span class="fu" style="color: #4758AB;">filter</span>(sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Male"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb61-4">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">mean =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">sd =</span> <span class="fu" style="color: #4758AB;">sd</span>(height))</span>
<span id="cb61-5">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_qq</span>(<span class="at" style="color: #657422;">dparams =</span> params) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb61-6">  <span class="fu" style="color: #4758AB;">geom_abline</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-44-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><span class="co" style="color: #5E5E5E;"># QQ-plot of scaled data against the standard normal distribution</span></span>
<span id="cb62-2">heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb62-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">sample =</span> <span class="fu" style="color: #4758AB;">scale</span>(height))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb62-4">  <span class="fu" style="color: #4758AB;">geom_qq</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb62-5">  <span class="fu" style="color: #4758AB;">geom_abline</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-44-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><span class="co" style="color: #5E5E5E;"># define plots p1, p2, p3</span></span>
<span id="cb63-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Male"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="at" style="color: #657422;">x =</span> height))</span>
<span id="cb63-3">p1 <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"blue"</span>, <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">"black"</span>)</span>
<span id="cb63-4">p2 <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">2</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"blue"</span>, <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">"black"</span>)</span>
<span id="cb63-5">p3 <span class="ot" style="color: #003B4F;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">3</span>, <span class="at" style="color: #657422;">fill =</span> <span class="st" style="color: #20794D;">"blue"</span>, <span class="at" style="color: #657422;">col =</span> <span class="st" style="color: #20794D;">"black"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><span class="co" style="color: #5E5E5E;"># arrange plots next to each other in 1 row, 3 columns</span></span>
<span id="cb64-2"><span class="fu" style="color: #4758AB;">library</span>(gridExtra)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><span class="fu" style="color: #4758AB;">grid.arrange</span>(p1, p2, p3, <span class="at" style="color: #657422;">ncol =</span> <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section></section><section id="gapminder" class="level1 page-columns page-full" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Gapminder</h1>
<section id="overview-2" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="overview-2">
<span class="header-section-number">4.1</span> Overview</h2>
<p>After completing Gapminder, you will: - understand how Hans Rosling and the Gapminder Foundation use effective data visualization to convey data-based trends.</p>
<ul>
<li><p>be able to apply the <strong>ggplot2</strong> techniques from the previous section to answer questions using data.</p></li>
<li><p>understand how fixed scales across plots can ease comparisons.</p></li>
<li><p>be able to modify graphs to improve data visualization.</p></li>
</ul></section><section id="introduction-to-gapminder" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="introduction-to-gapminder">
<span class="header-section-number">4.2</span> Introduction to Gapminder</h2>
<p>Case study: Trends in World Health and Economics</p>
<p>Data Source form Gapminder</p>
<p>We will use this data to answer the following questions about World Health and Economics: - Is it still fair to consider the world as divided into the West and the developing world? - Has income inequality across countries worsened over the last 40 years?</p>
</section><section id="gapminder-dataset" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="gapminder-dataset">
<span class="header-section-number">4.3</span> Gapminder Dataset</h2>
<section id="key-points-15" class="level3" data-number="4.3.1"><h3 data-number="4.3.1" class="anchored" data-anchor-id="key-points-15">
<span class="header-section-number">4.3.1</span> Key Points</h3>
<ul>
<li><p>A selection of world health and economics statistics from the Gapminder project can be found in the <code>dslabs</code> package as data(gapminder).</p></li>
<li><p>Most people have <strong>misconceptions</strong> about world health and economics, which can be addressed by considering real data.</p></li>
</ul></section><section id="code-5" class="level3" data-number="4.3.2"><h3 data-number="4.3.2" class="anchored" data-anchor-id="code-5">
<span class="header-section-number">4.3.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb66" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb66-2"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"gapminder"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><span class="fu" style="color: #4758AB;">head</span>(gapminder)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              country year infant_mortality life_expectancy fertility
1             Albania 1960           115.40           62.87      6.19
2             Algeria 1960           148.20           47.50      7.65
3              Angola 1960           208.00           35.98      7.32
4 Antigua and Barbuda 1960               NA           62.97      4.43
5           Argentina 1960            59.87           65.39      3.11
6             Armenia 1960               NA           66.86      4.55
  population          gdp continent          region
1    1636054           NA    Europe Southern Europe
2   11124892  13828152297    Africa Northern Africa
3    5270844           NA    Africa   Middle Africa
4      54681           NA  Americas       Caribbean
5   20619075 108322326649  Americas   South America
6    1867396           NA      Asia    Western Asia</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><span class="fu" style="color: #4758AB;">names</span>(gapminder)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"          "year"             "infant_mortality" "life_expectancy" 
[5] "fertility"        "population"       "gdp"              "continent"       
[9] "region"          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb71-2">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2015</span> <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Sri Lanka"</span>, <span class="st" style="color: #20794D;">"Turkey"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb71-3">  <span class="fu" style="color: #4758AB;">select</span>(country, infant_mortality)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country infant_mortality
1 Sri Lanka              8.4
2    Turkey             11.6</code></pre>
</div>
</div>
</section></section><section id="life-expectancy-and-fertility-rates" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="life-expectancy-and-fertility-rates">
<span class="header-section-number">4.4</span> Life Expectancy and Fertility Rates</h2>
<section id="key-points-16" class="level3" data-number="4.4.1"><h3 data-number="4.4.1" class="anchored" data-anchor-id="key-points-16">
<span class="header-section-number">4.4.1</span> Key Points</h3>
<ul>
<li>
<p>A prevalent worldview is that the world is divided into two groups of countries:</p>
<ul>
<li><p>Western world: high life expectancy, low fertility rate</p></li>
<li><p>Developing world: lower life expectancy, higher fertility rate</p></li>
</ul>
</li>
<li><p>Gapminder data can be used to evaluate the validity of this view.</p></li>
<li><p>A scatterplot of life expectancy versus fertility rate in 1962 suggests that this viewpoint was grounded in reality 50 years ago. Is it still the case today?</p></li>
</ul></section><section id="code-6" class="level3" data-number="4.4.2"><h3 data-number="4.4.2" class="anchored" data-anchor-id="code-6">
<span class="header-section-number">4.4.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="co" style="color: #5E5E5E;"># basic scatterplot of life expectancy versus fertility</span></span>
<span id="cb73-2"><span class="fu" style="color: #4758AB;">ds_theme_set</span>() <span class="co" style="color: #5E5E5E;"># set plot theme</span></span>
<span id="cb73-3"><span class="fu" style="color: #4758AB;">filter</span>(gapminder, year <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">1962</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb73-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(fertility, life_expectancy)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb73-5">  <span class="fu" style="color: #4758AB;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><span class="co" style="color: #5E5E5E;"># add color as continent</span></span>
<span id="cb74-2"><span class="fu" style="color: #4758AB;">filter</span>(gapminder, year <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">1962</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb74-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(fertility, life_expectancy, <span class="at" style="color: #657422;">color =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb74-4">  <span class="fu" style="color: #4758AB;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-51-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="faceting" class="level2 page-columns page-full" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="faceting">
<span class="header-section-number">4.5</span> Faceting</h2>
<section id="key-points-17" class="level3 page-columns page-full" data-number="4.5.1"><h3 data-number="4.5.1" class="anchored" data-anchor-id="key-points-17">
<span class="header-section-number">4.5.1</span> Key Points</h3>
<ul>
<li><p>Faceting <strong>makes multiple side-by-side plots stratified by some variable</strong>. This is a way to ease comparisons.</p></li>
<li><p>The <code>facet_grid()</code> function allows <em>faceting by up to two variables</em>, with rows faceted by one variable and columns faceted by the other variable. To facet by only one variable, use the dot operator as the other variable.</p></li>
<li><p>The <code>facet_wrap()</code> function <em>facets by one variable and automatically wraps the series of plots</em> so they have readable dimensions.</p></li>
<li><p>Faceting keeps the axes fixed across all plots, easing comparisons between plots.</p></li>
<li><p>The data suggest that the developing versus Western world view no longer makes sense in 2012.</p></li>
</ul>
<div class="page-columns page-full"><p> </p><div class="no-row-height column-margin column-container"><span class="">ggplot2-<a href="https://blog.csdn.net/tanzuozhev/article/details/51112177">分面(facet) 一页多图</a></span><span class="">数据可视化章节学习<a href="https://zhuanlan.zhihu.com/p/31044450">facet</a></span></div></div>
</section><section id="code-7" class="level3" data-number="4.5.2"><h3 data-number="4.5.2" class="anchored" data-anchor-id="code-7">
<span class="header-section-number">4.5.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><span class="co" style="color: #5E5E5E;"># facet by continent and year</span></span>
<span id="cb75-2"><span class="fu" style="color: #4758AB;">filter</span>(gapminder, year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1962</span>, <span class="dv" style="color: #AD0000;">2012</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb75-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(fertility, life_expectancy, <span class="at" style="color: #657422;">col =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb75-4">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb75-5">  <span class="fu" style="color: #4758AB;">facet_grid</span>(continent <span class="sc" style="color: #5E5E5E;">~</span> year)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><span class="co" style="color: #5E5E5E;"># facet by year only </span></span>
<span id="cb76-2"><span class="fu" style="color: #4758AB;">filter</span>(gapminder, year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1962</span>, <span class="dv" style="color: #AD0000;">2012</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb76-3">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(fertility, life_expectancy, <span class="at" style="color: #657422;">col =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb76-4">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb76-5">  <span class="fu" style="color: #4758AB;">facet_grid</span>(. <span class="sc" style="color: #5E5E5E;">~</span> year)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-52-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb77" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><span class="co" style="color: #5E5E5E;"># facet by year, plots wrapped onto multiple rows</span></span>
<span id="cb77-2">years <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1962</span>, <span class="dv" style="color: #AD0000;">1980</span>, <span class="dv" style="color: #AD0000;">1990</span>, <span class="dv" style="color: #AD0000;">2000</span>, <span class="dv" style="color: #AD0000;">2012</span>)</span>
<span id="cb77-3">continents <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Europ"</span>, <span class="st" style="color: #20794D;">"Asia"</span>)</span>
<span id="cb77-4">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb77-5">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> years <span class="sc" style="color: #5E5E5E;">&amp;</span> continent <span class="sc" style="color: #5E5E5E;">%in%</span> continent) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb77-6">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(fertility, life_expectancy, <span class="at" style="color: #657422;">col =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb77-7">  <span class="fu" style="color: #4758AB;">geom_point</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb77-8">  <span class="fu" style="color: #4758AB;">facet_wrap</span>(. <span class="sc" style="color: #5E5E5E;">~</span> year)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-52-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="time-series-plots" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="time-series-plots">
<span class="header-section-number">4.6</span> Time Series Plots</h2>
<section id="key-points-18" class="level3" data-number="4.6.1"><h3 data-number="4.6.1" class="anchored" data-anchor-id="key-points-18">
<span class="header-section-number">4.6.1</span> Key Points</h3>
<ul>
<li><p>Time series plots have time on the <em>x-axis</em> and a variable of interest on the <em>y-axis</em>.</p></li>
<li><p>The <code>geom_line()</code> geometry connects adjacent data points to form a continuous line. A line plot is appropriate when points are regularly spaced, densely packed and from a single data series.</p></li>
<li><p>You can plot multiple lines on the same graph. Remember to group or color by a variable so that the lines are plotted independently.</p></li>
<li><p>Labeling is usually preferred over legends. However, legends are easier to make and appear by default. Add a label with <code>geom_text()</code>, specifying the coordinates where the label should appear on the graph.</p></li>
</ul></section><section id="code-single-time-series" class="level3" data-number="4.6.2"><h3 data-number="4.6.2" class="anchored" data-anchor-id="code-single-time-series">
<span class="header-section-number">4.6.2</span> Code: Single Time Series</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb78" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><span class="co" style="color: #5E5E5E;"># scatterplot of US fertility by year</span></span>
<span id="cb78-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb78-3">  <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"United States"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb78-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, fertility)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb78-5">  <span class="fu" style="color: #4758AB;">geom_point</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb79" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><span class="co" style="color: #5E5E5E;"># line plot of US fertility by year</span></span>
<span id="cb79-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb79-3">  <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"United States"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb79-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, fertility)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb79-5">  <span class="fu" style="color: #4758AB;">geom_line</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-53-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-multiple-time-series" class="level3" data-number="4.6.3"><h3 data-number="4.6.3" class="anchored" data-anchor-id="code-multiple-time-series">
<span class="header-section-number">4.6.3</span> Code: Multiple Time Series</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb80" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><span class="co" style="color: #5E5E5E;"># line plot fertility time series for two countries- only one line (incorrect)</span></span>
<span id="cb80-2">countries <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"South Korea"</span>, <span class="st" style="color: #20794D;">"Germany"</span>)</span>
<span id="cb80-3">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">%in%</span> countries) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb80-4">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, fertility)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb80-5">    <span class="fu" style="color: #4758AB;">geom_line</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb81" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><span class="co" style="color: #5E5E5E;"># line plot fertility time series for two countries - one line per country</span></span>
<span id="cb81-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">%in%</span> countries) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb81-3">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, fertility, <span class="at" style="color: #657422;">group =</span> country)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb81-4">    <span class="fu" style="color: #4758AB;">geom_line</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-54-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb82" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><span class="co" style="color: #5E5E5E;"># fertility time series for two countries - lines colored by country</span></span>
<span id="cb82-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">%in%</span> countries) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb82-3">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, fertility, <span class="at" style="color: #657422;">col =</span> country)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb82-4">    <span class="fu" style="color: #4758AB;">geom_line</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-54-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-adding-text-labels-to-a-plot" class="level3" data-number="4.6.4"><h3 data-number="4.6.4" class="anchored" data-anchor-id="code-adding-text-labels-to-a-plot">
<span class="header-section-number">4.6.4</span> Code: Adding text labels to a plot</h3>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>labels data frame as the data to ensure where to start label text</strong> <img src="https://stats-r.com/series/Data Visualization/https:/raw.githubusercontent.com/NING3739/my-personal-website/main/geom_text.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><span class="co" style="color: #5E5E5E;"># life expectancy time series - lines colored by country and labeled, no legend</span></span>
<span id="cb83-2">labels <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">country =</span> countries, <span class="at" style="color: #657422;">x =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1975</span>, <span class="dv" style="color: #AD0000;">1965</span>), <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">60</span>, <span class="dv" style="color: #AD0000;">72</span>))</span>
<span id="cb83-3">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(country <span class="sc" style="color: #5E5E5E;">%in%</span> countries) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb83-4">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(year, life_expectancy, <span class="at" style="color: #657422;">col =</span> country)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb83-5">    <span class="fu" style="color: #4758AB;">geom_line</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb83-6">    <span class="fu" style="color: #4758AB;">geom_text</span>(<span class="at" style="color: #657422;">data =</span> labels, <span class="fu" style="color: #4758AB;">aes</span>(x, y, <span class="at" style="color: #657422;">label =</span> country), <span class="at" style="color: #657422;">size =</span> <span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb83-7">    <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">legend.position =</span> <span class="st" style="color: #20794D;">"none"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="transformations" class="level2" data-number="4.7"><h2 data-number="4.7" class="anchored" data-anchor-id="transformations">
<span class="header-section-number">4.7</span> Transformations</h2>
<section id="key-points-19" class="level3" data-number="4.7.1"><h3 data-number="4.7.1" class="anchored" data-anchor-id="key-points-19">
<span class="header-section-number">4.7.1</span> Key Points</h3>
<ul>
<li><p>We use GDP data to compute income in US dollars per day, adjusted for inflation.</p></li>
<li><p>Log transformations covert multiplicative changes into additive changes.</p></li>
<li><p>common transformations are the log base 2 transformation and the log base 10 transformation. The choice of base depends on the range of the data. The natural log is not recommended for visualization because it is difficult to interpret.</p></li>
<li><p>The mode of a distribution is the value with the highest frequency. The mode of a normal distribution is the average. A distribution can have multiple local modes.</p></li>
<li><p>There are two ways to use log transformations in plots: transform the data before plotting or transform the axes of the plot. Log scales have the advantage of showing the original values as axis labels, while log transformed values ease interpretation of intermediate values between labels.</p></li>
<li><p>Scale the x-axis using <code>scale_x_continuous()</code> or <code>scale_x_log10()</code> layers in ggplot2. Similar functions exist for the y-axis.</p></li>
<li><p>In 1970, income distribution is bimodal, consistent with the dichotomous Western versus developing worldview.</p></li>
</ul></section><section id="code-8" class="level3" data-number="4.7.2"><h3 data-number="4.7.2" class="anchored" data-anchor-id="code-8">
<span class="header-section-number">4.7.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb84" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><span class="co" style="color: #5E5E5E;"># add dollars per day variable</span></span>
<span id="cb84-2">gapminder <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb84-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">dollars_per_day =</span> gdp<span class="sc" style="color: #5E5E5E;">/</span>population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">365</span>)</span>
<span id="cb84-4"></span>
<span id="cb84-5"><span class="co" style="color: #5E5E5E;"># histogram of dollars per day</span></span>
<span id="cb84-6">past_year <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1970</span></span>
<span id="cb84-7">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb84-8">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb84-9">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb84-10">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb85" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><span class="co" style="color: #5E5E5E;"># repeat histogram with log2 scaled data</span></span>
<span id="cb85-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb85-3">    <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb85-4">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(<span class="fu" style="color: #4758AB;">log2</span>(dollars_per_day))) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb85-5">    <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-56-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb86" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><span class="co" style="color: #5E5E5E;"># repeat histogram with log2 scaled x-axis</span></span>
<span id="cb86-2">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb86-3">    <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb86-4">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb86-5">    <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb86-6">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-56-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="stratify-and-boxplot" class="level2" data-number="4.8"><h2 data-number="4.8" class="anchored" data-anchor-id="stratify-and-boxplot">
<span class="header-section-number">4.8</span> Stratify and Boxplot</h2>
<section id="key-points-20" class="level3" data-number="4.8.1"><h3 data-number="4.8.1" class="anchored" data-anchor-id="key-points-20">
<span class="header-section-number">4.8.1</span> Key Points</h3>
<ul>
<li><p>Make boxplots stratified by a categorical variable using the <code>geom_boxplot()</code> geometry.</p></li>
<li><p>Rotate axis labels by changing the theme through <code>element_text()</code>. You can change the angle and justification of the text labels.</p></li>
<li><p>Consider ordering your factors by a meaningful value with the <code>reorder</code> function, which changes the order of factor levels based on a related numeric vector. This is a way to ease comparisons.</p></li>
<li><p>Show the data by adding data points to the boxplot with a <code>geom_point</code> layer. This adds information beyond the five-number summary to your plot, but too many data points it can obfuscate your message.</p></li>
</ul></section><section id="code-boxplot-of-gdp-by-region" class="level3" data-number="4.8.2"><h3 data-number="4.8.2" class="anchored" data-anchor-id="code-boxplot-of-gdp-by-region">
<span class="header-section-number">4.8.2</span> Code: Boxplot of GDP by region</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb87" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><span class="co" style="color: #5E5E5E;"># add dollars per day variable</span></span>
<span id="cb87-2">gapminder <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb87-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">dollars_per_day =</span> gdp<span class="sc" style="color: #5E5E5E;">/</span>population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">365</span>)</span>
<span id="cb87-4"></span>
<span id="cb87-5"><span class="co" style="color: #5E5E5E;"># number of regions</span></span>
<span id="cb87-6"><span class="fu" style="color: #4758AB;">length</span>(<span class="fu" style="color: #4758AB;">levels</span>(gapminder<span class="sc" style="color: #5E5E5E;">$</span>region))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><span class="co" style="color: #5E5E5E;"># boxplot of GDP by region in 1970</span></span>
<span id="cb89-2">past_year <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1970</span></span>
<span id="cb89-3">p <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb89-4">     <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb89-5">     <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(region, dollars_per_day))</span>
<span id="cb89-6">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_boxplot</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb90" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><span class="co" style="color: #5E5E5E;"># roation name on x-axis</span></span>
<span id="cb90-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_boxplot</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb90-3">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">angle =</span> <span class="dv" style="color: #AD0000;">90</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-57-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-the-reorder-function" class="level3" data-number="4.8.3"><h3 data-number="4.8.3" class="anchored" data-anchor-id="code-the-reorder-function">
<span class="header-section-number">4.8.3</span> Code: The reorder function</h3>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://r-graph-gallery.com/267-reorder-a-variable-in-ggplot2.html">Reorder a variable with ggplot2</a></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><span class="co" style="color: #5E5E5E;"># by default, factor order is alphabetical</span></span>
<span id="cb91-2">fac <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">factor</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Asia"</span>, <span class="st" style="color: #20794D;">"Asia"</span>, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"West"</span>))</span>
<span id="cb91-3"><span class="fu" style="color: #4758AB;">levels</span>(fac)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Asia" "West"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><span class="co" style="color: #5E5E5E;"># reorder factor by the category means</span></span>
<span id="cb93-2">value <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">10</span>, <span class="dv" style="color: #AD0000;">11</span>, <span class="dv" style="color: #AD0000;">12</span>, <span class="dv" style="color: #AD0000;">6</span>, <span class="dv" style="color: #AD0000;">4</span>)</span>
<span id="cb93-3">fac <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">reorder</span>(fac, value, <span class="at" style="color: #657422;">FUN =</span> mean)</span>
<span id="cb93-4"><span class="fu" style="color: #4758AB;">levels</span>(fac)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "West" "Asia"</code></pre>
</div>
</div>
</section><section id="code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data" class="level3" data-number="4.8.4"><h3 data-number="4.8.4" class="anchored" data-anchor-id="code-enhanced-boxplot-ordered-by-median-income-scaled-and-showing-data">
<span class="header-section-number">4.8.4</span> Code: Enhanced boxplot ordered by median income, scaled, and showing data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb95" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><span class="co" style="color: #5E5E5E;"># reorder by median income and color by continent </span></span>
<span id="cb95-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb95-3">    <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb95-4">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">region =</span> <span class="fu" style="color: #4758AB;">reorder</span>(region, dollars_per_day, <span class="at" style="color: #657422;">FUN =</span> median)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span>  <span class="co" style="color: #5E5E5E;"># reorder</span></span>
<span id="cb95-5">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(region, dollars_per_day, <span class="at" style="color: #657422;">fill =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span> <span class="co" style="color: #5E5E5E;"># color by continent </span></span>
<span id="cb95-6">    <span class="fu" style="color: #4758AB;">geom_boxplot</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb95-7">    <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">angle =</span> <span class="dv" style="color: #AD0000;">90</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb95-8">    <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">""</span>)</span>
<span id="cb95-9">p</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb96" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><span class="co" style="color: #5E5E5E;"># log2 scale y-axis</span></span>
<span id="cb96-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-59-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb97" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><span class="co" style="color: #5E5E5E;"># add data points</span></span>
<span id="cb97-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_point</span>(<span class="at" style="color: #657422;">show.legend =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-59-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="comparing-distributions" class="level2" data-number="4.9"><h2 data-number="4.9" class="anchored" data-anchor-id="comparing-distributions">
<span class="header-section-number">4.9</span> Comparing Distributions</h2>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://blog.csdn.net/woodcorpse/article/details/80494605">intersect(交集);union(并集);setdiff(找不同);setequal(判断相同)</a></p>
</div>
</div>
<section id="key-points-21" class="level3" data-number="4.9.1"><h3 data-number="4.9.1" class="anchored" data-anchor-id="key-points-21">
<span class="header-section-number">4.9.1</span> Key Points</h3>
<ul>
<li>Use <code>intersect</code> to find the overlap between two vectors.</li>
<li>To make boxplots where grouped variables are adjacaent, color the boxplot by a factor instead of faceting by that factor. This is a way to ease comparisions.</li>
<li>The data suggest that the income gap between rich and poor countries has narrowed, not expended.</li>
</ul></section><section id="code-histogram-of-income-in-west-versus-developing-world-1970-and-2010" class="level3" data-number="4.9.2"><h3 data-number="4.9.2" class="anchored" data-anchor-id="code-histogram-of-income-in-west-versus-developing-world-1970-and-2010">
<span class="header-section-number">4.9.2</span> Code: Histogram of income in West versus developing world, 1970 and 2010</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><span class="co" style="color: #5E5E5E;"># add dollars per day variable and define past year</span></span>
<span id="cb98-2">gapminder <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb98-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">dollars_per_day =</span> gdp<span class="sc" style="color: #5E5E5E;">/</span>population<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">365</span>)</span>
<span id="cb98-4">past_year <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1970</span></span>
<span id="cb98-5"></span>
<span id="cb98-6"><span class="co" style="color: #5E5E5E;"># define Western countries</span></span>
<span id="cb98-7">west <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Western Europe"</span>, <span class="st" style="color: #20794D;">"Northern Europe"</span>, <span class="st" style="color: #20794D;">"Southern Europe"</span>, <span class="st" style="color: #20794D;">"Northern America"</span>, <span class="st" style="color: #20794D;">"Australia and New Zealand"</span>)</span>
<span id="cb98-8"></span>
<span id="cb98-9"><span class="co" style="color: #5E5E5E;"># facet by West vs Devloping </span></span>
<span id="cb98-10">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb98-11">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb98-12">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(region <span class="sc" style="color: #5E5E5E;">%in%</span> west, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"Developing"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb98-13">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb98-14">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb98-15">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb98-16">  <span class="fu" style="color: #4758AB;">facet_grid</span>(. <span class="sc" style="color: #5E5E5E;">~</span>group)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb99" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><span class="co" style="color: #5E5E5E;"># facet by West/Developing and year</span></span>
<span id="cb99-2">present_year <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">2010</span></span>
<span id="cb99-3">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb99-4">    <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(past_year, present_year) <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(gdp)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb99-5">    <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(region <span class="sc" style="color: #5E5E5E;">%in%</span> west, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"Developing"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb99-6">    <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb99-7">    <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb99-8">    <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb99-9">    <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> group)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-60-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-income-distribution-of-west-verseus-developing-world-only-countries-with-data" class="level3" data-number="4.9.3"><h3 data-number="4.9.3" class="anchored" data-anchor-id="code-income-distribution-of-west-verseus-developing-world-only-countries-with-data">
<span class="header-section-number">4.9.3</span> Code: Income distribution of West verseus Developing world, only countries with data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb100" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><span class="co" style="color: #5E5E5E;"># define countries that have data available in both years</span></span>
<span id="cb100-2">country_list_1 <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb100-3">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> .<span class="sc" style="color: #5E5E5E;">$</span>country</span>
<span id="cb100-4"></span>
<span id="cb100-5">country_list_2 <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb100-6">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> present_year <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> .<span class="sc" style="color: #5E5E5E;">$</span>country</span>
<span id="cb100-7"></span>
<span id="cb100-8">country_list <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">intersect</span>(country_list_1, country_list_2)</span>
<span id="cb100-9"></span>
<span id="cb100-10"><span class="co" style="color: #5E5E5E;"># make histogram including only countries with data availabe in both years</span></span>
<span id="cb100-11">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb100-12">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(past_year, present_year) <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="co" style="color: #5E5E5E;"># keep only selected countries</span></span>
<span id="cb100-13">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(region <span class="sc" style="color: #5E5E5E;">%in%</span> west, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"Developing"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb100-14">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb100-15">  <span class="fu" style="color: #4758AB;">geom_histogram</span>(<span class="at" style="color: #657422;">binwidth =</span> <span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">color =</span> <span class="st" style="color: #20794D;">"black"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb100-16">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb100-17">  <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> group)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010" class="level3" data-number="4.9.4"><h3 data-number="4.9.4" class="anchored" data-anchor-id="code-boxplots-of-income-in-west-versus-developing-world-1970-and-2010">
<span class="header-section-number">4.9.4</span> Code: Boxplots of income in West versus Developing world, 1970 and 2010</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb101" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1">p <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb101-2">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(past_year, present_year) <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb101-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">region =</span> <span class="fu" style="color: #4758AB;">reorder</span>(region, dollars_per_day, <span class="at" style="color: #657422;">FUN =</span> median)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb101-4">  <span class="fu" style="color: #4758AB;">ggplot</span>() <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb101-5">  <span class="fu" style="color: #4758AB;">theme</span>(<span class="at" style="color: #657422;">axis.text.x =</span> <span class="fu" style="color: #4758AB;">element_text</span>(<span class="at" style="color: #657422;">angle =</span> <span class="dv" style="color: #AD0000;">90</span>, <span class="at" style="color: #657422;">hjust =</span> <span class="dv" style="color: #AD0000;">1</span>)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb101-6">  <span class="fu" style="color: #4758AB;">xlab</span>(<span class="st" style="color: #20794D;">""</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">scale_y_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) </span>
<span id="cb101-7"></span>
<span id="cb101-8">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(region, dollars_per_day, <span class="at" style="color: #657422;">fill =</span> continent)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb101-9">  <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> .)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb102" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><span class="co" style="color: #5E5E5E;"># arrange matching boxplots next to each other, colored by year</span></span>
<span id="cb102-2">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_boxplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(region, dollars_per_day, <span class="at" style="color: #657422;">fill =</span> <span class="fu" style="color: #4758AB;">factor</span>(year)))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-62-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="density-plots" class="level2" data-number="4.10"><h2 data-number="4.10" class="anchored" data-anchor-id="density-plots">
<span class="header-section-number">4.10</span> Density Plots</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p><a href="https://bookdown.org/zhongyufei/Data-Handling-in-R/dplyr-functions.html"><strong>dplyr处理数据时常用的的函数</strong></a></p></li>
<li><p><a href="https://verytoolz.com/blog/4341dd7810/"><strong>在 R Dplyr 包中使用 case when 语句</strong></a></p></li>
</ul>
</div>
</div>
<section id="key-points-22" class="level3" data-number="4.10.1"><h3 data-number="4.10.1" class="anchored" data-anchor-id="key-points-22">
<span class="header-section-number">4.10.1</span> Key Points</h3>
<ul>
<li><p>Change the y-axis of density plots to variable counts using <code>..count..</code> as the y argument.</p></li>
<li><p>The <code>case_when()</code> function defines a factor whose levels are defined by a variety of logical operations to group data.</p></li>
<li><p>Plot stacked density plots using <code>position="stack"</code>.</p></li>
<li><p>Define a weight aesthetic mapping to change the relative weights of density plots-for example, this allow weighting of plots by population rather than number of countries.</p></li>
</ul></section><section id="code-faceted-smooth-density-plots" class="level3" data-number="4.10.2"><h3 data-number="4.10.2" class="anchored" data-anchor-id="code-faceted-smooth-density-plots">
<span class="header-section-number">4.10.2</span> Code: Faceted smooth density plots</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb103" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><span class="co" style="color: #5E5E5E;"># see the code below the previous video for variable definitions</span></span>
<span id="cb103-2"></span>
<span id="cb103-3"><span class="co" style="color: #5E5E5E;"># smooth density plots - area under each curve adds to 1</span></span>
<span id="cb103-4">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb103-5">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb103-6">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(region <span class="sc" style="color: #5E5E5E;">%in%</span> west, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"Developing"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">group_by</span>(group) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb103-7">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">n =</span> <span class="fu" style="color: #4758AB;">n</span>()) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> knitr<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">kable</span>()</span></code></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead><tr class="header">
<th style="text-align: left;">group</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Developing</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: left;">West</td>
<td style="text-align: right;">21</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb104" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><span class="co" style="color: #5E5E5E;"># smooth density plots - variable counts on y-axis</span></span>
<span id="cb104-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb104-3">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">==</span> past_year <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb104-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">ifelse</span>(region <span class="sc" style="color: #5E5E5E;">%in%</span> west, <span class="st" style="color: #20794D;">"West"</span>, <span class="st" style="color: #20794D;">"Developing"</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb104-5">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day, <span class="at" style="color: #657422;">y =</span> ..count.., <span class="at" style="color: #657422;">fill =</span> group)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb104-6">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>)</span>
<span id="cb104-7">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">bw =</span> <span class="fl" style="color: #AD0000;">0.75</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> .)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-add-new-region-group-with-case_when" class="level3" data-number="4.10.3"><h3 data-number="4.10.3" class="anchored" data-anchor-id="code-add-new-region-group-with-case_when">
<span class="header-section-number">4.10.3</span> Code: Add new region group with case_when</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb105" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><span class="co" style="color: #5E5E5E;"># add group as a factor, grouping regions</span></span>
<span id="cb105-2">gapminder <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb105-3">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">case_when</span>(</span>
<span id="cb105-4">    .<span class="sc" style="color: #5E5E5E;">$</span>region <span class="sc" style="color: #5E5E5E;">%in%</span> west <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"West"</span>,</span>
<span id="cb105-5">    .<span class="sc" style="color: #5E5E5E;">$</span>region <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Eastern Asia"</span>, <span class="st" style="color: #20794D;">"South-Eastern Asia"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"East Asia"</span>, </span>
<span id="cb105-6">    .<span class="sc" style="color: #5E5E5E;">$</span>region <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Caribbean"</span>, <span class="st" style="color: #20794D;">"Central America"</span>, <span class="st" style="color: #20794D;">"South America"</span>) <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Latin America"</span>,</span>
<span id="cb105-7">    .<span class="sc" style="color: #5E5E5E;">$</span>continent <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Africa"</span> <span class="sc" style="color: #5E5E5E;">&amp;</span> .<span class="sc" style="color: #5E5E5E;">$</span>region <span class="sc" style="color: #5E5E5E;">!=</span> <span class="st" style="color: #20794D;">"Northern Africa"</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Sub-Saharan Africa"</span>, <span class="cn" style="color: #8f5902;">TRUE</span> <span class="sc" style="color: #5E5E5E;">~</span> <span class="st" style="color: #20794D;">"Others"</span>))</span>
<span id="cb105-8"></span>
<span id="cb105-9"><span class="co" style="color: #5E5E5E;"># reorder factor levels</span></span>
<span id="cb105-10">gapminder <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb105-11">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">group =</span> <span class="fu" style="color: #4758AB;">factor</span>(group, <span class="at" style="color: #657422;">levels =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Others"</span>, <span class="st" style="color: #20794D;">"Latin America"</span>, <span class="st" style="color: #20794D;">"East Asia"</span>, <span class="st" style="color: #20794D;">"Sub-Saharan Africa"</span>, <span class="st" style="color: #20794D;">"West"</span>)))</span></code></pre></div>
</div>
</section><section id="code-stacked-density-plot" class="level3" data-number="4.10.4"><h3 data-number="4.10.4" class="anchored" data-anchor-id="code-stacked-density-plot">
<span class="header-section-number">4.10.4</span> Code: Stacked density plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb106" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><span class="co" style="color: #5E5E5E;"># note you must redefine p with the new gapminder object first</span></span>
<span id="cb106-2">p <span class="ot" style="color: #003B4F;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb106-3">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(past_year, present_year) <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb106-4">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day, <span class="at" style="color: #657422;">fill =</span> group)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb106-5">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>)</span>
<span id="cb106-6"></span>
<span id="cb106-7"><span class="co" style="color: #5E5E5E;"># stacked density plot</span></span>
<span id="cb106-8">p <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">bw =</span> <span class="fl" style="color: #AD0000;">0.75</span>, <span class="at" style="color: #657422;">position =</span> <span class="st" style="color: #20794D;">"stack"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb106-9">  <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> .)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="code-weighted-stacked-density-plot" class="level3" data-number="4.10.5"><h3 data-number="4.10.5" class="anchored" data-anchor-id="code-weighted-stacked-density-plot">
<span class="header-section-number">4.10.5</span> Code: Weighted stacked density plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb107" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1">gapminder <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb107-2">  <span class="fu" style="color: #4758AB;">filter</span>(year <span class="sc" style="color: #5E5E5E;">%in%</span> <span class="fu" style="color: #4758AB;">c</span>(past_year, present_year) <span class="sc" style="color: #5E5E5E;">&amp;</span> country <span class="sc" style="color: #5E5E5E;">%in%</span> country_list) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb107-3">  <span class="fu" style="color: #4758AB;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb107-4">  <span class="fu" style="color: #4758AB;">mutate</span>(<span class="at" style="color: #657422;">weight =</span> population<span class="sc" style="color: #5E5E5E;">/</span><span class="fu" style="color: #4758AB;">sum</span>(population<span class="sc" style="color: #5E5E5E;">*</span><span class="dv" style="color: #AD0000;">2</span>)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb107-5">  <span class="fu" style="color: #4758AB;">ungroup</span>() <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb107-6">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(dollars_per_day, <span class="at" style="color: #657422;">fill =</span> group, <span class="at" style="color: #657422;">weight =</span> weight)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb107-7">  <span class="fu" style="color: #4758AB;">scale_x_continuous</span>(<span class="at" style="color: #657422;">trans =</span> <span class="st" style="color: #20794D;">"log2"</span>) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb107-8">  <span class="fu" style="color: #4758AB;">geom_density</span>(<span class="at" style="color: #657422;">alpha =</span> <span class="fl" style="color: #AD0000;">0.2</span>, <span class="at" style="color: #657422;">bw =</span> <span class="fl" style="color: #AD0000;">0.75</span>, <span class="at" style="color: #657422;">position =</span> <span class="st" style="color: #20794D;">"stack"</span>) <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">facet_grid</span>(year <span class="sc" style="color: #5E5E5E;">~</span> .)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/Data Visualization/about_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="ecological-fallacy" class="level2" data-number="4.11"><h2 data-number="4.11" class="anchored" data-anchor-id="ecological-fallacy">
<span class="header-section-number">4.11</span> Ecological Fallacy</h2>
<section id="key-points-23" class="level3" data-number="4.11.1"><h3 data-number="4.11.1" class="anchored" data-anchor-id="key-points-23">
<span class="header-section-number">4.11.1</span> Key Points</h3>


</section></section></section> ]]></description>
  <category>Data Science</category>
  <category>Data Visualization</category>
  <guid>https://stats-r.com/series/Data Visualization/about.html</guid>
  <pubDate>Wed, 30 Nov 2022 11:00:00 GMT</pubDate>
  <media:content url="https://images.unsplash.com/photo-1565106430482-8f6e74349ca1?ixlib=rb-1.2.1&amp;q=80&amp;cs=tinysrgb&amp;fm=jpg&amp;crop=entropy&amp;w=3600" medium="image"/>
</item>
<item>
  <title>R Basic</title>
  <link>https://stats-r.com/series/R Basic/about.html</link>
  <description><![CDATA[ <section id="r-basics-functions-and-data-types" class="level1 page-columns page-full" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> R Basics, Functions, and Data Types</h1>
<p>In this section, I will introduce you to R Basics, Functions, and Datatypes.</p>
<p>In this part, you will learn to:</p>
<ul>
<li><p>Appreciate the rationale for data analysis using R.</p></li>
<li><p>Define objects and perform basic arithmetic and logical operations.</p></li>
<li><p>Use pre-defined functions to perform operations on objects.</p></li>
<li><p>Distinguish between various data types.</p></li>
</ul>
<section id="insralling-r" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="insralling-r">
<span class="header-section-number">1.1</span> Insralling R</h2>
<section id="why-install-r-and-rstudio" class="level3" data-number="1.1.1"><h3 data-number="1.1.1" class="anchored" data-anchor-id="why-install-r-and-rstudio">
<span class="header-section-number">1.1.1</span> why Install R and RStudio?</h3>
<ul>
<li><p>To complete this course, you should install R locally on your computer. We also highly recommend installing RStudio, an integrated development environment (IDE), to edit and test your code.</p></li>
<li><p>In order to complete some assignments in the course, you will need your own copy of R. You may also find it helpful to follow along with the course videos in R or RStudio.</p></li>
<li><p>Both R and RStudio can be freely downloaded and installed.</p></li>
</ul></section><section id="key-points" class="level3" data-number="1.1.2"><h3 data-number="1.1.2" class="anchored" data-anchor-id="key-points">
<span class="header-section-number">1.1.2</span> Key Points</h3>
<ul>
<li><p>You need to install R before using RStudio, which is an interactive desktop environment.</p></li>
<li><p>Select base subdirectory in <a href="https://cran.r-project.org/">CRAN</a> and click download.</p></li>
<li><p>Select all default choices in the installation process.</p></li>
<li><p>We recommend selecting English for language to help you better follow the course.</p></li>
<li><p>You can try using the R console, but for productivity purposes, we can switch to RStudio.</p></li>
</ul></section></section><section id="installing-rstudio" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="installing-rstudio">
<span class="header-section-number">1.2</span> Installing Rstudio</h2>
<section id="key-points-1" class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="key-points-1">
<span class="header-section-number">1.2.1</span> Key Points</h3>
<ul>
<li><p>You can download the latest version of RStudio at the <a href="https://posit.co/download/rstudio-desktop/">RStudio website</a>.</p></li>
<li><p>The free desktop version is more than enough for this course.</p></li>
<li><p>Make sure to choose the version for your own operating system.</p></li>
<li><p>Choose “Yes” for all defaults in the installation process.</p></li>
</ul></section></section><section id="using-rstudio-for-the-first-time" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="using-rstudio-for-the-first-time">
<span class="header-section-number">1.3</span> Using RStudio for the First Time</h2>
<section id="key-points-2" class="level3" data-number="1.3.1"><h3 data-number="1.3.1" class="anchored" data-anchor-id="key-points-2">
<span class="header-section-number">1.3.1</span> Key Points</h3>
<ul>
<li><p>The free desktop version of RStudio can be launched like other applications on your computer.</p></li>
<li><p>When you start RStudio for the first time, you will see three panes. The left pane shows you the R console. On the right, the top pane includes three tabs, while the bottom pane shows you five tabs, file, plots, packages, help, and viewer.</p></li>
<li><p>You can download a cheat sheet of the most common RStudio commands directly from RStudio by going to “Help -&gt; Cheat Sheets -&gt; RStudio IDE Cheat Sheet.”</p></li>
</ul></section></section><section id="getting-started-using-r" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="getting-started-using-r">
<span class="header-section-number">1.4</span> Getting Started Using R</h2>
<section id="key-points-3" class="level3" data-number="1.4.1"><h3 data-number="1.4.1" class="anchored" data-anchor-id="key-points-3">
<span class="header-section-number">1.4.1</span> Key Points:</h3>
<ul>
<li><p>R was developed by statisticians and data analysts as an interactive environment for data analysis.</p></li>
<li>
<p>Some of the advantages of R are that:</p>
<ul>
<li><p>it is free and open source;</p></li>
<li><p>it has the capability to save scripts;</p></li>
<li><p>there are numerous resources for learning;</p></li>
<li><p>it is easy for developers to share software implementation.</p></li>
</ul>
</li>
<li><p>Expressions are evaluated in the R console when you type the expression into the console and hit Return.</p></li>
<li><p>A great advantage of R over point and click analysis software is that you can save your work as scripts.</p></li>
<li><p>“Base R” is what you get after you first install R. Additional components are available via packages.</p></li>
</ul></section><section id="some-addition-notes" class="level3" data-number="1.4.2"><h3 data-number="1.4.2" class="anchored" data-anchor-id="some-addition-notes">
<span class="header-section-number">1.4.2</span> Some Addition Notes</h3>
<p>In RStudio, you can upload additional functions and datasets in addition to the base R functions and datasets that come with R automatically. A common way to do this is by installing packages, which often contain extra functions and datasets. For this course, there are a few packages you will need to install. You only need to install each individual package once, but after you install a package, there are other steps you have to do whenever you want to use something from that package.</p>
<p>To install a package, you use the code <code>install.packages("package_name", dependencies = TRUE)</code>.</p>
<p>To load a package, you use the code <code><a href="https://rdrr.io/r/base/library.html">library(package_name)</a></code>.</p>
<p>If you also want to use a dataset from a package you have loaded, then you use the code <code>data(dataset_name)</code>. To see the dataset, you can take the additional step of <code>View(dataset_name)</code>.</p>
</section></section><section id="installing-packahes" class="level2" data-number="1.5"><h2 data-number="1.5" class="anchored" data-anchor-id="installing-packahes">
<span class="header-section-number">1.5</span> Installing Packahes</h2>
<section id="note" class="level3" data-number="1.5.1"><h3 data-number="1.5.1" class="anchored" data-anchor-id="note">
<span class="header-section-number">1.5.1</span> Note</h3>
<p>We recommend installing packages through RStudio, rather than through R, and the code provided works in both R and RStudio. Once a package has been installed, it is technically added onto R (even if you use RStudio to install it), which is why packages must be re-installed when R is updated. However, since we use R through RStudio, any packages that are installed can be used in both R and RStudio, regardless of which one was used to install the packages.</p>
</section><section id="key-points-4" class="level3" data-number="1.5.2"><h3 data-number="1.5.2" class="anchored" data-anchor-id="key-points-4">
<span class="header-section-number">1.5.2</span> key points</h3>
<ul>
<li>The base version of R is quite minimal, but you can supplement its functions by installing additional packages.</li>
<li>We will be using <strong>tidyverse</strong> and <strong>dslabs</strong> packages for this course.</li>
<li>Install packages from R console: <code>install.packages("pkg_name")</code>
</li>
<li>Install packages from RStudio interface: Tools &gt; Install Packages (allows autocomplete)</li>
<li>Once installed, we can use <code><a href="https://rdrr.io/r/base/library.html">library(pkg_name)</a></code> to load a package each time we want to use it</li>
</ul></section><section id="additional-notes" class="level3" data-number="1.5.3"><h3 data-number="1.5.3" class="anchored" data-anchor-id="additional-notes">
<span class="header-section-number">1.5.3</span> Additional Notes</h3>
<ul>
<li>If you try to load a package with <code><a href="https://rdrr.io/r/base/library.html">library(blahblah)</a></code> and get a message like <em>Error in library(blahblah) : there is no package called ‘blahblah’</em>, it means you need to install that package first with <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>.</li>
<li>On the DataCamp interface we use for some problems in the course, you cannot install additional packages. The problems have been set up with the packages you need to solve them.</li>
<li>You can add the option <code>dependencies = TRUE</code>, which tells R to install the other things that are necessary for the package or packages to run smoothly. Otherwise, you may need to install additional packages to unlock the full functionality of a package.</li>
<li>Throughout the course materials and textbook, package names are in <strong>bold</strong>.</li>
</ul></section><section id="code" class="level3" data-number="1.5.4"><h3 data-number="1.5.4" class="anchored" data-anchor-id="code">
<span class="header-section-number">1.5.4</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;">install.packages</span>(<span class="st" style="color: #20794D;">"dslabs"</span>) <span class="co" style="color: #5E5E5E;"># to install a single package</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;">install.packages</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"tidyverse"</span>, <span class="st" style="color: #20794D;">"dslabs"</span>)) <span class="co" style="color: #5E5E5E;"># to install two packages at the same time</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">installed.packages</span>() <span class="co" style="color: #5E5E5E;"># to see the list of all installed packages</span></span></code></pre></div>
</div>
</section></section><section id="running-commands-while-editing-scripts" class="level2" data-number="1.6"><h2 data-number="1.6" class="anchored" data-anchor-id="running-commands-while-editing-scripts">
<span class="header-section-number">1.6</span> Running Commands While Editing Scripts</h2>
<section id="key-points-5" class="level3" data-number="1.6.1"><h3 data-number="1.6.1" class="anchored" data-anchor-id="key-points-5">
<span class="header-section-number">1.6.1</span> Key Points</h3>
<ul>
<li><p>RStudio has many useful features as an R editor, including the ability to <strong>test code</strong> easily as we write scripts and several <strong>auto complete features</strong>.</p></li>
<li>
<p>Keyboard shortcuts:</p>
<ul>
<li>
<strong>Save a script</strong>: Ctrl+S on Windows and Command+S on Mac</li>
<li>
<strong>Run an entire script</strong>: Ctrl+Shift+Enter on Windows Command+Shift+Return on Mac, or click “Source” on the editor pane</li>
<li>
<strong>Run a single line of script</strong>: Ctrl+Enter on Windows and Command+Return on Mac while the cursor is pointing to that line, or select the chunk and click “run”</li>
<li>
<strong>Open a new script</strong>: Ctrl+Shift+N on Windows and Command+Shift+N on Mac</li>
</ul>
</li>
</ul></section><section id="code-1" class="level3" data-number="1.6.2"><h3 data-number="1.6.2" class="anchored" data-anchor-id="code-1">
<span class="header-section-number">1.6.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># Here is an example how to running commends while editing scripts</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb2-5"></span>
<span id="cb2-6">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;">ggplot</span>(<span class="fu" style="color: #4758AB;">aes</span>(population, total, <span class="at" style="color: #657422;">label=</span>abb, <span class="at" style="color: #657422;">color=</span>region)) <span class="sc" style="color: #5E5E5E;">+</span></span>
<span id="cb2-8">  <span class="fu" style="color: #4758AB;">geom_label</span>()</span></code></pre></div>
</div>
</section></section><section id="r-basics" class="level2" data-number="1.7"><h2 data-number="1.7" class="anchored" data-anchor-id="r-basics">
<span class="header-section-number">1.7</span> R Basics</h2>
<section id="key-points-6" class="level3" data-number="1.7.1"><h3 data-number="1.7.1" class="anchored">
<span class="header-section-number">1.7.1</span> Key Points</h3>
<ul>
<li><p>To define a variable, we may use the assignment symbol, <code>&lt;-</code>.</p></li>
<li>
<h2 id="there-are-two-ways-to-see-the-value-stored-in-a-variable" data-number="1.8" class="anchored" data-anchor-id="key-points-6">
<span class="header-section-number">1.8</span> There are two ways to see the value stored in a variable:</h2>
<pre><code>(1) type the variable name into the console and hit Return;</code></pre>
<ul>
<li><ol start="2" type="1">
<li>use the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function by typing <code>print(variable_name)</code> and hitting Return.</li>
</ol></li>
</ul>
</li>
<li><p>Objects are things that are stored in named containers in R. They can be variables, functions, etc.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/ls.html">ls()</a></code> function shows the names of the objects saved in your work space.</p></li>
</ul></section><section id="code-example-to-solving-the-equation-x2-x---1-0" class="level3" data-number="1.8.1"><h3 data-number="1.8.1" class="anchored" data-anchor-id="code-example-to-solving-the-equation-x2-x---1-0">
<span class="header-section-number">1.8.1</span> Code: example to solving the equation <img src="https://latex.codecogs.com/png.latex?x%5E%7B2%7D%20+%20x%20-%201%20=%200">
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;"># assigning values to variables</span></span>
<span id="cb4-2">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span></span>
<span id="cb4-3">b <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span></span>
<span id="cb4-4">c <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span></span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="co" style="color: #5E5E5E;"># solving the quadratic equation</span></span>
<span id="cb4-7">(<span class="sc" style="color: #5E5E5E;">-</span>b <span class="sc" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">sqrt</span>(b<span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">2</span> <span class="sc" style="color: #5E5E5E;">-</span> <span class="dv" style="color: #AD0000;">4</span><span class="sc" style="color: #5E5E5E;">*</span>a<span class="sc" style="color: #5E5E5E;">*</span>c))<span class="sc" style="color: #5E5E5E;">/</span>(<span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">*</span>a)</span>
<span id="cb4-8">(<span class="sc" style="color: #5E5E5E;">-</span>b <span class="sc" style="color: #5E5E5E;">-</span> <span class="fu" style="color: #4758AB;">sqrt</span>(b<span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">2</span> <span class="sc" style="color: #5E5E5E;">-</span> <span class="dv" style="color: #AD0000;">4</span><span class="sc" style="color: #5E5E5E;">*</span>a<span class="sc" style="color: #5E5E5E;">*</span>c))<span class="sc" style="color: #5E5E5E;">/</span>(<span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">*</span>a)</span></code></pre></div>
</div>
</section></section><section id="function" class="level2" data-number="1.9"><h2 data-number="1.9" class="anchored" data-anchor-id="function">
<span class="header-section-number">1.9</span> Function</h2>
<section id="key-points-7" class="level3" data-number="1.9.1"><h3 data-number="1.9.1" class="anchored" data-anchor-id="key-points-7">
<span class="header-section-number">1.9.1</span> Key Points</h3>
<ul>
<li><p>In general, to evaluate a function we need to use <strong>parentheses</strong>. If we type a function without parenthesis, R shows us the code for the function. Most functions also require an argument, that is, something to be written inside the parenthesis.</p></li>
<li><p>To access <strong>help</strong> files, we may use the help function, <code>help(function_name)</code>, or write the question mark followed by the function name, ?function_name.</p></li>
<li><p>The help file shows you the arguments the function is expecting, some of which are required and some are optional. If an argument is optional, a default value is assigned with the equal sign. The <code><a href="https://rdrr.io/r/base/args.html">args()</a></code> function also shows the arguments a function needs.</p></li>
<li><p>To specify arguments, we use the equals sign. If no argument name is used, R assumes you’re entering arguments in the order shown in the help file.</p></li>
<li><p>Creating and saving a script makes code much easier to execute.</p></li>
<li><p>To make your code more readable, <strong>use intuitive variable names and include comments</strong> (using the <strong>“#”</strong> symbol) to remind yourself why you wrote a particular line of code.</p></li>
</ul></section></section><section id="data-types" class="level2 page-columns page-full" data-number="1.10"><h2 data-number="1.10" class="anchored" data-anchor-id="data-types">
<span class="header-section-number">1.10</span> Data Types</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The code <code>data("dataset_name")</code> and <code>data(dataset_name)</code> do the same thing. The code will work regardless of whether the quotes are present. It is a bit faster to leave out the quotes (as we do in the Code at the bottom of this page), so that is usually what we recommend, but it is your choice.</p>
</div>
</div>
<section id="key-points-8" class="level3 page-columns page-full" data-number="1.10.1"><h3 data-number="1.10.1" class="anchored" data-anchor-id="key-points-8">
<span class="header-section-number">1.10.1</span> Key Points</h3>
<ul>
<li><p>The function <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> helps us determine the type of an object.</p></li>
<li><p><strong>Data frames</strong> can be thought of as tables with rows representing observations and columns representing different variables.</p></li>
<li><p>To access data from columns of a data frame, we use the dollar sign symbol, <code>$</code>, which is called the accessor.</p></li>
<li><p>A <strong>vector</strong> is an object consisting of several entries and can be a <strong>numeric vector</strong>, a <strong>character vector</strong>, or a <strong>logical vector</strong>.</p></li>
<li><p>We <strong>use quotes</strong> to distinguish between variable names and character strings.</p></li>
<li><p>Factors are useful for storing categorical data, and are more memory efficient than storing characters.</p></li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Knowledge Extension
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output-display">
<div>
<p>
</p>
<pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">flowchart LR
  A{Data Type}---&gt; B[numeric]
  A{Data Type}---&gt;C[integer]
  A{Data Type} ---&gt;D[complex]
  A{Data Type}---&gt;E[character]
  A{Data Type}---&gt;F[logical]
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>

</div>
</div>
</div>
</div>
</div>
<div class="page-columns page-full"><p></p><div class="no-row-height column-margin column-container"><span class=""><strong>Explanation</strong>:<strong>Numeric</strong>: all real numbers with or without decimal values. e.g.&nbsp;1, 2, 8, 1.1.<strong>Integer(整数)</strong>: specifies real values without decimal points. we use the suffix<code>L</code> to specify integer data.<strong>Complex</strong>: specify purely imaginary values in R. We use the suffix <code>i</code> to specify the imaginary part. e.g.&nbsp;3 + 2i.<strong>Character</strong>:specify character or string values in a variable. <code>''</code> for character variables; <code>""</code> for string variables.<strong>Logical</strong>: is known as boolean data type. It can only have two values: <code>TRUE</code> and <code>FALSE</code></span></div></div>
</section><section id="code-2" class="level3" data-number="1.10.2"><h3 data-number="1.10.2" class="anchored" data-anchor-id="code-2">
<span class="header-section-number">1.10.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;"># loading the dslabs package and the murders dataset</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;"># determining that the murders dataset is of the "data frame" class</span></span>
<span id="cb5-6"><span class="fu" style="color: #4758AB;">class</span>(murders)</span>
<span id="cb5-7"><span class="co" style="color: #5E5E5E;"># finding out more about the structure of the object</span></span>
<span id="cb5-8"><span class="fu" style="color: #4758AB;">str</span>(murders)</span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;"># showing the first 6 lines of the dataset</span></span>
<span id="cb5-10"><span class="fu" style="color: #4758AB;">head</span>(murders)</span>
<span id="cb5-11"></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;"># using the accessor operator to obtain the population column</span></span>
<span id="cb5-13">murders<span class="sc" style="color: #5E5E5E;">$</span>population</span>
<span id="cb5-14"><span class="co" style="color: #5E5E5E;"># displaying the variable names in the murders dataset</span></span>
<span id="cb5-15"><span class="fu" style="color: #4758AB;">names</span>(murders)</span>
<span id="cb5-16"><span class="co" style="color: #5E5E5E;"># determining how many entries are in a vector</span></span>
<span id="cb5-17">pop <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>population</span>
<span id="cb5-18"><span class="fu" style="color: #4758AB;">length</span>(pop)</span>
<span id="cb5-19"><span class="co" style="color: #5E5E5E;"># vectors can be of class numeric and character</span></span>
<span id="cb5-20"><span class="fu" style="color: #4758AB;">class</span>(pop)</span>
<span id="cb5-21"><span class="fu" style="color: #4758AB;">class</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>state)</span>
<span id="cb5-22"></span>
<span id="cb5-23"><span class="co" style="color: #5E5E5E;"># logical vectors are either TRUE or FALSE</span></span>
<span id="cb5-24">z <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">3</span> <span class="sc" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2</span></span>
<span id="cb5-25">z</span>
<span id="cb5-26"><span class="fu" style="color: #4758AB;">class</span>(z)</span>
<span id="cb5-27"></span>
<span id="cb5-28"><span class="co" style="color: #5E5E5E;"># factors are another type of class</span></span>
<span id="cb5-29"><span class="fu" style="color: #4758AB;">class</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>region)</span>
<span id="cb5-30"><span class="co" style="color: #5E5E5E;"># obtaining the levels of a factor</span></span>
<span id="cb5-31"><span class="fu" style="color: #4758AB;">levels</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>region)</span></code></pre></div>
</div>
</section></section></section><section id="vectors-sorting" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Vectors, Sorting</h1>
<p>In this section, I will introduce you to vectors and functions such as sorting.</p>
<p>In Vectors, you will:</p>
<ul>
<li><p>Create numeric and character vectors.</p></li>
<li><p>Name the columns of a vector.</p></li>
<li><p>Generate numeric sequences.</p></li>
<li><p>Access specific elements or parts of a vector.</p></li>
<li><p>Coerce data into different data types as needed.</p></li>
</ul>
<p>In Sorting, you will:</p>
<ul>
<li><p>Sort vectors in ascending and descending order.</p></li>
<li><p>Extract the indices of the sorted elements from the original vector.</p></li>
<li><p>Find the maximum and minimum elements, as well as their indices, in a vector.</p></li>
<li><p>Rank the elements of a vector in increasing order.</p></li>
</ul>
<p>In Vector Arithmetic, you will:</p>
<ul>
<li><p>Perform arithmetic between a vector and a single number.</p></li>
<li><p>Perform arithmetic between two vectors of the same length.</p></li>
</ul>
<section id="vectors" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="vectors">
<span class="header-section-number">2.1</span> Vectors</h2>
<section id="key-points-9" class="level3" data-number="2.1.1"><h3 data-number="2.1.1" class="anchored" data-anchor-id="key-points-9">
<span class="header-section-number">2.1.1</span> Key points</h3>
<ul>
<li><p>The function c(), which stands for concatenate, is useful for creating vectors.</p></li>
<li><p>Another useful function for creating vectors is the seq() function, which generates sequences.</p></li>
<li><p>Subsetting lets us access specific parts of a vector by using square brackets to access elements of a vector.</p></li>
</ul></section><section id="code-3" class="level3" data-number="2.1.2"><h3 data-number="2.1.2" class="anchored" data-anchor-id="code-3">
<span class="header-section-number">2.1.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># We may create vectors of class numeric or character with the concatenate function</span></span>
<span id="cb6-2">codes <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">380</span>, <span class="dv" style="color: #AD0000;">124</span>, <span class="dv" style="color: #AD0000;">818</span>)</span>
<span id="cb6-3">country <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"italy"</span>, <span class="st" style="color: #20794D;">"canada"</span>, <span class="st" style="color: #20794D;">"egypt"</span>)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;"># We can also name the elements of a numeric vector</span></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;"># Note that the two lines of code below have the same result</span></span>
<span id="cb6-7">codes <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="at" style="color: #657422;">italy =</span> <span class="dv" style="color: #AD0000;">380</span>, <span class="at" style="color: #657422;">canada =</span> <span class="dv" style="color: #AD0000;">124</span>, <span class="at" style="color: #657422;">egypt =</span> <span class="dv" style="color: #AD0000;">818</span>)</span>
<span id="cb6-8">codes <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"italy"</span> <span class="ot" style="color: #003B4F;">=</span> <span class="dv" style="color: #AD0000;">380</span>, <span class="st" style="color: #20794D;">"canada"</span> <span class="ot" style="color: #003B4F;">=</span> <span class="dv" style="color: #AD0000;">124</span>, <span class="st" style="color: #20794D;">"egypt"</span> <span class="ot" style="color: #003B4F;">=</span> <span class="dv" style="color: #AD0000;">818</span>)</span>
<span id="cb6-9"></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;"># We can also name the elements of a numeric vector using the names() function</span></span>
<span id="cb6-11">codes <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">380</span>, <span class="dv" style="color: #AD0000;">124</span>, <span class="dv" style="color: #AD0000;">818</span>)</span>
<span id="cb6-12">country <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"italy"</span>,<span class="st" style="color: #20794D;">"canada"</span>,<span class="st" style="color: #20794D;">"egypt"</span>)</span>
<span id="cb6-13"><span class="fu" style="color: #4758AB;">names</span>(codes) <span class="ot" style="color: #003B4F;">&lt;-</span> country</span>
<span id="cb6-14"></span>
<span id="cb6-15"><span class="co" style="color: #5E5E5E;"># Using square brackets is useful for subsetting to access specific elements of a vector</span></span>
<span id="cb6-16">codes[<span class="dv" style="color: #AD0000;">2</span>]</span>
<span id="cb6-17">codes[<span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">3</span>)]</span>
<span id="cb6-18">codes[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">2</span>]</span>
<span id="cb6-19"></span>
<span id="cb6-20"><span class="co" style="color: #5E5E5E;"># If the entries of a vector are named, they may be accessed by referring to their name</span></span>
<span id="cb6-21">codes[<span class="st" style="color: #20794D;">"canada"</span>]</span>
<span id="cb6-22">codes[<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"egypt"</span>,<span class="st" style="color: #20794D;">"italy"</span>)]</span></code></pre></div>
</div>
</section></section><section id="vector-coercion" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="vector-coercion">
<span class="header-section-number">2.2</span> Vector Coercion</h2>
<section id="key-point" class="level3" data-number="2.2.1"><h3 data-number="2.2.1" class="anchored" data-anchor-id="key-point">
<span class="header-section-number">2.2.1</span> Key Point</h3>
<ul>
<li>In general, coercion is an attempt by R to be flexible with data types by guessing what was meant when an entry does not match the expected. For example, when defining x as</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1">    x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">1</span>, <span class="st" style="color: #20794D;">"canada"</span>, <span class="dv" style="color: #AD0000;">3</span>)</span></code></pre></div>
</div>
<p>R coerced the data into characters. It guessed that because you put a character string in the vector, you meant the 1 and 3 to actually be character strings, “1” and “3”.</p>
<ul>
<li><p>The function <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code> turns numbers into characters.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> turns characters into numbers.</p></li>
<li><p>In R, missing data is assigned the value <code>NA</code>.</p></li>
</ul></section><section id="question" class="level3" data-number="2.2.2"><h3 data-number="2.2.2" class="anchored" data-anchor-id="question">
<span class="header-section-number">2.2.2</span> Question</h3>
<ol type="1">
<li>class(3L) is integer ?</li>
<li>3L-3 equals 0 ?</li>
</ol></section></section><section id="sorting" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="sorting">
<span class="header-section-number">2.3</span> Sorting</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 19%">
<col style="width: 36%">
<col style="width: 35%">
</colgroup>
<tbody>
<tr class="odd">
<td>Original</td>
<td>Sort(按从小到大排列）</td>
<td>Order(Sort对应数字在原来数字排列中的顺序）</td>
<td>Rank(Original原来数字在Sort顺序中的排名）</td>
</tr>
<tr class="even">
<td>31</td>
<td>4</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="odd">
<td>4</td>
<td>15</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="even">
<td>15</td>
<td>31</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="odd">
<td>92</td>
<td>65</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="even">
<td>65</td>
<td>92</td>
<td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
<section id="key-points-10" class="level3" data-number="2.3.1"><h3 data-number="2.3.1" class="anchored" data-anchor-id="key-points-10">
<span class="header-section-number">2.3.1</span> Key Points</h3>
<ul>
<li><p>The function <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> sorts a vector in increasing order.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> produces the indices needed to obtain the sorted vector, e.g.&nbsp;a result of 2 3 1 5 4 means the sorted vector will be produced by listing the 2nd, 3rd, 1st, 5th, and then 4th item of the original vector.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/base/rank.html">rank()</a></code> gives us the ranks of the items in the original vector.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> returns the largest value, while <code><a href="https://rdrr.io/r/base/which.min.html">which.max()</a></code> returns the index of the largest value. The functions <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> and <code><a href="https://rdrr.io/r/base/which.min.html">which.min()</a></code> work similarly for minimum values.</p></li>
</ul></section><section id="code-4" class="level3" data-number="2.3.2"><h3 data-number="2.3.2" class="anchored" data-anchor-id="code-4">
<span class="header-section-number">2.3.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;">sort</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>total)</span>
<span id="cb8-4"></span>
<span id="cb8-5">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">31</span>, <span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">15</span>, <span class="dv" style="color: #AD0000;">92</span>, <span class="dv" style="color: #AD0000;">65</span>)</span>
<span id="cb8-6">x</span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;">sort</span>(x)    <span class="co" style="color: #5E5E5E;"># puts elements in order</span></span>
<span id="cb8-8"></span>
<span id="cb8-9">index <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">order</span>(x)    <span class="co" style="color: #5E5E5E;"># returns index that will put x in order</span></span>
<span id="cb8-10">x[index]    <span class="co" style="color: #5E5E5E;"># rearranging by this index puts elements in order</span></span>
<span id="cb8-11"><span class="fu" style="color: #4758AB;">order</span>(x)</span>
<span id="cb8-12"></span>
<span id="cb8-13">murders<span class="sc" style="color: #5E5E5E;">$</span>state[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">10</span>]</span>
<span id="cb8-14">murders<span class="sc" style="color: #5E5E5E;">$</span>abb[<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">10</span>]</span>
<span id="cb8-15"></span>
<span id="cb8-16">index <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">order</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>total)</span>
<span id="cb8-17">murders<span class="sc" style="color: #5E5E5E;">$</span>abb[index]    <span class="co" style="color: #5E5E5E;"># order abbreviations by total murders</span></span>
<span id="cb8-18"></span>
<span id="cb8-19"><span class="fu" style="color: #4758AB;">max</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>total)    <span class="co" style="color: #5E5E5E;"># highest number of total murders</span></span>
<span id="cb8-20">i_max <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">which.max</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>total)    <span class="co" style="color: #5E5E5E;"># index with highest number of murders</span></span>
<span id="cb8-21">murders<span class="sc" style="color: #5E5E5E;">$</span>state[i_max]    <span class="co" style="color: #5E5E5E;"># state name with highest number of total murders</span></span>
<span id="cb8-22"></span>
<span id="cb8-23">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">31</span>, <span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">15</span>, <span class="dv" style="color: #AD0000;">92</span>, <span class="dv" style="color: #AD0000;">65</span>)</span>
<span id="cb8-24">x</span>
<span id="cb8-25"><span class="fu" style="color: #4758AB;">rank</span>(x)    <span class="co" style="color: #5E5E5E;"># returns ranks (smallest to largest)</span></span></code></pre></div>
</div>
</section></section><section id="vector-arithmetic" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="vector-arithmetic">
<span class="header-section-number">2.4</span> Vector Arithmetic</h2>
<section id="key-point-1" class="level3" data-number="2.4.1"><h3 data-number="2.4.1" class="anchored" data-anchor-id="key-point-1">
<span class="header-section-number">2.4.1</span> Key Point</h3>
<ul>
<li>In R, arithmetic operation on vectors occur element-wise</li>
</ul></section><section id="code-5" class="level3" data-number="2.4.2"><h3 data-number="2.4.2" class="anchored" data-anchor-id="code-5">
<span class="header-section-number">2.4.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;"># The name of the state with the maximum population is found by doing the following</span></span>
<span id="cb9-2">murders<span class="sc" style="color: #5E5E5E;">$</span>state[<span class="fu" style="color: #4758AB;">which.max</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>population)]</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;"># how to obtain the murder rate</span></span>
<span id="cb9-5">murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>total <span class="sc" style="color: #5E5E5E;">/</span> murders<span class="sc" style="color: #5E5E5E;">$</span>population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span></span>
<span id="cb9-6"></span>
<span id="cb9-7"><span class="co" style="color: #5E5E5E;"># ordering the states by murder rate, in decreasing order</span></span>
<span id="cb9-8">murders<span class="sc" style="color: #5E5E5E;">$</span>state[<span class="fu" style="color: #4758AB;">order</span>(murder_rate, <span class="at" style="color: #657422;">decreasing=</span><span class="cn" style="color: #8f5902;">TRUE</span>)]</span></code></pre></div>
</div>
</section></section></section><section id="indexing-data-wrangling-plots" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Indexing, Data Wrangling, Plots</h1>
<p>In this section, I will introduce the R commands and techniques that help you wrangle, analyze, and visualize data.</p>
<p>In Indexing, you will: - Subset a vector based on properties of another vector.</p>
<ul>
<li><p>Use multiple logical operators to index vectors.</p></li>
<li><p>Extract the indices of vector elements satisfying one or more logical conditions.</p></li>
<li><p>Extract the indices of vector elements matching with another vector.</p></li>
<li><p>Determine which elements in one vector are present in another vector.</p></li>
</ul>
<p>In basic data wrangling, you will:</p>
<ul>
<li><p>Wrangle data tables using functions in the dplyr package.</p></li>
<li><p>Modify a data table by adding or changing columns.</p></li>
<li><p>Subset rows in a data table.</p></li>
<li><p>Subset columns in a data table.</p></li>
<li><p>Perform a series of operations using the pipe operator.</p></li>
<li><p>Create data frames.</p></li>
</ul>
<p>In basic plots, you will: - Plot data in scatter plots, box plots, and histograms.</p>
<p>In summarizing with dplyr, you will: - Use summarize() to facilitate summarizing data in dplyr.</p>
<ul>
<li><p>Learn about the dot placeholder.</p></li>
<li><p>Learn how to group and then summarize in dplyr.</p></li>
<li><p>Learn how to sort data tables in dplyr.</p></li>
</ul>
<p>In the rest section, you will: - Learn how to subset and summarize data using data.table.</p>
<ul>
<li>Learn how to sort data frames using data.table.</li>
</ul>
<section id="indexing" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="indexing">
<span class="header-section-number">3.1</span> Indexing</h2>
<section id="key-point-2" class="level3" data-number="3.1.1"><h3 data-number="3.1.1" class="anchored" data-anchor-id="key-point-2">
<span class="header-section-number">3.1.1</span> Key Point</h3>
<ul>
<li><p>We can use logicals to index vectors.</p></li>
<li><p>Using the function sum()on a logical vector returns the number of entries that are true.</p></li>
<li><p>The logical operator “&amp;” makes two logicals true only when they are both true.</p></li>
</ul></section><section id="code-6" class="level3" data-number="3.1.2"><h3 data-number="3.1.2" class="anchored" data-anchor-id="code-6">
<span class="header-section-number">3.1.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;"># defining murder rate as before</span></span>
<span id="cb10-2">murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>total <span class="sc" style="color: #5E5E5E;">/</span> murders<span class="sc" style="color: #5E5E5E;">$</span>population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;"># creating a logical vector that specifies if the murder rate in that state is less than or equal to 0.71</span></span>
<span id="cb10-4">index <span class="ot" style="color: #003B4F;">&lt;-</span> murder_rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">0.71</span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;"># determining which states have murder rates less than or equal to 0.71</span></span>
<span id="cb10-6">murders<span class="sc" style="color: #5E5E5E;">$</span>state[index]</span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;"># calculating how many states have a murder rate less than or equal to 0.71</span></span>
<span id="cb10-8"><span class="fu" style="color: #4758AB;">sum</span>(index)</span>
<span id="cb10-9"></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;"># creating the two logical vectors representing our conditions</span></span>
<span id="cb10-11">west <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>region <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"West"</span></span>
<span id="cb10-12">safe <span class="ot" style="color: #003B4F;">&lt;-</span> murder_rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="dv" style="color: #AD0000;">1</span></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;"># defining an index and identifying states with both conditions true</span></span>
<span id="cb10-14">index <span class="ot" style="color: #003B4F;">&lt;-</span> safe <span class="sc" style="color: #5E5E5E;">&amp;</span> west</span>
<span id="cb10-15">murders<span class="sc" style="color: #5E5E5E;">$</span>state[index]</span></code></pre></div>
</div>
</section></section><section id="indexing-functions" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="indexing-functions">
<span class="header-section-number">3.2</span> Indexing Functions</h2>
<section id="key-points-11" class="level3" data-number="3.2.1"><h3 data-number="3.2.1" class="anchored" data-anchor-id="key-points-11">
<span class="header-section-number">3.2.1</span> Key Points</h3>
<ul>
<li><p>The function <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> gives us the entries of a logical vector that are true.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/base/match.html">match()</a></code> looks for entries in a vector and returns the index needed to access them.</p></li>
<li><p>We use the function <code>%in%</code> if we want to know whether or not each element of a first vector is in a second vector.</p></li>
</ul></section><section id="code-7" class="level3" data-number="3.2.2"><h3 data-number="3.2.2" class="anchored" data-anchor-id="code-7">
<span class="header-section-number">3.2.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="cn" style="color: #8f5902;">FALSE</span>, <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="cn" style="color: #8f5902;">FALSE</span>, <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="cn" style="color: #8f5902;">FALSE</span>)</span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;">which</span>(x)    <span class="co" style="color: #5E5E5E;"># returns indices that are TRUE</span></span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;"># to determine the murder rate in Massachusetts we may do the following</span></span>
<span id="cb11-5">index <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">which</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>state <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Massachusetts"</span>)</span>
<span id="cb11-6">index</span>
<span id="cb11-7">murder_rate[index]</span>
<span id="cb11-8"></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;"># to obtain the indices and subsequent murder rates of New York, Florida, Texas, we do:</span></span>
<span id="cb11-10">index <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">match</span>(<span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"New York"</span>, <span class="st" style="color: #20794D;">"Florida"</span>, <span class="st" style="color: #20794D;">"Texas"</span>), murders<span class="sc" style="color: #5E5E5E;">$</span>state)</span>
<span id="cb11-11">index</span>
<span id="cb11-12">murders<span class="sc" style="color: #5E5E5E;">$</span>state[index]</span>
<span id="cb11-13">murder_rate[index]</span>
<span id="cb11-14"></span>
<span id="cb11-15">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"a"</span>, <span class="st" style="color: #20794D;">"b"</span>, <span class="st" style="color: #20794D;">"c"</span>, <span class="st" style="color: #20794D;">"d"</span>, <span class="st" style="color: #20794D;">"e"</span>)</span>
<span id="cb11-16">y <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"a"</span>, <span class="st" style="color: #20794D;">"d"</span>, <span class="st" style="color: #20794D;">"f"</span>)</span>
<span id="cb11-17">y <span class="sc" style="color: #5E5E5E;">%in%</span> x</span>
<span id="cb11-18"></span>
<span id="cb11-19"><span class="co" style="color: #5E5E5E;"># to see if Boston, Dakota, and Washington are states</span></span>
<span id="cb11-20"><span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"Boston"</span>, <span class="st" style="color: #20794D;">"Dakota"</span>, <span class="st" style="color: #20794D;">"Washington"</span>) <span class="sc" style="color: #5E5E5E;">%in%</span> murders<span class="sc" style="color: #5E5E5E;">$</span>state</span></code></pre></div>
</div>
</section></section><section id="basic-data-wrangling" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="basic-data-wrangling">
<span class="header-section-number">3.3</span> Basic Data Wrangling</h2>
<section id="key-points-12" class="level3" data-number="3.3.1"><h3 data-number="3.3.1" class="anchored" data-anchor-id="key-points-12">
<span class="header-section-number">3.3.1</span> Key Points</h3>
<ul>
<li><p>To change a data table by <strong>adding a new column</strong>, or changing an existing one, we use the <code>mutate()</code> function.</p></li>
<li><p>To <strong>filter the data</strong> by subsetting rows, we use the function <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>.</p></li>
<li><p>To subset the data by <strong>selecting specific columns</strong>, we use the <code>select()</code> function.</p></li>
<li><p>We can perform a series of operations by sending the results of one function to another function using the <strong>pipe operator</strong>, <code>%&gt;%</code>.</p></li>
</ul></section></section><section id="creating-data-frames" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="creating-data-frames">
<span class="header-section-number">3.4</span> Creating Data Frames</h2>
<section id="note-2" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="note-2">
<span class="header-section-number">3.4.1</span> Note</h3>
<p>The default settings in R have changed as of version 4.0, and it is no longer necessary to include the code <code>stringsAsFactors = FALSE</code> in order to keep strings as characters. Putting the entries in quotes, as in the example, is adequate to keep strings as characters. The <code>stringsAsFactors = FALSE</code> code is useful in certain other situations, but you do not need to include it when you create data frames in this manner.</p>
</section><section id="key-points-13" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="key-points-13">
<span class="header-section-number">3.4.2</span> Key Points</h3>
<ul>
<li><p>We can use the <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> function to create data frames.</p></li>
<li><p>Formerly, the <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> function turned characters into factors by default. To avoid this, we could utilize the <code>stringsAsFactors</code> argument and set it equal to false. As of R 4.0, it is no longer necessary to include the <code>stringsAsFactors</code> argument, because R no longer turns characters into factors by default.</p></li>
</ul></section><section id="code-8" class="level3" data-number="3.4.3"><h3 data-number="3.4.3" class="anchored" data-anchor-id="code-8">
<span class="header-section-number">3.4.3</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;"># creating a data frame with stringAsFactors = FALSE</span></span>
<span id="cb12-2">grades <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">names =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"John"</span>, <span class="st" style="color: #20794D;">"Juan"</span>, <span class="st" style="color: #20794D;">"Jean"</span>, <span class="st" style="color: #20794D;">"Yao"</span>), </span>
<span id="cb12-3">                     <span class="at" style="color: #657422;">exam_1 =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">95</span>, <span class="dv" style="color: #AD0000;">80</span>, <span class="dv" style="color: #AD0000;">90</span>, <span class="dv" style="color: #AD0000;">85</span>), </span>
<span id="cb12-4">                     <span class="at" style="color: #657422;">exam_2 =</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">90</span>, <span class="dv" style="color: #AD0000;">85</span>, <span class="dv" style="color: #AD0000;">85</span>, <span class="dv" style="color: #AD0000;">90</span>),</span>
<span id="cb12-5">                     <span class="at" style="color: #657422;">stringsAsFactors =</span> <span class="cn" style="color: #8f5902;">FALSE</span>)</span></code></pre></div>
</div>
</section></section><section id="basic-plots" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="basic-plots">
<span class="header-section-number">3.5</span> Basic Plots</h2>
<section id="key-points-14" class="level3" data-number="3.5.1"><h3 data-number="3.5.1" class="anchored" data-anchor-id="key-points-14">
<span class="header-section-number">3.5.1</span> Key Points</h3>
<ul>
<li><p>We can create a simple scatterplot using the function <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>.</p></li>
<li><p>Histograms are graphical summaries that give you a general overview of the types of values you have. In R, they can be produced using the <code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code> function.</p></li>
<li><p>Boxplots provide a more compact summary of a distribution than a histogram and are more useful for comparing distributions. They can be produced using the <code><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot()</a></code> function.</p></li>
</ul></section><section id="code-9" class="level3" data-number="3.5.2"><h3 data-number="3.5.2" class="anchored" data-anchor-id="code-9">
<span class="header-section-number">3.5.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb13-3"><span class="fu" style="color: #4758AB;">data</span>(<span class="st" style="color: #20794D;">"murders"</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;"># a simple scatterplot of total murders versus population</span></span>
<span id="cb14-2">x <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>population <span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">6</span></span>
<span id="cb14-3">y <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>total</span>
<span id="cb14-4"><span class="fu" style="color: #4758AB;">plot</span>(x, y)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/R Basic/about_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;"># a histogram of murder rates</span></span>
<span id="cb15-2">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span>)</span>
<span id="cb15-3"><span class="fu" style="color: #4758AB;">hist</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>rate)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/R Basic/about_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="co" style="color: #5E5E5E;"># boxplots of murder rates by region</span></span>
<span id="cb16-2"><span class="fu" style="color: #4758AB;">boxplot</span>(rate<span class="sc" style="color: #5E5E5E;">~</span>region, <span class="at" style="color: #657422;">data =</span> murders)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://stats-r.com/series/R Basic/about_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="the-summarize-function" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="the-summarize-function">
<span class="header-section-number">3.6</span> The summarize function</h2>
<section id="key-points-15" class="level3" data-number="3.6.1"><h3 data-number="3.6.1" class="anchored" data-anchor-id="key-points-15">
<span class="header-section-number">3.6.1</span> Key Points</h3>
<ul>
<li><p>Summarizing data is an important part of data analysis.</p></li>
<li><p>Some summary ststistics are the <strong>mean</strong>, <strong>median</strong>, and <strong>standard deviation</strong>.</p></li>
<li><p>The <code>summarize()</code> function from <strong>dplyr</strong> provides an easy way to compute summary statics.</p></li>
</ul></section><section id="code-10" class="level3" data-number="3.6.2"><h3 data-number="3.6.2" class="anchored" data-anchor-id="code-10">
<span class="header-section-number">3.6.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb17-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb17-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb17-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb17-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;"># minimum, median, and maximum murder rate for the states in the West region</span></span>
<span id="cb18-2">s <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;">filter</span>(region <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"West"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">minimum =</span> <span class="fu" style="color: #4758AB;">min</span>(rate), </span>
<span id="cb18-5">            <span class="at" style="color: #657422;">median =</span> <span class="fu" style="color: #4758AB;">median</span>(rate), </span>
<span id="cb18-6">            <span class="at" style="color: #657422;">maximum =</span> <span class="fu" style="color: #4758AB;">max</span>(rate))</span>
<span id="cb18-7">s</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   minimum   median  maximum
1 0.514592 1.292453 3.629527</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;"># accessing the components with the accessor $</span></span>
<span id="cb20-2">s<span class="sc" style="color: #5E5E5E;">$</span>median</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.292453</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1">s<span class="sc" style="color: #5E5E5E;">$</span>maximum</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.629527</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;"># average rate unadjusted by population size</span></span>
<span id="cb24-2"><span class="fu" style="color: #4758AB;">mean</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.779125</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;"># average rate adjusted by population size</span></span>
<span id="cb26-2">us_murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb26-3">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb26-4">us_murder_rate</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rate
1 3.034555</code></pre>
</div>
</div>
</section></section><section id="summarizing-with-more-than-one-value" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="summarizing-with-more-than-one-value">
<span class="header-section-number">3.7</span> Summarizing with more than one value</h2>
<section id="key-points-16" class="level3" data-number="3.7.1"><h3 data-number="3.7.1" class="anchored" data-anchor-id="key-points-16">
<span class="header-section-number">3.7.1</span> Key Points</h3>
<ul>
<li>The <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> function can be used to return the min, median, and max in a single line of code.</li>
</ul></section><section id="code-11" class="level3" data-number="3.7.2"><h3 data-number="3.7.2" class="anchored" data-anchor-id="code-11">
<span class="header-section-number">3.7.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb28-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb28-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb28-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb28-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><span class="co" style="color: #5E5E5E;"># minimum, median, and maximum murder rate for the states in the West region using quantile</span></span>
<span id="cb29-2"><span class="co" style="color: #5E5E5E;"># note that this returns a vector</span></span>
<span id="cb29-3">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb29-4">  <span class="fu" style="color: #4758AB;">filter</span>(region <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"West"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb29-5">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">range =</span> <span class="fu" style="color: #4758AB;">quantile</span>(rate, <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">0.5</span>, <span class="dv" style="color: #AD0000;">1</span>)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     range
1 0.514592
2 1.292453
3 3.629527</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="co" style="color: #5E5E5E;"># returning minimum, median, and maximum as a data frame</span></span>
<span id="cb31-2">my_quantile <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x){</span>
<span id="cb31-3">  r <span class="ot" style="color: #003B4F;">&lt;-</span>  <span class="fu" style="color: #4758AB;">quantile</span>(x, <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">0.5</span>, <span class="dv" style="color: #AD0000;">1</span>))</span>
<span id="cb31-4">  <span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">minimum =</span> r[<span class="dv" style="color: #AD0000;">1</span>], <span class="at" style="color: #657422;">median =</span> r[<span class="dv" style="color: #AD0000;">2</span>], <span class="at" style="color: #657422;">maximum =</span> r[<span class="dv" style="color: #AD0000;">3</span>]) </span>
<span id="cb31-5">}</span>
<span id="cb31-6">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb31-7">  <span class="fu" style="color: #4758AB;">filter</span>(region <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"West"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb31-8">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="fu" style="color: #4758AB;">my_quantile</span>(rate))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   minimum   median  maximum
1 0.514592 1.292453 3.629527</code></pre>
</div>
</div>
</section></section><section id="pull-to-access-to-columns" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="pull-to-access-to-columns">
<span class="header-section-number">3.8</span> Pull to access to columns</h2>
<section id="key-points-17" class="level3" data-number="3.8.1"><h3 data-number="3.8.1" class="anchored" data-anchor-id="key-points-17">
<span class="header-section-number">3.8.1</span> Key Points</h3>
<ul>
<li>The <code>pull()</code> function can be used to access values stored in data when using pipes: when a data object is piped that object and its columns can be accessed using the <code>pull()</code> function.</li>
</ul></section><section id="code-12" class="level3" data-number="3.8.2"><h3 data-number="3.8.2" class="anchored" data-anchor-id="code-12">
<span class="header-section-number">3.8.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb33-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb33-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb33-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb33-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="co" style="color: #5E5E5E;"># average rate adjusted by population size</span></span>
<span id="cb34-2">us_murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb34-3">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb34-4">us_murder_rate</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rate
1 3.034555</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="co" style="color: #5E5E5E;"># us_murder_rate is stored as a data frame</span></span>
<span id="cb36-2"><span class="fu" style="color: #4758AB;">class</span>(us_murder_rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;"># the pull function can return it as a numeric value</span></span>
<span id="cb38-2">us_murder_rate <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">pull</span>(rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.034555</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="co" style="color: #5E5E5E;"># using pull to save the number directly</span></span>
<span id="cb40-2">us_murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb40-3">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb40-4">  <span class="fu" style="color: #4758AB;">pull</span>(rate)</span>
<span id="cb40-5">us_murder_rate</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.034555</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="co" style="color: #5E5E5E;"># us_murder_rate is now stored as a number</span></span>
<span id="cb42-2"><span class="fu" style="color: #4758AB;">class</span>(us_murder_rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</section></section><section id="the-dot-placeholder" class="level2" data-number="3.9"><h2 data-number="3.9" class="anchored" data-anchor-id="the-dot-placeholder">
<span class="header-section-number">3.9</span> The dot placeholder</h2>
<section id="key-points-18" class="level3" data-number="3.9.1"><h3 data-number="3.9.1" class="anchored" data-anchor-id="key-points-18">
<span class="header-section-number">3.9.1</span> Key Points</h3>
<ul>
<li>The <code>dot (.)</code> can be thought of as a placeholder for the data being passed through the pipe.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb44-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb44-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb44-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb44-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="co" style="color: #5E5E5E;"># average rate adjusted by population size</span></span>
<span id="cb45-2">us_murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb45-3">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb45-4">us_murder_rate</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rate
1 3.034555</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><span class="co" style="color: #5E5E5E;"># using the dot to access the rate</span></span>
<span id="cb47-2">us_murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb47-3">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">rate =</span> <span class="fu" style="color: #4758AB;">sum</span>(total) <span class="sc" style="color: #5E5E5E;">/</span> <span class="fu" style="color: #4758AB;">sum</span>(population) <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb47-4">  .<span class="sc" style="color: #5E5E5E;">$</span>rate</span>
<span id="cb47-5">us_murder_rate</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.034555</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><span class="fu" style="color: #4758AB;">class</span>(us_murder_rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</section></section><section id="group-then-summarize" class="level2" data-number="3.10"><h2 data-number="3.10" class="anchored" data-anchor-id="group-then-summarize">
<span class="header-section-number">3.10</span> Group then summarize</h2>
<section id="key-points-19" class="level3" data-number="3.10.1"><h3 data-number="3.10.1" class="anchored" data-anchor-id="key-points-19">
<span class="header-section-number">3.10.1</span> Key Points</h3>
<ul>
<li><p>Splitting data into groups and then computing summaries for each group is a common operation in data exploration.</p></li>
<li><p>We can use the <strong>dplyr</strong> <code>group_by()</code> function to create a special grouped data frame to facilitate such summaries.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb51-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb51-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb51-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb51-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="co" style="color: #5E5E5E;"># group by region</span></span>
<span id="cb52-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">group_by</span>(region)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 6
# Groups:   region [4]
   state                abb   region    population total  rate
   &lt;chr&gt;                &lt;chr&gt; &lt;fct&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 Alabama              AL    South        4779736   135  2.82
 2 Alaska               AK    West          710231    19  2.68
 3 Arizona              AZ    West         6392017   232  3.63
 4 Arkansas             AR    South        2915918    93  3.19
 5 California           CA    West        37253956  1257  3.37
 6 Colorado             CO    West         5029196    65  1.29
 7 Connecticut          CT    Northeast    3574097    97  2.71
 8 Delaware             DE    South         897934    38  4.23
 9 District of Columbia DC    South         601723    99 16.5 
10 Florida              FL    South       19687653   669  3.40
# … with 41 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="co" style="color: #5E5E5E;"># summarize after grouping</span></span>
<span id="cb54-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb54-3">  <span class="fu" style="color: #4758AB;">group_by</span>(region) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb54-4">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">median =</span> <span class="fu" style="color: #4758AB;">median</span>(rate))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  region        median
  &lt;fct&gt;          &lt;dbl&gt;
1 Northeast       1.80
2 South           3.40
3 North Central   1.97
4 West            1.29</code></pre>
</div>
</div>
</section></section><section id="sorting-data-tables" class="level2" data-number="3.11"><h2 data-number="3.11" class="anchored" data-anchor-id="sorting-data-tables">
<span class="header-section-number">3.11</span> Sorting data tables</h2>
<section id="key-points-20" class="level3" data-number="3.11.1"><h3 data-number="3.11.1" class="anchored" data-anchor-id="key-points-20">
<span class="header-section-number">3.11.1</span> Key Points</h3>
<ul>
<li><p>To order an entire table, we can use the <strong>dplyr</strong> function <code>arrange()</code>.</p></li>
<li><p>We can also use nested sorting to order by additional columns.</p></li>
<li><p>The function <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> returns on the first few lines of a table.</p></li>
<li><p>The function <code>top_n()</code> returns the top n rows of a table.</p></li>
</ul></section><section id="code-13" class="level3" data-number="3.11.2"><h3 data-number="3.11.2" class="anchored" data-anchor-id="code-13">
<span class="header-section-number">3.11.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb56-2"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb56-3"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb56-4"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb56-5">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><span class="co" style="color: #5E5E5E;"># order the states by population size</span></span>
<span id="cb57-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">arrange</span>(population) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">head</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 state abb        region population total       rate
1              Wyoming  WY          West     563626     5  0.8871131
2 District of Columbia  DC         South     601723    99 16.4527532
3              Vermont  VT     Northeast     625741     2  0.3196211
4         North Dakota  ND North Central     672591     4  0.5947151
5               Alaska  AK          West     710231    19  2.6751860
6         South Dakota  SD North Central     814180     8  0.9825837</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><span class="co" style="color: #5E5E5E;"># order the states by murder rate - the default is ascending order</span></span>
<span id="cb59-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">arrange</span>(rate) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">head</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          state abb        region population total      rate
1       Vermont  VT     Northeast     625741     2 0.3196211
2 New Hampshire  NH     Northeast    1316470     5 0.3798036
3        Hawaii  HI          West    1360301     7 0.5145920
4  North Dakota  ND North Central     672591     4 0.5947151
5          Iowa  IA North Central    3046355    21 0.6893484
6         Idaho  ID          West    1567582    12 0.7655102</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><span class="co" style="color: #5E5E5E;"># order the states by murder rate in descending order</span></span>
<span id="cb61-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(rate)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">head</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 state abb        region population total      rate
1 District of Columbia  DC         South     601723    99 16.452753
2            Louisiana  LA         South    4533372   351  7.742581
3             Missouri  MO North Central    5988927   321  5.359892
4             Maryland  MD         South    5773552   293  5.074866
5       South Carolina  SC         South    4625364   207  4.475323
6             Delaware  DE         South     897934    38  4.231937</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><span class="co" style="color: #5E5E5E;"># order the states by region and then by murder rate within region</span></span>
<span id="cb63-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">arrange</span>(region, rate) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">head</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          state abb    region population total      rate
1       Vermont  VT Northeast     625741     2 0.3196211
2 New Hampshire  NH Northeast    1316470     5 0.3798036
3         Maine  ME Northeast    1328361    11 0.8280881
4  Rhode Island  RI Northeast    1052567    16 1.5200933
5 Massachusetts  MA Northeast    6547629   118 1.8021791
6      New York  NY Northeast   19378102   517 2.6679599</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><span class="co" style="color: #5E5E5E;"># return the top 10 states by murder rate</span></span>
<span id="cb65-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">top_n</span>(<span class="dv" style="color: #AD0000;">10</span>, rate)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  state abb        region population total      rate
1               Arizona  AZ          West    6392017   232  3.629527
2              Delaware  DE         South     897934    38  4.231937
3  District of Columbia  DC         South     601723    99 16.452753
4               Georgia  GA         South    9920000   376  3.790323
5             Louisiana  LA         South    4533372   351  7.742581
6              Maryland  MD         South    5773552   293  5.074866
7              Michigan  MI North Central    9883640   413  4.178622
8           Mississippi  MS         South    2967297   120  4.044085
9              Missouri  MO North Central    5988927   321  5.359892
10       South Carolina  SC         South    4625364   207  4.475323</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><span class="co" style="color: #5E5E5E;"># return the top 10 states ranked by murder rate, sorted by murder rate</span></span>
<span id="cb67-2">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">arrange</span>(<span class="fu" style="color: #4758AB;">desc</span>(rate)) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">top_n</span>(<span class="dv" style="color: #AD0000;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by rate</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                  state abb        region population total      rate
1  District of Columbia  DC         South     601723    99 16.452753
2             Louisiana  LA         South    4533372   351  7.742581
3              Missouri  MO North Central    5988927   321  5.359892
4              Maryland  MD         South    5773552   293  5.074866
5        South Carolina  SC         South    4625364   207  4.475323
6              Delaware  DE         South     897934    38  4.231937
7              Michigan  MI North Central    9883640   413  4.178622
8           Mississippi  MS         South    2967297   120  4.044085
9               Georgia  GA         South    9920000   376  3.790323
10              Arizona  AZ          West    6392017   232  3.629527</code></pre>
</div>
</div>
</section></section><section id="introduction-to-data.table" class="level2" data-number="3.12"><h2 data-number="3.12" class="anchored" data-anchor-id="introduction-to-data.table">
<span class="header-section-number">3.12</span> Introduction to data.table</h2>
<section id="key-points-21" class="level3" data-number="3.12.1"><h3 data-number="3.12.1" class="anchored" data-anchor-id="key-points-21">
<span class="header-section-number">3.12.1</span> Key Points</h3>
<ul>
<li><p>In this course, we often use tidyverse packages to illustrate because these packages tend to have code that is very readable for beginners.</p></li>
<li><p>There are other approaches to wrangling and analyzing data in R that are faster and better at handling large objects, such as the data.table package.</p></li>
<li><p>Selecting in data.table uses notation similar to that used with matrices.</p></li>
<li><p>To add a column in data.table, you can use the := function.</p></li>
<li><p>Because the data.table package is designed to avoid wasting memory, when you make a copy of a table, it does not create a new object. The := function changes by reference. If you want to make an actual copy, you need to use the copy() function.</p></li>
<li><p>Side note: the R language has a new, built-in pipe operator as of version 4.1: |&gt;. This works similarly to the pipe %&gt;% you are already familiar with. You can <a href="https://www.r-bloggers.com/2021/05/the-new-r-pipe/">read more about the |&gt; pipe here External link</a>.</p></li>
</ul></section><section id="code-14" class="level3" data-number="3.12.2"><h3 data-number="3.12.2" class="anchored" data-anchor-id="code-14">
<span class="header-section-number">3.12.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><span class="co" style="color: #5E5E5E;"># install the data.table package before you use it!</span></span>
<span id="cb70-2"><span class="fu" style="color: #4758AB;">install.packages</span>(<span class="st" style="color: #20794D;">"data.table"</span>)</span>
<span id="cb70-3"></span>
<span id="cb70-4"><span class="co" style="color: #5E5E5E;"># load data.table package</span></span>
<span id="cb70-5"><span class="fu" style="color: #4758AB;">library</span>(data.table)</span>
<span id="cb70-6"></span>
<span id="cb70-7"><span class="co" style="color: #5E5E5E;"># load other packages and datasets</span></span>
<span id="cb70-8"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb70-9"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb70-10"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb70-11"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb70-12"></span>
<span id="cb70-13"><span class="co" style="color: #5E5E5E;"># convert the data frame into a data.table object</span></span>
<span id="cb70-14">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">setDT</span>(murders)</span>
<span id="cb70-15"></span>
<span id="cb70-16"><span class="co" style="color: #5E5E5E;"># selecting in dplyr</span></span>
<span id="cb70-17"><span class="fu" style="color: #4758AB;">select</span>(murders, state, region)</span>
<span id="cb70-18"></span>
<span id="cb70-19"><span class="co" style="color: #5E5E5E;"># selecting in data.table - 2 methods</span></span>
<span id="cb70-20">murders[, <span class="fu" style="color: #4758AB;">c</span>(<span class="st" style="color: #20794D;">"state"</span>, <span class="st" style="color: #20794D;">"region"</span>)] <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">head</span>()</span>
<span id="cb70-21">murders[, .(state, region)] <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">head</span>()</span>
<span id="cb70-22"></span>
<span id="cb70-23"><span class="co" style="color: #5E5E5E;"># adding or changing a column in dplyr</span></span>
<span id="cb70-24">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb70-25"></span>
<span id="cb70-26"><span class="co" style="color: #5E5E5E;"># adding or changing a column in data.table</span></span>
<span id="cb70-27">murders[, rate <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span>]</span>
<span id="cb70-28"><span class="fu" style="color: #4758AB;">head</span>(murders)</span>
<span id="cb70-29">murders[, <span class="st" style="color: #20794D;">":="</span>(<span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span>, <span class="at" style="color: #657422;">rank =</span> <span class="fu" style="color: #4758AB;">rank</span>(population))]</span>
<span id="cb70-30"></span>
<span id="cb70-31"><span class="co" style="color: #5E5E5E;"># y is referring to x and := changes by reference</span></span>
<span id="cb70-32">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">a =</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb70-33">y <span class="ot" style="color: #003B4F;">&lt;-</span> x</span>
<span id="cb70-34"></span>
<span id="cb70-35">x[,a <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="dv" style="color: #AD0000;">2</span>]</span>
<span id="cb70-36">y</span>
<span id="cb70-37"></span>
<span id="cb70-38">y[,a <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="dv" style="color: #AD0000;">1</span>]</span>
<span id="cb70-39">x</span>
<span id="cb70-40"></span>
<span id="cb70-41"><span class="co" style="color: #5E5E5E;"># use copy to make an actual copy</span></span>
<span id="cb70-42">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">a =</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb70-43">y <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">copy</span>(x)</span>
<span id="cb70-44">x[,a <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> <span class="dv" style="color: #AD0000;">2</span>]</span>
<span id="cb70-45">y</span></code></pre></div>
</div>
</section></section><section id="subsetting-with-data.table" class="level2" data-number="3.13"><h2 data-number="3.13" class="anchored" data-anchor-id="subsetting-with-data.table">
<span class="header-section-number">3.13</span> Subsetting with data.table</h2>
<section id="key-points-22" class="level3" data-number="3.13.1"><h3 data-number="3.13.1" class="anchored" data-anchor-id="key-points-22">
<span class="header-section-number">3.13.1</span> Key Points</h3>
<p><a href="http://rafalab.dfci.harvard.edu/dsbook/data-table.html#subsetting-1">Subsetting in <strong>data.table</strong></a> uses notation similar to that used with matrices.</p>
</section><section id="code-15" class="level3" data-number="3.13.2"><h3 data-number="3.13.2" class="anchored" data-anchor-id="code-15">
<span class="header-section-number">3.13.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><span class="co" style="color: #5E5E5E;"># load packages and prepare the data</span></span>
<span id="cb71-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb71-3"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb71-4"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb71-5"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb71-6"><span class="fu" style="color: #4758AB;">library</span>(data.table)</span>
<span id="cb71-7">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">setDT</span>(murders)</span>
<span id="cb71-8">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">mutate</span>(murders, <span class="at" style="color: #657422;">rate =</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">10</span><span class="sc" style="color: #5E5E5E;">^</span><span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb71-9">murders[, rate <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span>]</span>
<span id="cb71-10"></span>
<span id="cb71-11"><span class="co" style="color: #5E5E5E;"># subsetting in dplyr</span></span>
<span id="cb71-12"><span class="fu" style="color: #4758AB;">filter</span>(murders, rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">0.7</span>)</span>
<span id="cb71-13"></span>
<span id="cb71-14"><span class="co" style="color: #5E5E5E;"># subsetting in data.table</span></span>
<span id="cb71-15">murders[rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">0.7</span>]</span>
<span id="cb71-16"></span>
<span id="cb71-17"><span class="co" style="color: #5E5E5E;"># combining filter and select in data.table</span></span>
<span id="cb71-18">murders[rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">0.7</span>, .(state, rate)]</span>
<span id="cb71-19"></span>
<span id="cb71-20"><span class="co" style="color: #5E5E5E;"># combining filter and select in dplyr</span></span>
<span id="cb71-21">murders <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">filter</span>(rate <span class="sc" style="color: #5E5E5E;">&lt;=</span> <span class="fl" style="color: #AD0000;">0.7</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span> <span class="fu" style="color: #4758AB;">select</span>(state, rate)</span></code></pre></div>
</div>
</section></section><section id="summarizing-with-data.table" class="level2" data-number="3.14"><h2 data-number="3.14" class="anchored" data-anchor-id="summarizing-with-data.table">
<span class="header-section-number">3.14</span> Summarizing with data.table</h2>
<section id="key-points-23" class="level3" data-number="3.14.1"><h3 data-number="3.14.1" class="anchored" data-anchor-id="key-points-23">
<span class="header-section-number">3.14.1</span> Key Points</h3>
<ul>
<li><p>In data.table we can call functions inside <code>.()</code>and they will be applied to rows.</p></li>
<li><p>The <code>group_by</code> followed by summarize in <strong>dplyr</strong> is performed in one line in data.table using the by argument.</p></li>
</ul></section><section id="code-16" class="level3" data-number="3.14.2"><h3 data-number="3.14.2" class="anchored" data-anchor-id="code-16">
<span class="header-section-number">3.14.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb72" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><span class="co" style="color: #5E5E5E;"># load packages and prepare the data - heights dataset</span></span>
<span id="cb72-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb72-3"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb72-4"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb72-5"><span class="fu" style="color: #4758AB;">data</span>(heights)</span>
<span id="cb72-6">heights <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">setDT</span>(heights)</span>
<span id="cb72-7"></span>
<span id="cb72-8"><span class="co" style="color: #5E5E5E;"># summarizing in dplyr</span></span>
<span id="cb72-9">s <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb72-10">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">average =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">standard_deviation =</span> <span class="fu" style="color: #4758AB;">sd</span>(height))</span>
<span id="cb72-11">  </span>
<span id="cb72-12"><span class="co" style="color: #5E5E5E;"># summarizing in data.table</span></span>
<span id="cb72-13">s <span class="ot" style="color: #003B4F;">&lt;-</span> heights[, .(<span class="at" style="color: #657422;">average =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">standard_deviation =</span> <span class="fu" style="color: #4758AB;">sd</span>(height))]</span>
<span id="cb72-14"></span>
<span id="cb72-15"><span class="co" style="color: #5E5E5E;"># subsetting and then summarizing in dplyr</span></span>
<span id="cb72-16">s <span class="ot" style="color: #003B4F;">&lt;-</span> heights <span class="sc" style="color: #5E5E5E;">%&gt;%</span> </span>
<span id="cb72-17">  <span class="fu" style="color: #4758AB;">filter</span>(sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Female"</span>) <span class="sc" style="color: #5E5E5E;">%&gt;%</span></span>
<span id="cb72-18">  <span class="fu" style="color: #4758AB;">summarize</span>(<span class="at" style="color: #657422;">average =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">standard_deviation =</span> <span class="fu" style="color: #4758AB;">sd</span>(height))</span>
<span id="cb72-19">  </span>
<span id="cb72-20"><span class="co" style="color: #5E5E5E;"># subsetting and then summarizing in data.table</span></span>
<span id="cb72-21">s <span class="ot" style="color: #003B4F;">&lt;-</span> heights[sex <span class="sc" style="color: #5E5E5E;">==</span> <span class="st" style="color: #20794D;">"Female"</span>, .(<span class="at" style="color: #657422;">average =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">standard_deviation =</span> <span class="fu" style="color: #4758AB;">sd</span>(height))]</span>
<span id="cb72-22"></span>
<span id="cb72-23"><span class="co" style="color: #5E5E5E;"># previously defined function</span></span>
<span id="cb72-24">median_min_max <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x){</span>
<span id="cb72-25">  qs <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">quantile</span>(x, <span class="fu" style="color: #4758AB;">c</span>(<span class="fl" style="color: #AD0000;">0.5</span>, <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">1</span>))</span>
<span id="cb72-26">  <span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">median =</span> qs[<span class="dv" style="color: #AD0000;">1</span>], <span class="at" style="color: #657422;">minimum =</span> qs[<span class="dv" style="color: #AD0000;">2</span>], <span class="at" style="color: #657422;">maximum =</span> qs[<span class="dv" style="color: #AD0000;">3</span>])</span>
<span id="cb72-27">}</span>
<span id="cb72-28"></span>
<span id="cb72-29"><span class="co" style="color: #5E5E5E;"># multiple summaries in data.table</span></span>
<span id="cb72-30">heights[, .(<span class="fu" style="color: #4758AB;">median_min_max</span>(height))]</span>
<span id="cb72-31"></span>
<span id="cb72-32"><span class="co" style="color: #5E5E5E;"># grouping then summarizing in data.table</span></span>
<span id="cb72-33">heights[, .(<span class="at" style="color: #657422;">average =</span> <span class="fu" style="color: #4758AB;">mean</span>(height), <span class="at" style="color: #657422;">standard_deviation =</span> <span class="fu" style="color: #4758AB;">sd</span>(height)), by <span class="ot" style="color: #003B4F;">=</span> sex]</span></code></pre></div>
</div>
</section></section><section id="sorting-data-frames" class="level2" data-number="3.15"><h2 data-number="3.15" class="anchored" data-anchor-id="sorting-data-frames">
<span class="header-section-number">3.15</span> <a href="http://rafalab.dfci.harvard.edu/dsbook/tidyverse.html#sorting-data-frames">Sorting data frames</a>
</h2>
<section id="key-points-24" class="level3" data-number="3.15.1"><h3 data-number="3.15.1" class="anchored" data-anchor-id="key-points-24">
<span class="header-section-number">3.15.1</span> Key Points</h3>
<ul>
<li><p>To order rows in a data frame using data.table, we can use the same approach we used for filtering.</p></li>
<li><p>The default sort is an ascending order, but we can also sort tables in descending order.</p></li>
<li><p>We can also perform nested sorting by including multiple variables in the desired sort order.</p></li>
</ul></section><section id="code-17" class="level3" data-number="3.15.2"><h3 data-number="3.15.2" class="anchored" data-anchor-id="code-17">
<span class="header-section-number">3.15.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="co" style="color: #5E5E5E;"># load packages and datasets and prepare the data</span></span>
<span id="cb73-2"><span class="fu" style="color: #4758AB;">library</span>(tidyverse)</span>
<span id="cb73-3"><span class="fu" style="color: #4758AB;">library</span>(dplyr)</span>
<span id="cb73-4"><span class="fu" style="color: #4758AB;">library</span>(data.table)</span>
<span id="cb73-5"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb73-6"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb73-7">murders <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">setDT</span>(murders)</span>
<span id="cb73-8">murders[, rate <span class="sc" style="color: #5E5E5E;">:</span><span class="er" style="color: #AD0000;">=</span> total <span class="sc" style="color: #5E5E5E;">/</span> population <span class="sc" style="color: #5E5E5E;">*</span> <span class="dv" style="color: #AD0000;">100000</span>]</span>
<span id="cb73-9"></span>
<span id="cb73-10"><span class="co" style="color: #5E5E5E;"># order by population</span></span>
<span id="cb73-11">murders[<span class="fu" style="color: #4758AB;">order</span>(population)] <span class="sc" style="color: #5E5E5E;">|&gt;</span> <span class="fu" style="color: #4758AB;">head</span>()</span>
<span id="cb73-12"></span>
<span id="cb73-13"><span class="co" style="color: #5E5E5E;"># order by population in descending order</span></span>
<span id="cb73-14">murders[<span class="fu" style="color: #4758AB;">order</span>(population, <span class="at" style="color: #657422;">decreasing =</span> <span class="cn" style="color: #8f5902;">TRUE</span>)] </span>
<span id="cb73-15"></span>
<span id="cb73-16"><span class="co" style="color: #5E5E5E;"># order by region and then murder rate</span></span>
<span id="cb73-17">murders[<span class="fu" style="color: #4758AB;">order</span>(region, rate)]</span></code></pre></div>
</div>
</section></section></section><section id="programming-basics" class="level1" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> Programming Basics</h1>
<p>In this section, I will introduce you to general programming features like ‘if-else’ and ‘for loop’ commands so that you can write your own functions to perform various operations on datasets.</p>
<p>In programming basics, you will: - Understand some of the programming capabilities of R.</p>
<p>In basic condationals, you will: - Use basic conditional expressions to perform different operations. Check if any or all elements of a logical vector are TRUE.</p>
<p>In function, you will: - Define and call functions to perform various operations.</p>
<ul>
<li>Pass arguments to functions, and return variables/objects from functions.</li>
</ul>
<p>In loops, you will: - Use for-loops to perform repeated operations.</p>
<ul>
<li>Articulate in-built functions of R that you could try for yourself.</li>
</ul>
<section id="programming-basics-1" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="programming-basics-1">
<span class="header-section-number">4.1</span> Programming Basics</h2>
<p><a href="http://rafalab.dfci.harvard.edu/dsbook/programming-basics.html">Introduction to Programming in R</a></p>
</section><section id="basic-condationals" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="basic-condationals">
<span class="header-section-number">4.2</span> Basic Condationals</h2>
<section id="key-points-25" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="key-points-25">
<span class="header-section-number">4.2.1</span> Key Points</h3>
<ul>
<li><p>The most common conditional expression in programming is an if-else statement, which has the form “if [condition], perform [expression], else perform [alternative expression]”.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function works similarly to an if-else statement, but it is particularly useful since it works on vectors by examining each element of the vector and returning a corresponding answer accordingly.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/any.html">any()</a></code> function takes a vector of logicals and returns true if any of the entries are true.</p></li>
<li><p>The <code><a href="https://rdrr.io/r/base/all.html">all()</a></code> function takes a vector of logicals and returns true if all of the entries are true.</p></li>
</ul></section><section id="code-18" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="code-18">
<span class="header-section-number">4.2.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><span class="co" style="color: #5E5E5E;"># an example showing the general structure of an if-else statement</span></span>
<span id="cb74-2">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">0</span></span>
<span id="cb74-3"><span class="cf" style="color: #003B4F;">if</span>(a<span class="sc" style="color: #5E5E5E;">!=</span><span class="dv" style="color: #AD0000;">0</span>){</span>
<span id="cb74-4">  <span class="fu" style="color: #4758AB;">print</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>a)</span>
<span id="cb74-5">} <span class="cf" style="color: #003B4F;">else</span>{</span>
<span id="cb74-6">  <span class="fu" style="color: #4758AB;">print</span>(<span class="st" style="color: #20794D;">"No reciprocal for 0."</span>)</span>
<span id="cb74-7">}</span>
<span id="cb74-8"></span>
<span id="cb74-9"><span class="co" style="color: #5E5E5E;"># an example that tells us which states, if any, have a murder rate less than 0.5</span></span>
<span id="cb74-10"><span class="fu" style="color: #4758AB;">library</span>(dslabs)</span>
<span id="cb74-11"><span class="fu" style="color: #4758AB;">data</span>(murders)</span>
<span id="cb74-12">murder_rate <span class="ot" style="color: #003B4F;">&lt;-</span> murders<span class="sc" style="color: #5E5E5E;">$</span>total <span class="sc" style="color: #5E5E5E;">/</span> murders<span class="sc" style="color: #5E5E5E;">$</span>population<span class="sc" style="color: #5E5E5E;">*</span><span class="dv" style="color: #AD0000;">100000</span></span>
<span id="cb74-13">ind <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">which.min</span>(murder_rate)</span>
<span id="cb74-14"><span class="cf" style="color: #003B4F;">if</span>(murder_rate[ind] <span class="sc" style="color: #5E5E5E;">&lt;</span> <span class="fl" style="color: #AD0000;">0.5</span>){</span>
<span id="cb74-15">  <span class="fu" style="color: #4758AB;">print</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>state[ind]) </span>
<span id="cb74-16">} <span class="cf" style="color: #003B4F;">else</span>{</span>
<span id="cb74-17">  <span class="fu" style="color: #4758AB;">print</span>(<span class="st" style="color: #20794D;">"No state has murder rate that low"</span>)</span>
<span id="cb74-18">}</span>
<span id="cb74-19"></span>
<span id="cb74-20"><span class="co" style="color: #5E5E5E;"># changing the condition to &lt; 0.25 changes the result</span></span>
<span id="cb74-21"><span class="cf" style="color: #003B4F;">if</span>(murder_rate[ind] <span class="sc" style="color: #5E5E5E;">&lt;</span> <span class="fl" style="color: #AD0000;">0.25</span>){</span>
<span id="cb74-22">  <span class="fu" style="color: #4758AB;">print</span>(murders<span class="sc" style="color: #5E5E5E;">$</span>state[ind]) </span>
<span id="cb74-23">} <span class="cf" style="color: #003B4F;">else</span>{</span>
<span id="cb74-24">  <span class="fu" style="color: #4758AB;">print</span>(<span class="st" style="color: #20794D;">"No state has a murder rate that low."</span>)</span>
<span id="cb74-25">}</span>
<span id="cb74-26"></span>
<span id="cb74-27"><span class="co" style="color: #5E5E5E;"># the ifelse() function works similarly to an if-else conditional</span></span>
<span id="cb74-28">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">0</span></span>
<span id="cb74-29"><span class="fu" style="color: #4758AB;">ifelse</span>(a <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>a, <span class="cn" style="color: #8f5902;">NA</span>)</span>
<span id="cb74-30"></span>
<span id="cb74-31"><span class="co" style="color: #5E5E5E;"># the ifelse() function is particularly useful on vectors</span></span>
<span id="cb74-32">a <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="dv" style="color: #AD0000;">0</span>,<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">2</span>,<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">4</span>,<span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb74-33">result <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ifelse</span>(a <span class="sc" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">0</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>a, <span class="cn" style="color: #8f5902;">NA</span>)</span>
<span id="cb74-34"></span>
<span id="cb74-35"><span class="co" style="color: #5E5E5E;"># the ifelse() function is also helpful for replacing missing values</span></span>
<span id="cb74-36"><span class="fu" style="color: #4758AB;">data</span>(na_example)</span>
<span id="cb74-37">no_nas <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ifelse</span>(<span class="fu" style="color: #4758AB;">is.na</span>(na_example), <span class="dv" style="color: #AD0000;">0</span>, na_example) </span>
<span id="cb74-38"><span class="fu" style="color: #4758AB;">sum</span>(<span class="fu" style="color: #4758AB;">is.na</span>(no_nas))</span>
<span id="cb74-39"></span>
<span id="cb74-40"><span class="co" style="color: #5E5E5E;"># the any() and all() functions evaluate logical vectors</span></span>
<span id="cb74-41">z <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="cn" style="color: #8f5902;">TRUE</span>, <span class="cn" style="color: #8f5902;">TRUE</span>, <span class="cn" style="color: #8f5902;">FALSE</span>)</span>
<span id="cb74-42"><span class="fu" style="color: #4758AB;">any</span>(z)</span>
<span id="cb74-43"><span class="fu" style="color: #4758AB;">all</span>(z)</span></code></pre></div>
</div>
</section></section><section id="functions" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="functions">
<span class="header-section-number">4.3</span> Functions</h2>
<section id="key-points-26" class="level3" data-number="4.3.1"><h3 data-number="4.3.1" class="anchored" data-anchor-id="key-points-26">
<span class="header-section-number">4.3.1</span> Key Points</h3>
<ul>
<li><p>The R function called function() tells R you are about to define a new function.</p></li>
<li><p>Functions are objects, so must be assigned a variable name with the arrow operator.</p></li>
<li>
<p>The general way to define functions is:</p>
<ul>
<li><ol type="1">
<li>decide the function name, which will be an object,</li>
</ol></li>
<li><ol start="2" type="1">
<li>type function() with your function’s arguments in parentheses, - (3) write all the operations inside brackets.</li>
</ol></li>
</ul>
</li>
<li><p>Variables defined inside a function are not saved in the workspace.</p></li>
</ul></section><section id="code-19" class="level3" data-number="4.3.2"><h3 data-number="4.3.2" class="anchored" data-anchor-id="code-19">
<span class="header-section-number">4.3.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><span class="co" style="color: #5E5E5E;"># example of defining a function to compute the average of a vector x</span></span>
<span id="cb75-2">avg <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x){</span>
<span id="cb75-3">  s <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sum</span>(x)</span>
<span id="cb75-4">  n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">length</span>(x)</span>
<span id="cb75-5">  s<span class="sc" style="color: #5E5E5E;">/</span>n</span>
<span id="cb75-6">}</span>
<span id="cb75-7"></span>
<span id="cb75-8"><span class="co" style="color: #5E5E5E;"># we see that the above function and the pre-built R mean() function are identical</span></span>
<span id="cb75-9">x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">100</span></span>
<span id="cb75-10"><span class="fu" style="color: #4758AB;">identical</span>(<span class="fu" style="color: #4758AB;">mean</span>(x), <span class="fu" style="color: #4758AB;">avg</span>(x))</span>
<span id="cb75-11"></span>
<span id="cb75-12"><span class="co" style="color: #5E5E5E;"># variables inside a function are not defined in the workspace</span></span>
<span id="cb75-13">s <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">3</span></span>
<span id="cb75-14"><span class="fu" style="color: #4758AB;">avg</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">10</span>)</span>
<span id="cb75-15">s</span>
<span id="cb75-16"></span>
<span id="cb75-17"><span class="co" style="color: #5E5E5E;"># the general form of a function</span></span>
<span id="cb75-18">my_function <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(VARIABLE_NAME){</span>
<span id="cb75-19">  perform operations on VARIABLE_NAME and calculate VALUE</span>
<span id="cb75-20">  VALUE</span>
<span id="cb75-21">}</span>
<span id="cb75-22"></span>
<span id="cb75-23"><span class="co" style="color: #5E5E5E;"># functions can have multiple arguments as well as default values</span></span>
<span id="cb75-24">avg <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x, <span class="at" style="color: #657422;">arithmetic =</span> <span class="cn" style="color: #8f5902;">TRUE</span>){</span>
<span id="cb75-25">  n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">length</span>(x)</span>
<span id="cb75-26">  <span class="fu" style="color: #4758AB;">ifelse</span>(arithmetic, <span class="fu" style="color: #4758AB;">sum</span>(x)<span class="sc" style="color: #5E5E5E;">/</span>n, <span class="fu" style="color: #4758AB;">prod</span>(x)<span class="sc" style="color: #5E5E5E;">^</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>n))</span>
<span id="cb75-27">}</span></code></pre></div>
</div>
</section></section><section id="for-loops" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="for-loops">
<span class="header-section-number">4.4</span> For Loops</h2>
<section id="key-points-27" class="level3" data-number="4.4.1"><h3 data-number="4.4.1" class="anchored" data-anchor-id="key-points-27">
<span class="header-section-number">4.4.1</span> Key Points</h3>
<ul>
<li><p>For-loops perform the same task over and over while changing the variable. They let us define the range that our variable takes, and then changes the value with each loop and evaluates the expression every time inside the loop.</p></li>
<li><p>The general form of a for-loop is: “For i in [some range], do operations”. This i changes across the range of values and the operations assume i is a value you’re interested in computing on.</p></li>
<li><p>At the end of the loop, the value of i is the last value of the range.</p></li>
</ul></section><section id="code-20" class="level3" data-number="4.4.2"><h3 data-number="4.4.2" class="anchored" data-anchor-id="code-20">
<span class="header-section-number">4.4.2</span> Code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><span class="co" style="color: #5E5E5E;"># creating a function that computes the sum of integers 1 through n</span></span>
<span id="cb76-2">compute_s_n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(n){</span>
<span id="cb76-3">  x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>n</span>
<span id="cb76-4">  <span class="fu" style="color: #4758AB;">sum</span>(x)</span>
<span id="cb76-5">}</span>
<span id="cb76-6"></span>
<span id="cb76-7"><span class="co" style="color: #5E5E5E;"># a very simple for-loop</span></span>
<span id="cb76-8"><span class="cf" style="color: #003B4F;">for</span>(i <span class="cf" style="color: #003B4F;">in</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span><span class="dv" style="color: #AD0000;">5</span>){</span>
<span id="cb76-9">  <span class="fu" style="color: #4758AB;">print</span>(i)</span>
<span id="cb76-10">}</span>
<span id="cb76-11"></span>
<span id="cb76-12"><span class="co" style="color: #5E5E5E;"># a for-loop for our summation</span></span>
<span id="cb76-13">m <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">25</span></span>
<span id="cb76-14">s_n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">vector</span>(<span class="at" style="color: #657422;">length =</span> m) <span class="co" style="color: #5E5E5E;"># create an empty vector</span></span>
<span id="cb76-15"><span class="cf" style="color: #003B4F;">for</span>(n <span class="cf" style="color: #003B4F;">in</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>m){</span>
<span id="cb76-16">  s_n[n] <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">compute_s_n</span>(n)</span>
<span id="cb76-17">}</span>
<span id="cb76-18"></span>
<span id="cb76-19"><span class="co" style="color: #5E5E5E;"># creating a plot for our summation function</span></span>
<span id="cb76-20">n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>m</span>
<span id="cb76-21"><span class="fu" style="color: #4758AB;">plot</span>(n, s_n)</span>
<span id="cb76-22"></span>
<span id="cb76-23"><span class="co" style="color: #5E5E5E;"># a table of values comparing our function to the summation formula</span></span>
<span id="cb76-24"><span class="fu" style="color: #4758AB;">head</span>(<span class="fu" style="color: #4758AB;">data.frame</span>(<span class="at" style="color: #657422;">s_n =</span> s_n, <span class="at" style="color: #657422;">formula =</span> n<span class="sc" style="color: #5E5E5E;">*</span>(n<span class="sc" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">1</span>)<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">2</span>))</span>
<span id="cb76-25"></span>
<span id="cb76-26"><span class="co" style="color: #5E5E5E;"># overlaying our function with the summation formula</span></span>
<span id="cb76-27"><span class="fu" style="color: #4758AB;">plot</span>(n, s_n)</span>
<span id="cb76-28"><span class="fu" style="color: #4758AB;">lines</span>(n, n<span class="sc" style="color: #5E5E5E;">*</span>(n<span class="sc" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">1</span>)<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">2</span>)</span></code></pre></div>
</div>


</section></section></section> ]]></description>
  <category>Data Science</category>
  <category>R Basic</category>
  <guid>https://stats-r.com/series/R Basic/about.html</guid>
  <pubDate>Sat, 26 Nov 2022 11:00:00 GMT</pubDate>
  <media:content url="https://images.unsplash.com/photo-1634128221889-82ed6efebfc3?ixlib=rb-1.2.1&amp;q=80&amp;cs=tinysrgb&amp;fm=jpg&amp;crop=entropy&amp;w=3600" medium="image"/>
</item>
</channel>
</rss>
